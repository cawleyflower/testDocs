<!DOCTYPE html><html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R a D I U S a a A | Cumulus Networks Documentation</title>

<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">
<link rel="stylesheet" href="/normalize.min.css">

<link rel="stylesheet" href="/book.min.50a619ce4c0e99594908d162684f42218608aa6fde2bd83cca5025d59ba535e3.css">

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<h2 class="book-brand">
  <a href="http://example.org/">Cumulus Networks Documentation</a>
</h2>



    


  
  
    
    
  
 
  <ul>
    
    <li><a href="/Cumulus-Linux/installation-management/">
    Installation Management</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/installation-management/Adding_and_Updating_Packages/">Adding and Updating Packages</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Installing_a_New_Cumulus_Linux_Image/">Installing a New Cumulus Linux Image</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Managing_Cumulus_Linux_Disk_Images/">Managing Cumulus Linux Disk Images</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Upgrading_Cumulus_Linux/">Upgrading Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Using_Snapshots/">Using Snapshots</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Zero_Touch_Provisioning_-_ZTP/">Zero Touch Provisioning Z T P</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/layer1-switch-ports/">
    Layer1 Switch Ports</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/802.1X_Interfaces/">802.1 X Interfaces</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/Buffer_and_Queue_Management/">Buffer and Queue Management</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/DHCP_Relays/">D H C P Relays</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/DHCP_Servers/">D H C P Servers</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/Facebook_Voyager_Optical_Interfaces/">Facebook Voyager Optical Interfaces</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/Prescriptive_Topology_Manager_-_PTM/">Prescriptive Topology Manager P T M</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/interface_configuration_and_management/Interface_Configuration_and_Management/">Interface Configuration and Management</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/interface_configuration_and_management/switch_port_attributes/Switch_Port_Attributes/">Switch Port Attributes</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/layer2/">
    Layer2</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/layer2/Copy_of_Prescriptive_Topology_Manager_-_PTM/">Copy of Prescriptive Topology Manager P T M</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Copy_of_Spanning_Tree_and_Rapid_Spanning_Tree/">Copy of Spanning Tree and Rapid Spanning Tree</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Ethernet_Bridging_-_VLANs/">Ethernet Bridging v L a Ns</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/IGMP_and_MLD_Snooping/">I G M P and M L D Snooping</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/LACP_Bypass/">L a C P Bypass</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Link_Layer_Discovery_Protocol/">Link Layer Discovery Protocol</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Multi-Chassis_Link_Aggregation_-_MLAG/">Multi Chassis Link Aggregation M L a G</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Spanning_Tree_and_Rapid_Spanning_Tree/">Spanning Tree and Rapid Spanning Tree</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Virtual_Router_Redundancy_-_VRR/">Virtual Router Redundancy v R R</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/bonding_link_aggregation/Bonding_-_Link_Aggregation/">Bonding Link Aggregation</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/ethernet_bridging_vlans/Traditional_Bridge_Mode/">Traditional Bridge Mode</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/ethernet_bridging_vlans/VLAN-aware_Bridge_Mode/">V L a N Aware Bridge Mode</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/ethernet_bridging_vlans/VLAN_Tagging/">V L a N Tagging</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/link_layer_discovery_protocol/voice_vlan/Voice_VLAN/">Voice v L a N</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/virtual_router_redundancy/ifplugd/ifplugd/">Ifplugd</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/layer3/">
    Layer3</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/layer3/Address_Resolution_Protocol_-_ARP/">Address Resolution Protocol a R P</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Bidirectional_Forwarding_Detection_-_BFD/">Bidirectional Forwarding Detection B F D</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Border_Gateway_Protocol_-_BGP/">Border Gateway Protocol B G P</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Configuring_FRRouting/">Configuring F R Routing</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Equal_Cost_Multipath_Load_Sharing_-_Hardware_ECMP/">Equal Cost Multipath Load Sharing Hardware E C M P</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/FRRouting_Overview/">F R Routing Overview</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/GRE_Tunneling/">G R E Tunneling</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Introduction_to_Routing_Protocols/">Introduction to Routing Protocols</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Management_VRF/">Management v R F</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Network_Topology/">Network Topology</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Open_Shortest_Path_First_-_OSPF/">Open Shortest Path First O S P F</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Open_Shortest_Path_First_v3_-_OSPFv3/">Open Shortest Path First V3 O S P Fv3</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Policy-based_Routing/">Policy Based Routing</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Protocol_Independent_Multicast_-_PIM/">Protocol Independent Multicast P I M</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Redistribute_Neighbor/">Redistribute Neighbor</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Routing/">Routing</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Segment_Routing/">Segment Routing</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Virtual_Routing_and_Forwarding_-_VRF/">Virtual Routing and Forwarding v R F</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/configuring_frrouting/comparing_nclu_and_vtysh_commands/Comparing_NCLU_and_vtysh_Commands/">Comparing N C L U and Vtysh Commands</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/frrouting_overview/Upgrading_from_Quagga_to_FRRouting/">Upgrading From Quagga to F R Routing</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/monitoring-troubleshooting/">
    Monitoring Troubleshooting</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/ASIC_Monitoring/">A S I C Monitoring</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/FRRouting_Log_Message_Reference/">F R Routing Log Message Reference</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Monitoring_Best_Practices/">Monitoring Best Practices</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Monitoring_System_Hardware/">Monitoring System Hardware</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Monitoring_Virtual_Device_Counters/">Monitoring Virtual Device Counters</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Network_Troubleshooting/">Network Troubleshooting</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Resource_Diagnostics_Using_cl-resource-query/">Resource Diagnostics Using Cl Resource Query</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Simple_Network_Management_Protocol_SNMP_Monitoring/">Simple Network Management Protocol S N M P Monitoring</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Single_User_Mode_-_Boot_Recovery/">Single User Mode Boot Recovery</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Troubleshooting_Network_Interfaces/">Troubleshooting Network Interfaces</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Understanding_the_cl-support_Output_File/">Understanding the Cl Support Output File</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/monitoring_system_hardware/network_switch_port_led_and_stats_led/Network_Switch_Port_LED_and_Status_LED_Guidelines/">Network Switch Port L E D and Status L E D Guidelines</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/network_troubleshooting/monitoring_system_statistics/Monitoring_System_Statistics_and_Network_Traffic_with_sFlow/">Monitoring System Statistics and Network Traffic With S Flow</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/network_troubleshooting/using_nclu_to_troubleshoot/Using_NCLU_to_Troubleshoot_Your_Network_Configuration/">Using N C L U to Troubleshoot Your Network Configuration</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/simple_network_management/using_nutanix_prisim_as_monitoring_tool/Using_Nutanix_Prism_as_a_Monitoring_Tool/">Using Nutanix Prism as a Monitoring Tool</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/switchd_Log_Message_Reference/">Switchd Log Message Reference</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/troubleshooting_network_interfaces/monitoring_interfaces_and_transcievers_using_ethtool/Monitoring_Interfaces_and_Transceivers_Using_ethtool/">Monitoring Interfaces and Transceivers Using Ethtool</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/understanding_cl-support_output_file/troubleshooting_log_files/Troubleshooting_Log_Files/">Troubleshooting Log Files</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/understanding_cl-support_output_file/troubleshooting_the_etc_directory/Troubleshooting_the_etc_Directory/">Troubleshooting the Etc Directory</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/network-solutions/">
    Network Solutions</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/network-solutions/Anycast_Design_Guide/">Anycast Design Guide</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/Cumulus_Hyperconverged_Solution_with_Nutanix/">Cumulus Hyperconverged Solution With Nutanix</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/Cumulus_Networks_Services_Demos/">Cumulus Networks Services Demos</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/Data_Center_Host_to_ToR_Architecture/">Data Center Host to to R Architecture</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/Docker_on_Cumulus_Linux/">Docker on Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/OpenStack_Neutron_ML2_and_Cumulus_Linux/">Open Stack Neutron M L2 and Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/RDMA_over_Converged_Ethernet_-_RoCE/">R D M a Over Converged Ethernet Ro C E</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/network-visualization/">
    Network Visualization</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Eng_Update_of_VXLAN_Hyperloop/">Eng Update of v X L a N Hyperloop</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Ethernet_Virtual_Private_Network_-_EVPN/">Ethernet Virtual Private Network E v P N</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Hybrid_Cloud_Connectivity_with_QinQ_and_VXLANs/">Hybrid Cloud Connectivity With Qin Q and v X L a Ns</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/LNV_Full_Example/">L N v Full Example</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Lightweight_Network_Virtualization_Overview/">Lightweight Network Virtualization Overview</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Static_VXLAN_Configurations/">Static v X L a N Configurations</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/VXLAN_Routing/">V X L a N Routing</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/VXLAN_Scale/">V X L a N Scale</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/VXLAN_Tunnel_DSCP_Operations__DRAFT/">V X L a N Tunnel D S C P Operations — D R a F T</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Virtualization_Integrations/">Virtualization Integrations</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/static_vxlan_configurations/static_mac_bindings/Static_MAC_Bindings_with_VXLAN/">Static M a C Bindings With v X L a N</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/static_vxlan_configurations/static_vxlan_tunnels/Static_VXLAN_Tunnels/">Static v X L a N Tunnels</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/virtualization_integrations/integrating_hardware_vteps_vmware_nsx-mh/Integrating_Hardware_VTEPs_with_VMware_NSX-MH/">Integrating Hardware v T E Ps With v Mware N S X M H</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/virtualization_integrations/integrating_vteps_midonet_openstack/Integrating_Hardware_VTEPs_with_Midokura_MidoNet_and_OpenStack/">Integrating Hardware v T E Ps With Midokura Mido Net and Open Stack</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/virtualization_integrations/integrating_vteps_vmware_nsx-v/Integrating_Hardware_VTEPs_with_VMware_NSX-V/">Integrating Hardware v T E Ps With v Mware N S X V</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/virtualization_integrations/ovsdb_server_high_availability/OVSDB_Server_High_Availability/">O v S D B Server High Availability</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/system-config/">
    System Config</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/system-config/Authentication_Authorization_and_Accounting/">Authentication Authorization and Accounting</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Configuring_a_Global_Proxy/">Configuring a Global Proxy</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Configuring_switchd/">Configuring Switchd</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Copy_of_Netfilter_-_ACLs/">Copy of Netfilter a C Ls</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/HTTP_API/">H T T P a P I</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Netfilter_-_ACLs/">Netfilter a C Ls</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Network_Command_Line_Utility_-_NCLU/">Network Command Line Utility N C L U</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Power_over_Ethernet_-_PoE/">Power Over Ethernet Po E</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Services_and_Daemons_in_Cumulus_Linux/">Services and Daemons in Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Setting_Date_and_Time/">Setting Date and Time</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/LDAP_Authentication_and_Authorization/">L D a P Authentication and Authorization</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/RADIUS_AAA/" class="active">R a D I U S a a A</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/SSH_for_Remote_Access/">S S H for Remote Access</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/TACACS_Plus/">T a C a C S Plus</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/User_Accounts/">User Accounts</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/Using_sudo_to_Delegate_Privileges/">Using Sudo to Delegate Privileges</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/netfilter_acls/default_cumulus_linux_acl_config/Default_Cumulus_Linux_ACL_Configuration/">Default Cumulus Linux a C L Configuration</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/netfilter_acls/default_cumulus_linux_acl_config/Filtering_Learned_MAC_Addresses/">Filtering Learned M a C Addresses</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/Cumulus-Linux/whats-new/">What&#39;s New</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/cumulus-linux-index/Cumulus_Linux_Index/">Cumulus Linux Index</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/quick-start/Quick_Start_Guide/">Quick Start Guide</a>
    </li>
    
  </ul>








</nav>

    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" />
  </label>
  <strong>R a D I U S a a A</strong>
</header>

      
<article class="markdown">

<h1 id="radius-aaa">RADIUS AAA</h1>

<p>Cumulus Networks offers add-on packages that
enable <a href="https://en.wikipedia.org/wiki/RADIUS">RADIUS</a> users to log in to
Cumulus Linux switches in a transparent way with minimal configuration.
There is no need to create accounts or directories on the switch.
Authentication is handled with PAM and includes
login, <code>ssh</code>, <code>sudo</code> and <code>su</code>.</p>

<h2 id="contents">Contents</h2>

<p><img src="images/icons/grey_arrow_down.png" alt="" />{.expand-control-image}This topic
describes &hellip;</p>

<ul>
<li><a href="#RADIUSAAA-InstalltheRADIUSPackages">Install the RADIUS Packages</a></li>
<li><a href="#RADIUSAAA-ConfiguretheRADIUSClient">Configure the RADIUS Client</a></li>
<li><a href="#RADIUSAAA-EnableLoginwithoutLocalAccounts">Enable Login without Local
Accounts</a></li>
<li><a href="#RADIUSAAA-local-fallback-authLocalFallbackAuthentication">Local Fallback
Authentication</a></li>
<li><a href="#RADIUSAAA-VerifyRADIUSClientConfiguration">Verify RADIUS Client
Configuration</a></li>
<li><a href="#RADIUSAAA-removeRemoveRADIUSClientPackages">Remove RADIUS Client
Packages</a></li>
<li><a href="#RADIUSAAA-Limitations">Limitations</a></li>
<li><a href="#RADIUSAAA-RelatedInformation">Related Information</a></li>
</ul>

<h2 id="install-the-radius-packages">Install the RADIUS Packages</h2>

<p>The RADIUS packages are not included in the base Cumulus Linux image;
there is no RADIUS metapackage.</p>

<p>To install the RADIUS packages:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo apt-get update
cumulus@switch:~$ sudo apt-get install libnss-mapuser libpam-radius-auth</code></pre></div>
<p>After installation is complete, either reboot the switch or run
the <code>sudo systemctl restart netd</code> command.</p>

<p>The <code>libpam-radius-auth</code> package supplied with the Cumulus Linux RADIUS
client is a newer version than the one in <a href="https://packages.debian.org/jessie/libpam-radius-auth">Debian
Jessie</a>. This
package has added support for IPv6, the <code>src_ip</code> option described below,
as well as a number of bug fixes and minor features. The package also
includes VRF support, provides man pages describing the PAM and RADIUS
configuration, and sets the <code>SUDO_PROMPT</code> environment variable to the
login name for RADIUS mapping support.</p>

<p>The <code>libnss_mapuser</code> package is specific to Cumulus Linux and supports
the <code>getgrent</code>, <code>getgrnam</code> and <code>getgrgid</code> library interfaces. These
interfaces add logged in RADIUS users to the group member list for
groups that contain the <code>mapped_user</code> (<code>radius_user</code>) if the RADIUS
account is unprivileged, and add privileged RADIUS users to the group
member list for groups that contain
the <code>mapped_priv_user</code> (<code>radius_priv_user</code>) during the group lookups.</p>

<p>During package installation:</p>

<ul>
<li>The PAM configuration is modified automatically
using <code>pam-auth-update (8)</code>, and the NSS configuration
file <code>/etc/nsswitch.conf</code>  is modified to add
the *mapuser* and *mapuid* plugins. If you remove or purge the
packages, these files are modified to remove the configuration for
these plugins.</li>
<li>The <code>radius_shell</code> package is added, which installs
the <code>/sbin/radius_shell</code> and <code>setcap cap_setuid</code> program used as the
login shell for RADIUS accounts. The package adjusts the <code>UID</code> when
needed, then runs the bash shell with the same arguments. When
installed, the package changes the shell of the RADIUS accounts
to <code>/sbin//radius_shell</code>, and to <code>/bin/shell </code>if the package is
removed. This package is required for privileged RADIUS users to be
enabled. It is not required for regular RADIUS client use.</li>
<li>The <code>radius_user</code> account is added to the <code>netshow</code> group and
the <code>radius_priv_user</code> account to
the <code>netedit</code> and <code>sudo</code><strong> </strong>groups. This change enables all RADUS
logins to run NCLU <code>net show</code> commands and all privileged RADIUS
users to also run <code>net add, </code><code>net del</code>, and <code>net commit</code> commands,
and to use <code>sudo</code>.</li>
</ul>

<h2 id="configure-the-radius-client">Configure the RADIUS Client</h2>

<p>To configure the RADIUS client, edit
the <code>/etc/pam_radius_auth.conf</code> file:</p>

<ol>
<li>Add the hostname or IP address of at least one RADIUS server (such
as a <a href="http://freeradius.org/">*freeradius* </a> server on Linux) and
the shared secret used to authenticate and encrypt communication
with each server. <br />
Multiple server configuration lines are verified in the order
listed. Other than memory, there is no limit to the number of RADIUS
servers you want to use. <br />
The server port number or name is optional. The system looks up the
port in the <code>/etc/services</code> file. However, you can override the
ports in the <code>/etc/pam_radius_auth.conf</code> file.</li>
<li>If the server is slow or latencies are high, change
the <code>timeout</code> setting. The setting defaults to 3 seconds.</li>
<li>If you want to use a specific interface to reach the RADIUS server,
specify the <code>src_ip</code> option. You can specify the hostname of the
interface, an IPv4, or an IPv6 address. If you specify
the <code>src_ip</code> option, you must also specify the <code>timeout</code> option.</li>
<li>Set the <code>vrf-name</code> field. This is typically set to *mgmt* if you are
using a <a href="Management_VRF">management VRF</a>.  You cannot specify more
than one VRF.</li>
</ol>

<p>The configuration file includes the  <code>mapped_priv_user</code> field that sets
the account used for privileged RADIUS users and the <code>priv-lvl</code> field
that sets the minimum value for the privilege level to be considered a
privileged login (the default value is 15).  If you edit these fields,
make sure the values match those set in
the <code>/etc/nss_mapuser.conf</code> file. </p>

<p>The following example provides a sample <code>/etc/pam_radius_auth.conf</code> file
configuration:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">mapped_priv_user   radius_priv_user
# server[:port]    shared_secret  timeout (secs)  src_ip         
192.168.0.254      secretkey
other-server       othersecret    3               192.168.1.10   
# when mgmt vrf is in use
vrf-name mgmt</code></pre></div>
<p>If this is the first time you are configuring the RADIUS client,
uncomment the <code>debug</code> line to help with troubleshooting. The debugging
messages are written to <code>/var/log/syslog</code>. When the RADIUS client is
working correctly, comment out the <code>debug</code> line.</p>

<p>As an optional step, you can set PAM configuration keywords by editing
the <code>/usr/share/pam-configs/radius</code> file. After you edit the file, you
must run the  <code>pam-auth-update --package</code> command. PAM configuration
keywords are described in the <code>pam_radius_auth (8)</code> man page. </p>

<h2 id="enable-login-without-local-accounts">Enable Login without Local Accounts</h2>

<p>Because LDAP is not commonly used with switches and adding accounts
locally is cumbersome, Cumulus Linux includes a mapping capability with
the <code>libnss-mapuser</code> package.</p>

<p>Mapping is done using two NSS (Name Service Switch) plugins, one for
account name, and one for UID lookup. These accounts are configured
automatically in <code>/etc/nsswitch.conf</code> during installation and are
removed when the package is removed. See the <code>nss_mapuser (8)</code> man page
for the full description of this plugin.</p>

<p>A username is mapped at login to a fixed account specified in the
configuration file, with the fields of the fixed account used as a
template for the user that is logging in.</p>

<p>For example, if the name being looked up is *dave* and the fixed account
in the configuration file is <em>radius_user</em>, and that entry
in <code>/etc/passwd</code> is: </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">radius_user:x:1017:1002:radius user:/home/radius_user:/bin/bash</code></pre></div>
<p>then the matching line returned by running <code>getent passwd dave</code> is:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ getent passwd dave
dave:x:1017:1002:dave mapped user:/home/dave:/bin/bash</code></pre></div>
<p>The home directory <code>/home/dave</code> is created during the login process if
it does not already exist and is populated with the standard skeleton
files by the <code>mkhomedir_helper</code> command.</p>

<p>The configuration file <code>/etc/nss_mapuser.conf</code> is used to configure the
plugins. The file includes the mapped account name, which
is <code>radius_user</code> by default. You can change the mapped account name by
editing the file. The <code>nss_mapuser (5)</code> man page describes the
configuration file. </p>

<p>A flat file mapping is done based on the session number assigned during
login, which persists across <code>su</code> and <code>sudo</code>. The mapping is removed at
logout.</p>

<h2 id="local-fallback-authentication">Local Fallback Authentication</h2>

<p>If a site wants to allow local fallback authentication for a user when
none of the RADIUS servers can be reached, you can add a privileged user
account as a local account on the switch. The local account must have
the same unique identifier as the privileged user and the shell must be
the same. </p>

<p>To configure local fallback authentication:</p>

<ol>
<li><p> Add a local privileged user account. For example, if the
<code>radius_priv_user</code> account in the <code>/etc/passwd</code> file
is <code>radius_priv_user:x:1002:1001::/home/radius_priv_user:/sbin/radius_shell</code>,
run the following command to add a local privileged user account
named johnadmin:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo useradd -u 1002 -g 1001 -o -s /sbin/radius_shell johnadmin</code></pre></div></li>

<li><p>To enable the local privileged user to run <code>sudo</code> and NCLU commands,
run the following commands:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo adduser johnadmin netedit
cumulus@switch:~$ sudo adduser johnadmin sudo
cumulus@switch:~$ sudo systemctl restart netd</code></pre></div></li>

<li><p>Edit the <code>/etc/passwd</code> file to move the local user line before to
the <code>radius_priv_user</code> line:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo vi /etc/passwd
 
...
johnadmin:x:1002:1001::/home/johnadmin:/sbin/radius_shell
radius_priv_user:x:1002:1001::/home/radius_priv_user:/sbin/radius_shell</code></pre></div></li>

<li><p>To set the local password for the local user, run the following
command:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo passwd johnadmin</code></pre></div></li>
</ol>

<h2 id="verify-radius-client-configuration">Verify RADIUS Client Configuration</h2>

<p>To verify that the RADIUS client is configured correctly, log in as a
non-privileged user and run a <code>net add interface</code> command.</p>

<p>In this example, the <code>ops</code>  user is not a priveleged RADIUS user so they
cannot add an interface. </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">ops@leaf01:~$ net add interface swp1
ERROR: User ops does not have permission to make networking changes.</code></pre></div>
<p>In this example, the <code>admin</code> user is a privileged RADIUS user (with
privilege level 15) so is able to add interface swp1.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">admin@leaf01:~$ net add interface swp1
admin@leaf01:~$ net pending
--- /etc/network/interfaces    2018-04-06 14:49:33.099331830 +0000
+++ /var/run/nclu/iface/interfaces.tmp    2018-04-06 16:01:16.057639999 +0000
@@ -3,10 +3,13 @@

 source /etc/network/interfaces.d/*.intf

 # The loopback network interface
 auto lo
 iface lo inet loopback

 # The primary network interface
 auto eth0
 iface eth0 inet dhcp
+
+auto swp1
+iface swp1
...</code></pre></div>
<h2 id="remove-radius-client-packages">Remove RADIUS Client Packages</h2>

<p>Remove the RADIUS packages with the following command:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo apt-get remove libnss-mapuser libpam-radius-auth</code></pre></div>
<p>When you remove the packages, the plugins are removed from
the <code>/etc/nsswitch.conf</code> file and from the PAM files.</p>

<p>To remove all configuration files for these packages, run:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo apt-get purge libnss-mapuser libpam-radius-auth</code></pre></div>
<p>The RADIUS fixed account is not removed from the <code>/etc/passwd</code> or
<code>/etc/group</code> file and the home directories are not removed. They remain
in case there are modifications to the account or files in the home
directories.</p>

<p>To remove the home directories of the RADIUS users, first get the list
by running:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo ls -l /home | grep radius</code></pre></div>
<p>For all users listed, except the <em>radius_user</em>, run this command to
remove the home directories:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo deluser --remove-home USERNAME</code></pre></div>
<p> where USERNAME is the account name (the home directory relative
portion). This command gives the following warning because the user is
not listed in the <code>/etc/passwd</code> file.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">userdel: cannot remove entry &#39;USERNAME&#39; from /etc/passwd
/usr/sbin/deluser: `/usr/sbin/userdel USERNAME&#39; returned error code 1. Exiting.</code></pre></div>
<p>After removing all the RADIUS users, run the command to remove the fixed
account. If the account has been changed in
the <code>/etc/nss_mapuser.conf</code> file, use that account name instead
of <em>radius_user</em>.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo deluser --remove-home radius_user
cumulus@switch:~$ sudo deluser --remove-home radius_priv_user
cumulus@switch:~$ sudo delgroup radius_users</code></pre></div>
<h2 id="limitations">Limitations</h2>

<p>If two or more RADIUS users are logged in simultaneously, a UID lookup
only returns the user that logged in first. Any processes run by either
user get attributed to both, and all files created by either user get
attributed to the first name matched. This is similar to adding two
local users to the password file with the same UID and GID, and is an
inherent limitation of using the UID for the fixed user from the
password file.</p>

<p>The current algorithm returns the first name matching the UID from the
mapping file; this might be the first or second user that logged in.</p>

<h2 id="related-information">Related Information</h2>

<ul>
<li><a href="TACACS_Plus">TACACS+ client</a></li>
<li><a href="https://github.com/CumulusNetworks/cldemo-radius">Cumulus Networks RADIUS demo on
GitHub</a></li>
<li><a href="https://github.com/CumulusNetworks/cldemo-tacacs">Cumulus Network TACACS demo on
GitHub</a></li>
</ul>
</article>

      
<div class="align-center book-git-footer justify-between">
  
  <div>
    <a href="https://github.com/cawleyflower/testDocs/commit/0f1fa77f244c4b4642688df1f5e961e88daa6e08" title='Last modified March 4, 2019 16:11 EST by Cawleyflower' target="_blank" rel="noopener">
      <img src="/svg/code-merge.svg" /> Last Modified Mar 4, 2019
    </a>
  </div>
  
  
</div>


    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#radius-aaa">RADIUS AAA</a>
<ul>
<li><a href="#contents">Contents</a></li>
<li><a href="#install-the-radius-packages">Install the RADIUS Packages</a></li>
<li><a href="#configure-the-radius-client">Configure the RADIUS Client</a></li>
<li><a href="#enable-login-without-local-accounts">Enable Login without Local Accounts</a></li>
<li><a href="#local-fallback-authentication">Local Fallback Authentication</a></li>
<li><a href="#verify-radius-client-configuration">Verify RADIUS Client Configuration</a></li>
<li><a href="#remove-radius-client-packages">Remove RADIUS Client Packages</a></li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#related-information">Related Information</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
