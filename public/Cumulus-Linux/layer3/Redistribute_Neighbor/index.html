<!DOCTYPE html><html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Redistribute Neighbor | Cumulus Networks Documentation</title>

<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">
<link rel="stylesheet" href="/normalize.min.css">

<link rel="stylesheet" href="/book.min.20b2cb98a9208e1e7497525a9f78f7f8eb0ca4b5f4551e9610f12c5b317e6be8.css">

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<h2 class="book-brand">
  <a href="http://example.org/">Cumulus Networks Documentation</a>
</h2>



    


  
  
    
  
 
  <ul>
    
    <li><a href="/Cumulus-Linux/installation-management/">
    Installation Management</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/installation-management/Adding_and_Updating_Packages/">Adding and Updating Packages</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Installing_a_New_Cumulus_Linux_Image/">Installing a New Cumulus Linux Image</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Managing_Cumulus_Linux_Disk_Images/">Managing Cumulus Linux Disk Images</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Upgrading_Cumulus_Linux/">Upgrading Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Using_Snapshots/">Using Snapshots</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Zero_Touch_Provisioning_-_ZTP/">Zero Touch Provisioning Z T P</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/layer1-switch-ports/">
    Layer1 Switch Ports</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/802.1X_Interfaces/">802.1 X Interfaces</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/Buffer_and_Queue_Management/">Buffer and Queue Management</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/DHCP_Relays/">D H C P Relays</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/DHCP_Servers/">D H C P Servers</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/Facebook_Voyager_Optical_Interfaces/">Facebook Voyager Optical Interfaces</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/Prescriptive_Topology_Manager_-_PTM/">Prescriptive Topology Manager P T M</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/interface_configuration_and_management/Interface_Configuration_and_Management/">Interface Configuration and Management</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer1-switch-ports/interface_configuration_and_management/switch_port_attributes/Switch_Port_Attributes/">Switch Port Attributes</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/layer2/">
    Layer2</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/layer2/Copy_of_Prescriptive_Topology_Manager_-_PTM/">Copy of Prescriptive Topology Manager P T M</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Copy_of_Spanning_Tree_and_Rapid_Spanning_Tree/">Copy of Spanning Tree and Rapid Spanning Tree</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Ethernet_Bridging_-_VLANs/">Ethernet Bridging v L a Ns</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/IGMP_and_MLD_Snooping/">I G M P and M L D Snooping</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/LACP_Bypass/">L a C P Bypass</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Link_Layer_Discovery_Protocol/">Link Layer Discovery Protocol</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Multi-Chassis_Link_Aggregation_-_MLAG/">Multi Chassis Link Aggregation M L a G</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Spanning_Tree_and_Rapid_Spanning_Tree/">Spanning Tree and Rapid Spanning Tree</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/Virtual_Router_Redundancy_-_VRR/">Virtual Router Redundancy v R R</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/bonding_link_aggregation/Bonding_-_Link_Aggregation/">Bonding Link Aggregation</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/ethernet_bridging_vlans/Traditional_Bridge_Mode/">Traditional Bridge Mode</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/ethernet_bridging_vlans/VLAN-aware_Bridge_Mode/">V L a N Aware Bridge Mode</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/ethernet_bridging_vlans/VLAN_Tagging/">V L a N Tagging</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/link_layer_discovery_protocol/voice_vlan/Voice_VLAN/">Voice v L a N</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer2/virtual_router_redundancy/ifplugd/ifplugd/">Ifplugd</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/layer3/">
    Layer3</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/layer3/Address_Resolution_Protocol_-_ARP/">Address Resolution Protocol a R P</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Bidirectional_Forwarding_Detection_-_BFD/">Bidirectional Forwarding Detection B F D</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Border_Gateway_Protocol_-_BGP/">Border Gateway Protocol B G P</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Configuring_FRRouting/">Configuring F R Routing</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Equal_Cost_Multipath_Load_Sharing_-_Hardware_ECMP/">Equal Cost Multipath Load Sharing Hardware E C M P</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/FRRouting_Overview/">F R Routing Overview</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/GRE_Tunneling/">G R E Tunneling</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Introduction_to_Routing_Protocols/">Introduction to Routing Protocols</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Management_VRF/">Management v R F</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Network_Topology/">Network Topology</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Open_Shortest_Path_First_-_OSPF/">Open Shortest Path First O S P F</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Open_Shortest_Path_First_v3_-_OSPFv3/">Open Shortest Path First V3 O S P Fv3</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Policy-based_Routing/">Policy Based Routing</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Protocol_Independent_Multicast_-_PIM/">Protocol Independent Multicast P I M</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Redistribute_Neighbor/" class="active">Redistribute Neighbor</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Routing/">Routing</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Segment_Routing/">Segment Routing</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/Virtual_Routing_and_Forwarding_-_VRF/">Virtual Routing and Forwarding v R F</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/configuring_frrouting/comparing_nclu_and_vtysh_commands/Comparing_NCLU_and_vtysh_Commands/">Comparing N C L U and Vtysh Commands</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/layer3/frrouting_overview/Upgrading_from_Quagga_to_FRRouting/">Upgrading From Quagga to F R Routing</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/monitoring-troubleshooting/">
    Monitoring Troubleshooting</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/ASIC_Monitoring/">A S I C Monitoring</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/FRRouting_Log_Message_Reference/">F R Routing Log Message Reference</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Monitoring_Best_Practices/">Monitoring Best Practices</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Monitoring_System_Hardware/">Monitoring System Hardware</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Monitoring_Virtual_Device_Counters/">Monitoring Virtual Device Counters</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Network_Troubleshooting/">Network Troubleshooting</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Resource_Diagnostics_Using_cl-resource-query/">Resource Diagnostics Using Cl Resource Query</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Simple_Network_Management_Protocol_SNMP_Monitoring/">Simple Network Management Protocol S N M P Monitoring</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Single_User_Mode_-_Boot_Recovery/">Single User Mode Boot Recovery</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Troubleshooting_Network_Interfaces/">Troubleshooting Network Interfaces</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/Understanding_the_cl-support_Output_File/">Understanding the Cl Support Output File</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/monitoring_system_hardware/network_switch_port_led_and_stats_led/Network_Switch_Port_LED_and_Status_LED_Guidelines/">Network Switch Port L E D and Status L E D Guidelines</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/network_troubleshooting/monitoring_system_statistics/Monitoring_System_Statistics_and_Network_Traffic_with_sFlow/">Monitoring System Statistics and Network Traffic With S Flow</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/network_troubleshooting/using_nclu_to_troubleshoot/Using_NCLU_to_Troubleshoot_Your_Network_Configuration/">Using N C L U to Troubleshoot Your Network Configuration</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/simple_network_management/using_nutanix_prisim_as_monitoring_tool/Using_Nutanix_Prism_as_a_Monitoring_Tool/">Using Nutanix Prism as a Monitoring Tool</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/switchd_Log_Message_Reference/">Switchd Log Message Reference</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/troubleshooting_network_interfaces/monitoring_interfaces_and_transcievers_using_ethtool/Monitoring_Interfaces_and_Transceivers_Using_ethtool/">Monitoring Interfaces and Transceivers Using Ethtool</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/understanding_cl-support_output_file/troubleshooting_log_files/Troubleshooting_Log_Files/">Troubleshooting Log Files</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/monitoring-troubleshooting/understanding_cl-support_output_file/troubleshooting_the_etc_directory/Troubleshooting_the_etc_Directory/">Troubleshooting the Etc Directory</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/network-solutions/">
    Network Solutions</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/network-solutions/Anycast_Design_Guide/">Anycast Design Guide</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/Cumulus_Hyperconverged_Solution_with_Nutanix/">Cumulus Hyperconverged Solution With Nutanix</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/Cumulus_Networks_Services_Demos/">Cumulus Networks Services Demos</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/Data_Center_Host_to_ToR_Architecture/">Data Center Host to to R Architecture</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/Docker_on_Cumulus_Linux/">Docker on Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/OpenStack_Neutron_ML2_and_Cumulus_Linux/">Open Stack Neutron M L2 and Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-solutions/RDMA_over_Converged_Ethernet_-_RoCE/">R D M a Over Converged Ethernet Ro C E</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/network-visualization/">
    Network Visualization</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Eng_Update_of_VXLAN_Hyperloop/">Eng Update of v X L a N Hyperloop</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Ethernet_Virtual_Private_Network_-_EVPN/">Ethernet Virtual Private Network E v P N</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Hybrid_Cloud_Connectivity_with_QinQ_and_VXLANs/">Hybrid Cloud Connectivity With Qin Q and v X L a Ns</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/LNV_Full_Example/">L N v Full Example</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Lightweight_Network_Virtualization_Overview/">Lightweight Network Virtualization Overview</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Static_VXLAN_Configurations/">Static v X L a N Configurations</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/VXLAN_Routing/">V X L a N Routing</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/VXLAN_Scale/">V X L a N Scale</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/VXLAN_Tunnel_DSCP_Operations__DRAFT/">V X L a N Tunnel D S C P Operations — D R a F T</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/Virtualization_Integrations/">Virtualization Integrations</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/static_vxlan_configurations/static_mac_bindings/Static_MAC_Bindings_with_VXLAN/">Static M a C Bindings With v X L a N</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/static_vxlan_configurations/static_vxlan_tunnels/Static_VXLAN_Tunnels/">Static v X L a N Tunnels</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/virtualization_integrations/integrating_hardware_vteps_vmware_nsx-mh/Integrating_Hardware_VTEPs_with_VMware_NSX-MH/">Integrating Hardware v T E Ps With v Mware N S X M H</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/virtualization_integrations/integrating_vteps_midonet_openstack/Integrating_Hardware_VTEPs_with_Midokura_MidoNet_and_OpenStack/">Integrating Hardware v T E Ps With Midokura Mido Net and Open Stack</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/virtualization_integrations/integrating_vteps_vmware_nsx-v/Integrating_Hardware_VTEPs_with_VMware_NSX-V/">Integrating Hardware v T E Ps With v Mware N S X V</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/network-visualization/virtualization_integrations/ovsdb_server_high_availability/OVSDB_Server_High_Availability/">O v S D B Server High Availability</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/Cumulus-Linux/system-config/">
    System Config</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/system-config/Authentication_Authorization_and_Accounting/">Authentication Authorization and Accounting</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Configuring_a_Global_Proxy/">Configuring a Global Proxy</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Configuring_switchd/">Configuring Switchd</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Copy_of_Netfilter_-_ACLs/">Copy of Netfilter a C Ls</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/HTTP_API/">H T T P a P I</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Netfilter_-_ACLs/">Netfilter a C Ls</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Network_Command_Line_Utility_-_NCLU/">Network Command Line Utility N C L U</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Power_over_Ethernet_-_PoE/">Power Over Ethernet Po E</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Services_and_Daemons_in_Cumulus_Linux/">Services and Daemons in Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Setting_Date_and_Time/">Setting Date and Time</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/LDAP_Authentication_and_Authorization/">L D a P Authentication and Authorization</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/RADIUS_AAA/">R a D I U S a a A</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/SSH_for_Remote_Access/">S S H for Remote Access</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/TACACS_Plus/">T a C a C S Plus</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/User_Accounts/">User Accounts</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/authentication_authorization_accounting/Using_sudo_to_Delegate_Privileges/">Using Sudo to Delegate Privileges</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/netfilter_acls/default_cumulus_linux_acl_config/Default_Cumulus_Linux_ACL_Configuration/">Default Cumulus Linux a C L Configuration</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/netfilter_acls/default_cumulus_linux_acl_config/Filtering_Learned_MAC_Addresses/">Filtering Learned M a C Addresses</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/Cumulus-Linux/whats-new/">What&#39;s New</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/cumulus-linux-index/Cumulus_Linux_Index/">Cumulus Linux Index</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/quick-start/Quick_Start_Guide/">Quick Start Guide</a>
    </li>
    
  </ul>
 
  <ul>
    
    <li><a href="/NetQ/Cumulus_NetQ_UI_User_Guide/">
    Cumulus Net Q U I User Guide</a> 
  <ul>
    
    <li><a href="/NetQ/Cumulus_NetQ_UI_User_Guide/monitor_the_network/">
    Monitor the Network</a> 
  <ul>
    

    
    <li>
      <a href="/NetQ/Cumulus_NetQ_UI_User_Guide/monitor_the_network/Monitor_Alarm_Events/">Monitor Alarm Events</a>
    </li>
    
    <li>
      <a href="/NetQ/Cumulus_NetQ_UI_User_Guide/monitor_the_network/Monitor_Informational_Events/">Monitor Informational Events</a>
    </li>
    
    <li>
      <a href="/NetQ/Cumulus_NetQ_UI_User_Guide/monitor_the_network/Monitor_Network_Health/">Monitor Network Health</a>
    </li>
    
    <li>
      <a href="/NetQ/Cumulus_NetQ_UI_User_Guide/monitor_the_network/Monitor_Network_Inventory/">Monitor Network Inventory</a>
    </li>
    
    <li>
      <a href="/NetQ/Cumulus_NetQ_UI_User_Guide/monitor_the_network/Monitor_Network_Protocols_and_Services/">Monitor Network Protocols and Services</a>
    </li>
    
    <li>
      <a href="/NetQ/Cumulus_NetQ_UI_User_Guide/monitor_the_network/NetQ_User_Interface_Overview/">Net Q User Interface Overview</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/NetQ/Cumulus_NetQ_UI_User_Guide/Monitor_Switches/">Monitor Switches</a>
    </li>
    
    <li>
      <a href="/NetQ/Cumulus_NetQ_UI_User_Guide/NetQ_User_Interface_Overview/">Net Q User Interface Overview</a>
    </li>
    
    <li>
      <a href="/NetQ/Cumulus_NetQ_UI_User_Guide/UI_Preface/">U I Preface</a>
    </li>
    
    <li>
      <a href="/NetQ/Cumulus_NetQ_UI_User_Guide/Validate_Network_Protocol_and_Service_Operations/">Validate Network Protocol and Service Operations</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/NetQ/cli_user_guide/">
    Cli User Guide</a> 
  <ul>
    

    
    <li>
      <a href="/NetQ/cli_user_guide/CLI_Preface/CLI_Preface/">C L I Preface</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/automate_common_tasks/Automate_Common_and_Repetitive_Tasks/">Automate Common and Repetitive Tasks</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/command_line_overview/NetQ_Command_Line_Overview/">Net Q Command Line Overview</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_containter_environments/Monitor_Container_Environments/">Monitor Container Environments</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_data_link_layer/Monitor_Data_Link_Layer_Devices_and_Protocols/">Monitor Data Link Layer Devices and Protocols</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_linux_hosts/Monitor_Linux_Hosts/">Monitor Linux Hosts</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_network_health/Monitor_Overall_Network_Health/">Monitor Overall Network Health</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_network_layer/Monitor_Network_Protocols_and_Services/">Monitor Network Protocols and Services</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_physical_layer/Monitor_Physical_Layer_Components/">Monitor Physical Layer Components</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_switch_hardware/Monitor_Switch_Hardware_and_Software/">Monitor Switch Hardware and Software</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_virtual_overlays/Monitor_Virtual_Network_Overlays/">Monitor Virtual Network Overlays</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/Resolve_Issues/">Resolve Issues</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/Resolve_MLAG_Issues/">Resolve M L a G Issues</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/investiage_netq_issues/Investigate_NetQ_Issues/">Investigate Net Q Issues</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/methods_for_diagnosing_issues/Methods_for_Diagnosing_Network_Issues/">Methods for Diagnosing Network Issues</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/NetQ/deployment_guide/">
    Deployment Guide</a> 
  <ul>
    

    
    <li>
      <a href="/NetQ/deployment_guide/config_optional_netq/Configuring_Optional_NetQ_Capabilities/">Configuring Optional Net Q Capabilities</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/deployment_preface/Deployment_Preface/">Deployment Preface</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/install_netq/Install_NetQ/">Install Net Q</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/maintain_netq/Maintain_NetQ/">Maintain Net Q</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/netq_primer/Cumulus_NetQ_Primer/">Cumulus Net Q Primer</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/NetQ/Release_Notes/Cumulus_NetQ_2.0_Release_Notes/">Cumulus Net Q 2.0 Release Notes</a>
    </li>
    
    <li>
      <a href="/NetQ/getting_started/Getting_Started_with_the_Cumulus_NetQ_Appliance/">Getting Started With the Cumulus Net Q Appliance</a>
    </li>
    
    <li>
      <a href="/NetQ/software_installation_guide/Cumulus_NetQ_Appliance_Software_Installation_Guide/">Cumulus Net Q Appliance Software Installation Guide</a>
    </li>
    
  </ul>








</nav>

    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" />
  </label>
  <strong>Redistribute Neighbor</strong>
</header>

      
<article class="markdown">

<h1 id="redistribute-neighbor">Redistribute Neighbor</h1>

<p><em>Redistribute neighbor</em> provides a mechanism for IP subnets to span
racks without forcing the end hosts to run a routing protocol.</p>

<p>The fundamental premise behind redistribute neighbor is to announce
individual host /32 routes in the routed fabric. Other hosts on the
fabric can then use this new path to access the hosts in the fabric. If
multiple equal-cost paths (ECMP) are available, traffic can load balance
across the available paths natively.</p>

<p>The challenge is to accurately compile and update this list of reachable
hosts or neighbors. Luckily, existing commonly-deployed protocols are
available to solve this problem. Hosts use
<a href="http://en.wikipedia.org/wiki/Address_Resolution_Protocol">ARP</a> to
resolve MAC addresses when sending to an IPv4 address. A host then
builds an ARP cache table of known MAC addresses: IPv4 tuples as they
receive or respond to ARP requests.</p>

<p>In the case of a leaf switch, where the default gateway is deployed for
hosts within the rack, the ARP cache table contains a list of all hosts
that have ARP&rsquo;d for their default gateway. In many scenarios, this table
contains all the layer 3 information that&rsquo;s needed. This is where
redistribute neighbor comes in, as it is a mechanism of formatting and
syncing this table into the routing protocol.</p>

<h2 id="contents">Contents</h2>

<p><img src="images/icons/grey_arrow_down.png" alt="" />{.expand-control-image}This topic
describes &hellip;</p>

<ul>
<li><a href="#RedistributeNeighbor-Availability">Availability</a></li>
<li><a href="#RedistributeNeighbor-TargetUseCasesandBestPractices">Target Use Cases and Best
Practices</a></li>
<li><a href="#RedistributeNeighbor-HowItWorks">How It Works</a></li>
<li><a href="#RedistributeNeighbor-ExampleConfiguration">Example Configuration</a>

<ul>
<li><a href="#RedistributeNeighbor-ConfiguretheLeaf(s)">Configure the
Leaf(s)</a></li>
<li><a href="#RedistributeNeighbor-ConfiguretheHost(s)">Configure the
Host(s)</a></li>
</ul></li>
<li><a href="#RedistributeNeighbor-KnownLimitations">Known Limitations</a>

<ul>
<li><a href="#RedistributeNeighbor-TCAMRouteScale">TCAM Route Scale</a></li>
<li><a href="#RedistributeNeighbor-PossibleUnevenTrafficDistribution">Possible Uneven Traffic
Distribution</a></li>
<li><a href="#RedistributeNeighbor-SilentHostsNeverReceiveTraffic">Silent Hosts Never Receive
Traffic</a></li>
<li><a href="#RedistributeNeighbor-SupportforIPv4Only">Support for IPv4
Only</a></li>
<li><a href="#RedistributeNeighbor-VRFsArenotSupported">VRFs Are not
Supported</a></li>
<li><a href="#RedistributeNeighbor-Only1024InterfacesSupported">Only 1024 Interfaces
Supported</a></li>
</ul></li>
<li><a href="#RedistributeNeighbor-Troubleshooting">Troubleshooting</a>

<ul>
<li><a href="#RedistributeNeighbor-HowdoIdetermineifrdnbrd(theredistributeneighbordaemon)isrunning?">How do I determine if rdnbrd (the redistribute neighbor daemon)
is
running?</a></li>
<li><a href="#RedistributeNeighbor-HowdoIchangerdnbrd'sdefaultconfiguration?">How do I change rdnbrd&rsquo;s default
configuration?</a></li>
<li><a href="#RedistributeNeighbor-Whatistable10?Whywastable10chosen?">What is table 10? Why was table 10
chosen?</a></li>
<li><a href="#RedistributeNeighbor-HowdoIdeterminethatthe/32redistributeneighborroutesarebeingadvertisedtomyneighbor?">How do I determine that the /32 redistribute neighbor routes
are being advertised to my
neighbor?</a></li>
<li><a href="#RedistributeNeighbor-HowdoIverifythatthekernelroutingtableisbeingcorrectlypopulated?">How do I verify that the kernel routing table is being
correctly
populated?</a></li>
</ul></li>
</ul>

<h2 id="availability">Availability</h2>

<p>Redistribute neighbor is distributed as <code>python-rdnbrd</code>.</p>

<h2 id="target-use-cases-and-best-practices">Target Use Cases and Best Practices</h2>

<p>Redistribute neighbor was created with these use cases in mind:</p>

<ul>
<li>Virtualized clusters</li>
<li>Hosts with service IP addresses that migrate between racks</li>
<li>Hosts that are dual connected to two leaf nodes without using
proprietary protocols such as
<a href="Multi-Chassis_Link_Aggregation_-_MLAG">MLAG</a></li>
<li>Anycast services needing dynamic advertisement from multiple hosts</li>
</ul>

<p>Cumulus Networks recommends following these guidelines with redistribute
neighbor:</p>

<ul>
<li>Use a single logical connection from each host to each leaf.</li>
<li>A host can connect to one or more leafs. Each leaf advertises the
/32 it sees in its neighbor table.</li>
<li>A host-bound bridge/VLAN should be local to each switch only.</li>

<li><p>Leaf switches with redistribute neighbor enabled should be directly
connected to the hosts.</p></li>

<li><p>IP addressing must be non-overlapping, as the host IPs are directly
advertised into the routed fabric.</p></li>

<li><p>Run redistribute neighbor on Linux-based hosts primarily; other host
operating systems may work, but Cumulus Networks has not actively
tested any at this stage.</p></li>
</ul>

<h2 id="how-it-works">How It Works</h2>

<p>Redistribute neighbor works as follows:</p>

<ol>
<li>The leaf/ToR switches learn about connected hosts when the host
sends an ARP request or ARP reply.</li>
<li>An entry for the host is added to the kernel neighbor table of each
leaf switch.</li>

<li><p>The redistribute neighbor daemon, <code>rdnbrd</code>, monitors the kernel
neighbor table and creates a /32 route for each neighbor entry. This
/32 route is created in kernel table 10.</p></li>

<li><p>FRRouting is configured to import routes from kernel table 10.</p></li>

<li><p>A route-map is used to control which routes from table 10 are
imported.</p></li>

<li><p>In FRRouting these routes are imported as <em>table</em> routes.</p></li>

<li><p>BGP, OSPF and so forth are then configured to redistribute the table
10 routes.</p></li>
</ol>

<h2 id="example-configuration">Example Configuration</h2>

<p>The following example configuration is based on the <a href="https://github.com/cumulusnetworks/cldemo-vagrant">reference
topology</a> created by
Cumulus Networks. Other configurations are possible, based on the use
cases outlined above. Here is a diagram of the topology:</p>

<p><img src="https://raw.githubusercontent.com/CumulusNetworks/cldemo-vagrant/master/cldemo_topology.png" alt="" />{height=&ldquo;400&rdquo;}</p>

<h3 id="configure-the-leaf-s">Configure the Leaf(s)</h3>

<p>The following steps demonstrate how to configure leaf01, but the same
steps can be applied to any of the leafs.</p>

<ol>
<li><p>Configure the host facing ports, using the same IP address on both
host-facing interfaces as well as a /32 prefix. In this case, swp1
and swp2 are configured as they are the ports facing server01 and
server02:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ net add loopback lo ip address 10.0.0.11/32
cumulus@leaf01:~$ net add interface swp1-2 ip address 10.0.0.11/32
cumulus@leaf01:~$ net pending 
cumulus@leaf01:~$ net commit</code></pre></div>
<p>The commands produce the following configuration in the
<code>/etc/network/interfaces</code> file:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">auto lo
iface lo inet loopback
  address 10.0.0.11/32
          
auto swp1
iface swp1
  address 10.0.0.11/32

auto swp2
iface swp2
  address 10.0.0.11/32</code></pre></div></li>

<li><p>Enable the daemon so it starts at bootup:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ sudo systemctl enable rdnbrd.service</code></pre></div></li>

<li><p>Start the daemon:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ sudo systemctl restart rdnbrd.service</code></pre></div></li>

<li><p>Configure routing:</p>

<ol>
<li><p>Define a route-map that matches on the host-facing interfaces:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ net add routing route-map REDIST_NEIGHBOR permit 10 match interface swp1
cumulus@leaf01:~$ net add routing route-map REDIST_NEIGHBOR permit 20 match interface swp2</code></pre></div></li>

<li><p>Import routing table 10 and apply the route-map:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ net add routing import-table 10 route-map REDIST_NEIGHBOR</code></pre></div></li>

<li><p>Redistribute the imported <em>table</em> routes in into the appropriate
routing protocol.<br />
<strong>BGP:</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ net add bgp autonomous-system 65001
cumulus@leaf01:~$ net add bgp ipv4 unicast redistribute table 10</code></pre></div>
<p><strong>OSPF:</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ net add ospf redistribute table 10</code></pre></div></li>

<li><p>Save the configuration by committing your changes.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ net pending
cumulus@leaf01:~$ net commit</code></pre></div></li>
</ol></li>
</ol>

<p><img src="images/icons/grey_arrow_down.png" alt="" />{.expand-control-image}Click here
to expand the contents of /etc/frr/frr.conf</p>

<p>This configuration uses OSPF as the routing protocol.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01$ cat /etc/frr/frr.conf
frr version 3.1+cl3u1
frr defaults datacenter
ip import-table 10 route-map REDIST_NEIGHBOR
username cumulus nopassword
!
service integrated-vtysh-config
!
log syslog informational
!
router bgp 65001
 !
 address-family ipv4 unicast
  redistribute table 10
 exit-address-family
!
route-map REDIST_NEIGHBOR permit 10 
 match interface swp1
!
route-map REDIST_NEIGHBOR permit 20 
 match interface swp2
!
router ospf
  redistribute table 10
!
line vty
!</code></pre></div>
<h3 id="configure-the-host-s">Configure the Host(s)</h3>

<p>There are a few possible host configurations that range in complexity.
This document only covers the basic use case: dual-connected Linux hosts
with static IP addresses assigned.</p>

<p>Additional host configurations will be covered in future separate
knowledge base articles.</p>

<h4 id="configure-a-dual-connected-host">Configure a Dual-connected Host</h4>

<p>Configure a host with the same /32 IP address on its loopback (lo) and
uplinks (in this example, eth1 and eth2). This is done so both
leaf switches advertise the same /32 regardless of the interface.
Cumulus Linux relies on
<a href="Equal_Cost_Multipath_Load_Sharing_-_Hardware_ECMP">ECMP</a> to load
balance across the interfaces southbound, and an equal cost static route
(see the configuration below) for load balancing northbound.</p>

<p>The loopback hosts the primary service IP address(es) and to which you
can bind services.</p>

<p>Configure the loopback and physical interfaces. Referring back to the
topology diagram, server01 is connected to leaf01 via eth1 and to leaf02
via eth2. You should note:</p>

<ul>
<li>The loopback IP is assigned to lo, eth1 and eth2.</li>
<li>The post-up ARPing is used to force the host to ARP as soon as its
interface comes up. This allows the leaf to learn about the host as
soon as possible.</li>

<li><p>The post-up <code>ip route replace</code> is used to install a default route
via one or both leaf nodes if both swp1 and swp2 are up.</p>

<p><img src="images/icons/grey_arrow_down.png" alt="" />{.expand-control-image}Click
here to expand&hellip;</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">user@server01:$ cat /etc/network/interfaces
# The loopback network interface
auto lo
iface lo inet loopback

auto lo:1
iface lo:1
  address 10.1.0.101/32

auto eth1
iface eth1
  address 10.1.0.101/32
  post-up for i in {1..3}; do arping -q -c 1 -w 0 -i eth1 10.0.0.11; sleep 1; done
  post-up ip route add 0.0.0.0/0 nexthop via 10.0.0.11 dev eth1 onlink nexthop via 10.0.0.12 dev eth2 onlink || true
          
auto eth2
iface eth2
  address 10.1.0.101/32
  post-up for i in {1..3}; do arping -q -c 1 -w 0 -i eth2 10.0.0.12; sleep 1; done
  post-up ip route add 0.0.0.0/0 nexthop via 10.0.0.11 dev eth1 onlink nexthop via 10.0.0.12 dev eth2 onlink || true</code></pre></div></li>
</ul>

<h4 id="install-ifplugd">Install ifplugd</h4>

<p>Additionally, install and use <a href="ifplugd">ifplugd</a>. <code>ifplugd</code> modifies the
behavior of the Linux routing table when an interface undergoes a link
transition (carrier up/down). The Linux kernel by default leaves routes
up even when the physical interface is unavailable (NO-CARRIER).</p>

<p>After you install <code>ifplugd</code>, edit <code>/etc/default/ifplugd</code> as follows,
where <em>eth1</em> and <em>eth2</em> are the interface names that your host uses to
connect to the leaves.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">user@server01:$ cat /etc/default/ifplugd
INTERFACES=&#34;eth1 eth2&#34;
HOTPLUG_INTERFACES=&#34;&#34;
ARGS=&#34;-q -f -u10 -d10 -w -I&#34;
SUSPEND_ACTION=&#34;stop&#34;</code></pre></div>
<p>For full instructions on installing <code>ifplugd</code> on Ubuntu, <a href="https://support.cumulusnetworks.com/hc/en-us/articles/204473717">follow this
guide</a>.</p>

<h2 id="known-limitations">Known Limitations</h2>

<h3 id="tcam-route-scale">TCAM Route Scale</h3>

<p>This feature adds each ARP entry as a /32 host route into the routing
table of all switches within a summarization domain. Take care to keep
the number of hosts minus fabric routes under the TCAM size of the
switch. Review the <a href="http://cumulusnetworks.com/hcl/">Cumulus Networks
datasheets</a> for up to date scalability
limits of your chosen hardware platforms. If in doubt, contact Cumulus
Networks support or your Cumulus Networks CSE; they will be happy to
help.</p>

<h3 id="possible-uneven-traffic-distribution">Possible Uneven Traffic Distribution</h3>

<p>Linux uses <em>source</em> L3 addresses only to do load balancing on most older
distributions.</p>

<h3 id="silent-hosts-never-receive-traffic">Silent Hosts Never Receive Traffic</h3>

<p>Freshly provisioned hosts that have never sent traffic may not ARP for
their default gateways. The post-up ARPing in <code>/etc/network/interfaces</code>
on the host should take care of this. If the host does not ARP, then
<code>rdnbrd</code> on the leaf cannot learn about the host.</p>

<h3 id="support-for-ipv4-only">Support for IPv4 Only</h3>

<p>This release of redistribute neighbor supports IPv4 only.</p>

<h3 id="vrfs-are-not-supported">VRFs Are not Supported</h3>

<p>This release of redistribute neighbor does not support
<a href="Virtual_Routing_and_Forwarding_-_VRF">VRFs</a>.</p>

<h3 id="only-1024-interfaces-supported">Only 1024 Interfaces Supported</h3>

<p>Redistribute neighbor does not work with more than 1024 interfaces.
Doing so can cause the <code>rdnbrd</code> service to crash.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="how-do-i-determine-if-rdnbrd-the-redistribute-neighbor-daemon-is-running"><strong>How do I determine if <code>rdnbrd</code> (the redistribute neighbor daemon) is running?</strong></h3>

<p>Use <code>systemd</code> to check:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01$ systemctl status rdnbrd.service 
* rdnbrd.service - Cumulus Linux Redistribute Neighbor Service
 Loaded: loaded (/lib/systemd/system/rdnbrd.service; enabled)
 Active: active (running) since Wed 2016-05-04 18:29:03 UTC; 1h 13min ago
 Main PID: 1501 (python)
 CGroup: /system.slice/rdnbrd.service
 `-1501 /usr/bin/python /usr/sbin/rdnbrd -d</code></pre></div>
<h3 id="how-do-i-change-rdnbrd-s-default-configuration"><strong>How do I change rdnbrd&rsquo;s default configuration?</strong></h3>

<p>Editing the <code>/etc/rdnbrd.conf</code> file, then
run <code>systemctl restart rdnbrd.service</code>:</p>

<p><img src="images/icons/grey_arrow_down.png" alt="" />{.expand-control-image}Click here
to expand&hellip;</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01$ cat /etc/rdnbrd.conf 
# syslog logging level CRITICAL, ERROR, WARNING, INFO, or DEBUG
loglevel = INFO
 
# TX an ARP request to known hosts every keepalive seconds
keepalive = 1
 
# If a host does not send an ARP reply for holdtime consider the host down
holdtime = 3
 
# Install /32 routes for each host into this table
route_table = 10
 
# Uncomment to enable ARP debugs on specific interfaces.
# Note that ARP debugs can be very chatty.
# debug_arp = swp1 swp2 swp3 br1
# If we already know the MAC for a host, unicast the ARP request. This is
# unusual for ARP (why ARP if you know the destination MAC) but we will be
# using ARP as a keepalive mechanism and do not want to broadcast so many ARPs
# if we do not have to. If a host cannot handle a unicasted ARP request, set
# the following option to False.
#
# Unicasting ARP requests is common practice (in some scenarios) for other
# networking operating systems so it is unlikely that you will need to set
# this to False.
unicast_arp_requests = True
cumulus@leaf01:~$ sudo systemctl restart rdnbrd.service</code></pre></div>
<h3 id="what-is-table-10-why-was-table-10-chosen"><strong>What is table 10? Why was table 10 chosen?</strong></h3>

<p>The Linux kernel supports multiple routing tables and can utilize 0
through 255 as table IDs. However, tables 0, 253, 254 and 255 are
reserved, and 1 is usually the first one utilized. Therefore, <code>rdnbrd</code>
only allows you to specify 2-252. The number 10 was chosen for no
particular reason. Feel free to set it to any value between 2-252. You
can see all the tables specified here:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch$ cat /etc/iproute2/rt_tables
#
# reserved values
#
255 local
254 main
253 default
0 unspec
#
# local
#
#1  inr.ruhep</code></pre></div>
<p>Read more information on <a href="http://linux-ip.net/html/routing-tables.html">Linux route
tables</a>, or you can read
the <a href="http://manpages.ubuntu.com/manpages/quantal/man8/ip-route.8.html">Ubuntu man pages for ip
route</a>.</p>

<h3 id="how-do-i-determine-that-the-32-redistribute-neighbor-routes-are-being-advertised-to-my-neighbor"><strong>How do I determine that the /32 redistribute neighbor routes are being advertised to my neighbor?</strong></h3>

<p>For BGP, check the advertised routes to the neighbor.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ sudo vtysh
Hello, this is Quagga (version 0.99.23.1+cl3u2).
Copyright 1996-2005 Kunihiro Ishiguro, et al.
leaf01# show ip bgp neighbor swp51 advertised-routes 
BGP table version is 5, local router ID is 10.0.0.11
Status codes: s suppressed, d damped, h history, * valid, &gt; best, = multipath,
              i internal, r RIB-failure, S Stale, R Removed
Origin codes: i - IGP, e - EGP, ? - incomplete

   Network          Next Hop            Metric LocPrf Weight Path
*&gt; 10.0.0.11/32     0.0.0.0                  0         32768 i
*&gt; 10.0.0.12/32     ::                                     0 65020 65012 i
*&gt; 10.0.0.21/32     ::                                     0 65020 i
*&gt; 10.0.0.22/32     ::                                     0 65020 i

Total number of prefixes 4</code></pre></div>
<h3 id="how-do-i-verify-that-the-kernel-routing-table-is-being-correctly-populated"><strong>How do I verify that the kernel routing table is being correctly populated?</strong></h3>

<p>Use the following workflow to verify that the kernel routing table is
being populated correctly and that routes are being correctly
imported/advertised:</p>

<ol>
<li><p>Verify that ARP neighbor entries are being populated into the Kernel
routing table 10.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ ip route show table 10
10.0.1.101 dev swp1 scope link</code></pre></div>
<p>If these routes are not being generated, verify the following:</p>

<ul>
<li><p>That the <code>rdnbrd</code> daemon is running</p></li>

<li><p>Check <code>/etc/rdnbrd.conf</code> to verify the correct table number is
used</p></li>
</ul></li>

<li><p>Verify that routes are being imported into FRRouting from the kernel
routing table 10.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo vtysh
Hello, this is Quagga (version 0.99.23.1+cl3u2).
Copyright 1996-2005 Kunihiro Ishiguro, et al.

switch# show ip route table
Codes: K - kernel route, C - connected, S - static, R - RIP,
       O - OSPF, I - IS-IS, B - BGP, A - Babel, T - Table,
       &gt; - selected route, * - FIB route
 T[10]&gt;* 10.0.1.101/32 [19/0] is directly connected, swp1, 01:25:29</code></pre></div>
<p>Both the &gt; and * should be present so that table 10 routes are
installed as preferred into the routing table. If the routes are not
being installed, verify the following:</p>

<ul>
<li>The imported distance of the locally imported kernel routes
using the <code>ip import 10 distance X</code> command, where X is <strong>not</strong>
less than the adminstrative distance of the routing protocol. If
the distance is too low, routes learned from the protocol may
overwrite the locally imported routes.</li>
<li>The routes are in the kernel routing table.</li>
</ul></li>

<li><p>Confirm that routes are in the BGP/OSPF database and are being
advertised.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">switch# show ip bgp</code></pre></div></li>
</ol>

<h2 id="attachments">Attachments:</h2>

<p><img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;}
<a href="attachments/8362959/8362960.png">RedistArp_Host_AA_RC3.png</a>
(image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8362959/8362958.png">image2016-5-5
11:13:13.png</a> (image/png)</p>
</article>

      
<div class="align-center book-git-footer justify-between">
  
  <div>
    <a href="https://github.com/cawleyflower/testDocs/commit/0f1fa77f244c4b4642688df1f5e961e88daa6e08" title='Last modified March 4, 2019 16:11 EST by Cawleyflower' target="_blank" rel="noopener">
      <img src="/svg/code-merge.svg" /> Last Modified Mar 4, 2019
    </a>
  </div>
  
  
</div>


    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#redistribute-neighbor">Redistribute Neighbor</a>
<ul>
<li><a href="#contents">Contents</a></li>
<li><a href="#availability">Availability</a></li>
<li><a href="#target-use-cases-and-best-practices">Target Use Cases and Best Practices</a></li>
<li><a href="#how-it-works">How It Works</a></li>
<li><a href="#example-configuration">Example Configuration</a>
<ul>
<li><a href="#configure-the-leaf-s">Configure the Leaf(s)</a></li>
<li><a href="#configure-the-host-s">Configure the Host(s)</a>
<ul>
<li><a href="#configure-a-dual-connected-host">Configure a Dual-connected Host</a></li>
<li><a href="#install-ifplugd">Install ifplugd</a></li>
</ul></li>
</ul></li>
<li><a href="#known-limitations">Known Limitations</a>
<ul>
<li><a href="#tcam-route-scale">TCAM Route Scale</a></li>
<li><a href="#possible-uneven-traffic-distribution">Possible Uneven Traffic Distribution</a></li>
<li><a href="#silent-hosts-never-receive-traffic">Silent Hosts Never Receive Traffic</a></li>
<li><a href="#support-for-ipv4-only">Support for IPv4 Only</a></li>
<li><a href="#vrfs-are-not-supported">VRFs Are not Supported</a></li>
<li><a href="#only-1024-interfaces-supported">Only 1024 Interfaces Supported</a></li>
</ul></li>
<li><a href="#troubleshooting">Troubleshooting</a>
<ul>
<li><a href="#how-do-i-determine-if-rdnbrd-the-redistribute-neighbor-daemon-is-running"><strong>How do I determine if <code>rdnbrd</code> (the redistribute neighbor daemon) is running?</strong></a></li>
<li><a href="#how-do-i-change-rdnbrd-s-default-configuration"><strong>How do I change rdnbrd&rsquo;s default configuration?</strong></a></li>
<li><a href="#what-is-table-10-why-was-table-10-chosen"><strong>What is table 10? Why was table 10 chosen?</strong></a></li>
<li><a href="#how-do-i-determine-that-the-32-redistribute-neighbor-routes-are-being-advertised-to-my-neighbor"><strong>How do I determine that the /32 redistribute neighbor routes are being advertised to my neighbor?</strong></a></li>
<li><a href="#how-do-i-verify-that-the-kernel-routing-table-is-being-correctly-populated"><strong>How do I verify that the kernel routing table is being correctly populated?</strong></a></li>
</ul></li>
<li><a href="#attachments">Attachments:</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
