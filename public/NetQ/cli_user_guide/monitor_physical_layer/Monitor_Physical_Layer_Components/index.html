<!DOCTYPE html><html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monitor Physical Layer Components | Cumulus Networks Documentation</title>

<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">
<link rel="stylesheet" href="/normalize.min.css">

<link rel="stylesheet" href="/book.min.50a619ce4c0e99594908d162684f42218608aa6fde2bd83cca5025d59ba535e3.css">

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<h2 class="book-brand">
  <a href="http://example.org/">Cumulus Networks Documentation</a>
</h2>



    


  
  
    
  
 
  <ul>
    
    <li><a href="/Cumulus-Linux/installation-management/">
    Installation Management</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/installation-management/Adding_and_Updating_Packages/">Adding and Updating Packages</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Installing_a_New_Cumulus_Linux_Image/">Installing a New Cumulus Linux Image</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Managing_Cumulus_Linux_Disk_Images/">Managing Cumulus Linux Disk Images</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Upgrading_Cumulus_Linux/">Upgrading Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Using_Snapshots/">Using Snapshots</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Zero_Touch_Provisioning_-_ZTP/">Zero Touch Provisioning Z T P</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/Cumulus-Linux/whats-new/">What&#39;s New</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/Quick_Start_Guide/">Quick Start Guide</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Network_Command_Line_Utility_-_NCLU/">Network Command Line Utility N C L U</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Setting_Date_and_Time/">Setting Date and Time</a>
    </li>
    
  </ul>
 
  <ul>
    
    <li><a href="/NetQ/UI_User_Guide/">
    U I User Guide</a> 
  <ul>
    
    <li><a href="/NetQ/UI_User_Guide/monitor_the_network/">
    Monitor the Network</a> 
  <ul>
    

    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_the_network/monitor_alarm_events/Monitor_Alarm_Events/">Monitor Alarm Events</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_the_network/monitor_informational_events/Monitor_Informational_Events/">Monitor Informational Events</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_the_network/monitor_network_health/Monitor_Network_Health/">Monitor Network Health</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_the_network/monitor_network_inventory/Monitor_Network_Inventory/">Monitor Network Inventory</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_the_network/monitor_network_protocols/Monitor_Network_Layer_Protocols/">Monitor Network Layer Protocols</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_switches/Monitor_Switches/">Monitor Switches</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/netq_ui_overview/NetQ_User_Interface_Overview/">Net Q User Interface Overview</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/ui_preface/UI_Preface/">U I Preface</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/NetQ/cli_user_guide/">
    Cli User Guide</a> 
  <ul>
    

    
    <li>
      <a href="/NetQ/cli_user_guide/CLI_Preface/CLI_Preface/">C L I Preface</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/automate_common_tasks/Automate_Common_and_Repetitive_Tasks/">Automate Common and Repetitive Tasks</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/command_line_overview/NetQ_Command_Line_Overview/">Net Q Command Line Overview</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_containter_environments/Monitor_Container_Environments/">Monitor Container Environments</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_data_link_layer/Monitor_Data_Link_Layer_Devices_and_Protocols/">Monitor Data Link Layer Devices and Protocols</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_linux_hosts/Monitor_Linux_Hosts/">Monitor Linux Hosts</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_network_health/Monitor_Overall_Network_Health/">Monitor Overall Network Health</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_network_layer/Monitor_Network_Protocols_and_Services/">Monitor Network Protocols and Services</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_physical_layer/Monitor_Physical_Layer_Components/" class="active">Monitor Physical Layer Components</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_switch_hardware/Monitor_Switch_Hardware_and_Software/">Monitor Switch Hardware and Software</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_virtual_overlays/Monitor_Virtual_Network_Overlays/">Monitor Virtual Network Overlays</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/Resolve_Issues/">Resolve Issues</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/Resolve_MLAG_Issues/">Resolve M L a G Issues</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/investiage_netq_issues/Investigate_NetQ_Issues/">Investigate Net Q Issues</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/methods_for_diagnosing_issues/Methods_for_Diagnosing_Network_Issues/">Methods for Diagnosing Network Issues</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/NetQ/deployment_guide/">
    Deployment Guide</a> 
  <ul>
    

    
    <li>
      <a href="/NetQ/deployment_guide/config_optional_netq/Configuring_Optional_NetQ_Capabilities/">Configuring Optional Net Q Capabilities</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/deployment_preface/Deployment_Preface/">Deployment Preface</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/install_netq/Install_NetQ/">Install Net Q</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/maintain_netq/Maintain_NetQ/">Maintain Net Q</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/netq_primer/Cumulus_NetQ_Primer/">Cumulus Net Q Primer</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/NetQ/Release_Notes/Cumulus_NetQ_2.0_Release_Notes/">Cumulus Net Q 2.0 Release Notes</a>
    </li>
    
    <li>
      <a href="/NetQ/getting_started/Getting_Started_with_the_Cumulus_NetQ_Appliance/">Getting Started With the Cumulus Net Q Appliance</a>
    </li>
    
    <li>
      <a href="/NetQ/software_installation_guide/Cumulus_NetQ_Appliance_Software_Installation_Guide/">Cumulus Net Q Appliance Software Installation Guide</a>
    </li>
    
  </ul>








</nav>

    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" />
  </label>
  <strong>Monitor Physical Layer Components</strong>
</header>

      
<article class="markdown">

<h1 id="monitor-physical-layer-components">Monitor Physical Layer Components</h1>

<p>With NetQ, a network administrator can monitor OSI Layer 1 physical
components on network devices, including interfaces, ports, links, and
peers. NetQ provides the ability to: </p>

<ul>
<li>Manage physical inventory: view the performance and status of
various components of a switch or host server</li>
<li>Validate configurations: verify the configuration of network peers
and ports</li>
</ul>

<p>It helps answer questions such as:</p>

<ul>
<li>Are any individual or bonded links down?</li>
<li>Are any links flapping?</li>
<li>Is there a link mismatch anywhere in my network?</li>
<li>Which interface ports are empty?</li>
<li>Which transceivers are installed?</li>
<li>What is the peer for a given port?</li>
</ul>

<p>NetQ uses
<a href="https://docs.cumulusnetworks.com/display/DOCS/Link+Layer+Discovery+Protocol">LLDP</a> (Link
Layer Discovery Protocol) to collect port information. NetQ can also
identify peer ports connected to DACs (Direct Attached Cables) and AOCs
(Active Optical Cables) without using LLDP, even if the link is not UP. </p>

<h2 id="contents">Contents</h2>

<p><img src="images/icons/grey_arrow_down.png" alt="" />{.expand-control-image}This topic
describes how to&hellip;</p>

<ul>
<li><a href="#MonitorPhysicalLayerComponents-MonitorPhysicalLayerInventory">Monitor Physical Layer
Inventory</a>

<ul>
<li><a href="#MonitorPhysicalLayerComponents-ViewDetailedCableInformationforAllDevices">View Detailed Cable Information for All
Devices</a></li>
<li><a href="#MonitorPhysicalLayerComponents-ViewDetailedModuleInformationforaGivenDevice">View Detailed Module Information for a Given
Device</a></li>
<li><a href="#MonitorPhysicalLayerComponents-ViewPortswithoutCablesConnectedforaGivenDevice">View Ports without Cables Connected for a Given
Device</a></li>
<li><a href="#MonitorPhysicalLayerComponents-ViewPortswithCablesConnectedforaGivenDevice">View Ports with Cables Connected for a Given
Device</a></li>
<li><a href="#MonitorPhysicalLayerComponents-ViewComponentsfromaGivenVendor">View Components from a Given
Vendor</a></li>
<li><a href="#MonitorPhysicalLayerComponents-ViewAllDevicesUsingaGivenComponent">View All Devices Using a Given
Component</a></li>
<li><a href="#MonitorPhysicalLayerComponents-ViewChangestoPhysicalComponents">View Changes to Physical
Components</a></li>
</ul></li>
<li><a href="#MonitorPhysicalLayerComponents-ValidatePhysicalLayerConfiguration">Validate Physical Layer
Configuration</a>

<ul>
<li><a href="#MonitorPhysicalLayerComponents-ConfirmPeerConnections">Confirm Peer
Connections</a></li>
<li><a href="#MonitorPhysicalLayerComponents-DiscoverMisconfigurations">Discover
Misconfigurations</a></li>
<li><a href="#MonitorPhysicalLayerComponents-IdentifyFlappingLinks">Identify Flapping
Links</a></li>
</ul></li>
</ul>

<h2 id="monitor-physical-layer-inventory">Monitor Physical Layer Inventory</h2>

<p>Keeping track of the various physical layer components in your switches
and servers ensures you have a fully functioning network and provides
inventory management and audit capabilities. You can monitor ports,
transceivers, and cabling deployed on a per port (interface), per
vendor, per part number and so forth. NetQ enables you to view the
current status and the status an earlier point in time. From this
information, you can, among other things:</p>

<ul>
<li>determine which ports are empty versus which ones have cables
plugged in and thereby validate expected connectivity</li>
<li>audit transceiver and cable components used by vendor, giving you
insights for estimated replacement costs, repair costs, overall
costs, and so forth to improve your maintenance and purchasing
processes</li>
<li>identify changes in your physical layer, and when they occurred</li>
</ul>

<p>The netq show interfaces physical command is used to obtain the
information from the devices. Its syntax is:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">netq [&lt;hostname&gt;] show interfaces physical [&lt;physical-port&gt;] [empty|plugged] [peer] [vendor &lt;module-vendor&gt;|model &lt;module-model&gt;|module] [around &lt;text-time&gt;] [json]
netq [&lt;hostname&gt;] show events [level info|level error|level warning|level critical|level debug] type interfaces-physical [between &lt;text-time&gt; and &lt;text-endtime&gt;] [json]</code></pre></div>
<p>When entering a time value, you must include a numeric value <em>and</em> the
unit of measure:</p>

<ul>
<li>d: day(s)</li>
<li>h: hour(s)</li>
<li>m: minute(s)</li>
<li>s: second(s)</li>
<li>now</li>
</ul>

<p>For time ranges, the <code>&lt;text-time&gt;</code> is the most recent time and the
<code>&lt;text-endtime&gt;</code> is the oldest time. The values do not have to have the
same unit of measure.</p>

<h3 id="view-detailed-cable-information-for-all-devices">View Detailed Cable Information for All Devices</h3>

<p>You can view what cables are connected to each interface port for all
devices, including the module type, vendor, part number and performance
characteristics. You can also view the cable information for a given
device by adding a hostname to the <code>show</code> command. This example shows
cable information and status for all interface ports on all devices.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">exit01            eth0                      up         1G         off     RJ45      n/a                  n/a              Thu Feb  7 18:31:52 2019
exit01            swp1                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:52 2019
exit01            swp2                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:52 2019
exit01            swp3                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:52 2019
exit01            swp4                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:52 2019
exit01            swp5                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:52 2019
exit01            swp6                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:52 2019
exit01            swp7                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:52 2019
exit02            eth0                      up         1G         off     RJ45      n/a                  n/a              Thu Feb  7 18:31:57 2019
exit02            swp1                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:57 2019
exit02            swp2                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:57 2019
exit02            swp3                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:57 2019
exit02            swp4                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:57 2019
exit02            swp5                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:57 2019
exit02            swp6                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:57 2019
exit02            swp7                      up         10G        off     RJ45      n/a                  n/a              Thu Feb  7 18:31:57 2019
firewall01        eth0                      up         Unknown    off     empty     n/a                  n/a              Thu Feb  7 18:31:25 2019
firewall01        swp1                      up         10G        off     empty     n/a                  n/a              Thu Feb  7 18:31:25 2019
firewall01        swp2                      up         10G        off     empty     n/a                  n/a              Thu Feb  7 18:31:25 2019
firewall01        swp3                      up         10G        off     empty     n/a                  n/a              Thu Feb  7 18:31:25 2019
firewall01        swp4                      up         10G        off     empty     n/a                  n/a              Thu Feb  7 18:31:25 2019
firewall02        eth0                      up         n/a        n/a     empty     n/a                  n/a              Thu Feb  7 18:31:30 2019
firewall02        swp1                      up         n/a        n/a     empty     n/a                  n/a              Thu Feb  7 18:31:30 2019
firewall02        swp2                      up         n/a        n/a     empty     n/a                  n/a              Thu Feb  7 18:31:30 2019
firewall02        swp3                      up         n/a        n/a     empty     n/a                  n/a              Thu Feb  7 18:31:30 2019
firewall02        swp4                      up         n/a        n/a     empty     n/a                  n/a              Thu Feb  7 18:31:30 2019
server11          eth0                      up         Unknown    off     empty     n/a                  n/a              Thu Feb  7 18:31:42 2019
server11          swp1                      up         10G        off     empty     n/a                  n/a              Thu Feb  7 18:31:42 2019
server11          swp2                      up         10G        off     empty     n/a                  n/a              Thu Feb  7 18:31:42 2019
server11          swp3                      up         10G        off     empty     n/a                  n/a              Thu Feb  7 18:31:42 2019
server11          swp4                      up         10G        off     empty     n/a                  n/a              Thu Feb  7 18:31:42 2019
server12          eth0                      up         n/a        n/a     empty     n/a                  n/a              Thu Feb  7 18:31:47 2019
 
...</code></pre></div>
<h3 id="view-detailed-module-information-for-a-given-device">View Detailed Module Information for a Given Device</h3>

<p>You can view detailed information about the transceiver modules on each
interface port, including serial number, transceiver type, connector and
attached cable length. You can also view the module information for a
given device by adding a hostname to the <code>show</code> command. This example
shows the detailed module information for the interface ports on leaf02
switch.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq leaf02 show interfaces physical module 
Matching cables records are:
Hostname          Interface                 Module    Vendor               Part No          Serial No                 Transceiver      Connector        Length Last Changed

----------------- ------------------------- --------- -------------------- ---------------- ------------------------- ---------------- ---------------- ------ -------------------------
leaf02            swp1                      RJ45      n/a                  n/a              n/a                       n/a              n/a              n/a    Thu Feb  7 22:49:37 2019
leaf02            swp2                      SFP       Mellanox             MC2609130-003    MT1507VS05177             1000Base-CX,Copp Copper pigtail   3m     Thu Feb  7 22:49:37 2019
                                                                                                                      er Passive,Twin 
                                                                                                                      Axial Pair (TW) 
leaf02            swp47                     QSFP+     CISCO                AFBR-7IER05Z-CS1 AVE1823402U               n/a              n/a              5m     Thu Feb  7 22:49:37 2019
leaf02            swp48                     QSFP28    TE Connectivity      2231368-1        15250052                  100G Base-CR4 or n/a              3m     Thu Feb  7 22:49:37 2019
                                                                                                                      25G Base-CR CA-L
                                                                                                                      ,40G Base-CR4               
leaf02            swp49                     SFP       OEM                  SFP-10GB-LR      ACSLR130408               10G Base-LR      LC               10km,  Thu Feb  7 22:49:37 2019
                                                                                                                                                        10000m
leaf02            swp50                     SFP       JDSU                 PLRXPLSCS4322N   CG03UF45M                 10G Base-SR,Mult LC               80m,   Thu Feb  7 22:49:37 2019
                                                                                                                      imode,                            30m,  
                                                                                                                      50um (M5),Multim                  300m  
                                                                                                                      ode,            
                                                                                                                      62.5um (M6),Shor
                                                                                                                      twave laser w/o 
                                                                                                                      OFC (SN),interme
                                                                                                                      diate distance (
                                                                                                                      I)              
leaf02            swp51                     SFP       Mellanox             MC2609130-003    MT1507VS05177             1000Base-CX,Copp Copper pigtail   3m     Thu Feb  7 22:49:37 2019
                                                                                                                      er Passive,Twin 
                                                                                                                      Axial Pair (TW) 
leaf02            swp52                     SFP       FINISAR CORP.        FCLF8522P2BTL    PTN1VH2                   1000Base-T       RJ45             100m   Thu Feb  7 22:49:37 2019</code></pre></div>
<h3 id="view-ports-without-cables-connected-for-a-given-device">View Ports without Cables Connected for a Given Device</h3>

<p>Checking for empty ports enables you to compare expected versus actual
deployment. This can be very helpful during deployment or during
upgrades. You can also view the cable information for a given device by
adding a hostname to the <code>show</code> command. This example shows the ports
that are empty on leaf01 switch.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq leaf01 show interfaces physical empty 
Matching cables records are:
Hostname         Interface State Speed      AutoNeg Module    Vendor           Part No          Last Changed
---------------- --------- ----- ---------- ------- --------- ---------------- ---------------- ------------------------
leaf01           swp49     down  Unknown    on      empty     n/a              n/a              Thu Feb  7 22:49:37 2019
leaf01           swp52     down  Unknown    on      empty     n/a              n/a              Thu Feb  7 22:49:37 2019</code></pre></div>
<h3 id="view-ports-with-cables-connected-for-a-given-device">View Ports with Cables Connected for a Given Device</h3>

<p>In a similar manner as checking for empty ports, you can check for ports
that have cables connected, enabling you to compare expected versus
actual deployment. You can also view the cable information for a given
device by adding a hostname to the show command. If you add the around
keyword, you can view which interface ports had cables connected at a
previous time. This example shows the ports of leaf01 switch that have
attached cables.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq leaf01 show interfaces physical plugged 
Matching cables records:
Hostname          Interface                 State      Speed      AutoNeg Module    Vendor               Part No          Last Changed
----------------- ------------------------- ---------- ---------- ------- --------- -------------------- ---------------- -------------------------
leaf01            eth0                      up         1G         on      RJ45      n/a                  n/a              Thu Feb  7 22:49:37 2019
leaf01            swp1                      up         10G        off     SFP       Amphenol             610640005        Thu Feb  7 22:49:37 2019
leaf01            swp2                      up         10G        off     SFP       Amphenol             610640005        Thu Feb  7 22:49:37 2019
leaf01            swp3                      down       10G        off     SFP       Mellanox             MC3309130-001    Thu Feb  7 22:49:37 2019
leaf01            swp33                     down       10G        off     SFP       OEM                  SFP-H10GB-CU1M   Thu Feb  7 22:49:37 2019
leaf01            swp34                     down       10G        off     SFP       Amphenol             571540007        Thu Feb  7 22:49:37 2019
leaf01            swp35                     down       10G        off     SFP       Amphenol             571540007        Thu Feb  7 22:49:37 2019
leaf01            swp36                     down       10G        off     SFP       OEM                  SFP-H10GB-CU1M   Thu Feb  7 22:49:37 2019
leaf01            swp37                     down       10G        off     SFP       OEM                  SFP-H10GB-CU1M   Thu Feb  7 22:49:37 2019
leaf01            swp38                     down       10G        off     SFP       OEM                  SFP-H10GB-CU1M   Thu Feb  7 22:49:37 2019
leaf01            swp39                     down       10G        off     SFP       Amphenol             571540007        Thu Feb  7 22:49:37 2019
leaf01            swp40                     down       10G        off     SFP       Amphenol             571540007        Thu Feb  7 22:49:37 2019
leaf01            swp49                     up         40G        off     QSFP+     Amphenol             624410001        Thu Feb  7 22:49:37 2019
leaf01            swp5                      down       10G        off     SFP       Amphenol             571540007        Thu Feb  7 22:49:37 2019
leaf01            swp50                     down       40G        off     QSFP+     Amphenol             624410001        Thu Feb  7 22:49:37 2019
leaf01            swp51                     down       40G        off     QSFP+     Amphenol             603020003        Thu Feb  7 22:49:37 2019
leaf01            swp52                     up         40G        off     QSFP+     Amphenol             603020003        Thu Feb  7 22:49:37 2019
leaf01            swp54                     down       40G        off     QSFP+     Amphenol             624410002        Thu Feb  7 22:49:37 2019</code></pre></div>
<h3 id="view-components-from-a-given-vendor">View Components from a Given Vendor</h3>

<p>By filtering for a specific cable vendor, you can collect information
such as how many ports use components from that vendor and when they
were last updated. This information may be useful when you run a cost
analysis of your network. This example shows all the ports that are
using components by an OEM vendor.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq leaf01 show interfaces physical vendor OEM
Matching cables records:
Hostname          Interface                 State      Speed      AutoNeg Module    Vendor               Part No          Last Changed
----------------- ------------------------- ---------- ---------- ------- --------- -------------------- ---------------- -------------------------
leaf01            swp33                     down       10G        off     SFP       OEM                  SFP-H10GB-CU1M   Thu Feb  7 22:49:37 2019
leaf01            swp36                     down       10G        off     SFP       OEM                  SFP-H10GB-CU1M   Thu Feb  7 22:49:37 2019
leaf01            swp37                     down       10G        off     SFP       OEM                  SFP-H10GB-CU1M   Thu Feb  7 22:49:37 2019
leaf01            swp38                     down       10G        off     SFP       OEM                  SFP-H10GB-CU1M   Thu Feb  7 22:49:37 2019</code></pre></div>
<h3 id="view-all-devices-using-a-given-component">View All Devices Using a Given Component</h3>

<p>You can view all of the devices with ports using a particular component.
This could be helpful when you need to change out a particular component
for possible failure issues, upgrades, or cost reasons. This example
first determines which models (part numbers) exist on all of the devices
and then those devices with a part number of QSFP-H40G-CU1M installed.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show interfaces physical model 
    2231368-1         :  2231368-1
    624400001         :  624400001
    QSFP-H40G-CU1M    :  QSFP-H40G-CU1M
    QSFP-H40G-CU1MUS  :  QSFP-H40G-CU1MUS
    n/a               :  n/a

cumulus@switch:~$ netq show interfaces physical model QSFP-H40G-CU1M 
Matching cables records:
Hostname          Interface                 State      Speed      AutoNeg Module    Vendor               Part No          Last Changed
----------------- ------------------------- ---------- ---------- ------- --------- -------------------- ---------------- -------------------------
leaf01            swp50                     up         1G         off     QSFP+     OEM                  QSFP-H40G-CU1M   Thu Feb  7 18:31:20 2019
leaf02            swp52                     up         1G         off     QSFP+     OEM                  QSFP-H40G-CU1M   Thu Feb  7 18:31:20 2019</code></pre></div>
<h3 id="view-changes-to-physical-components">View Changes to Physical Components</h3>

<p>Because components are often changed, NetQ enables you to determine
what, if any, changes have been made to the physical components on your
devices. This can be helpful during deployments or upgrades.</p>

<p>You can select how far back in time you want to go, or select a time
range using the between keyword. Note that time values must include
units to be valid. If no changes are found, a &ldquo;No matching cable records
found&rdquo; message is displayed. This example illustrates each of these
scenarios for all devices in the network.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show events type interfaces-physical between now and 30d
Matching cables records:
Hostname          Interface                 State      Speed      AutoNeg Module    Vendor               Part No          Last Changed
----------------- ------------------------- ---------- ---------- ------- --------- -------------------- ---------------- -------------------------
leaf01            swp1                      up         1G         off     SFP       AVAGO                AFBR-5715PZ-JU1  Thu Feb  7 18:34:20 2019
leaf01            swp2                      up         10G        off     SFP       OEM                  SFP-10GB-LR      Thu Feb  7 18:34:20 2019
leaf01            swp47                     up         10G        off     SFP       JDSU                 PLRXPLSCS4322N   Thu Feb  7 18:34:20 2019
leaf01            swp48                     up         40G        off     QSFP+     Mellanox             MC2210130-002    Thu Feb  7 18:34:20 2019
leaf01            swp49                     down       10G        off     empty     n/a                  n/a              Thu Feb  7 18:34:20 2019
leaf01            swp50                     up         1G         off     SFP       FINISAR CORP.        FCLF8522P2BTL    Thu Feb  7 18:34:20 2019
leaf01            swp51                     up         1G         off     SFP       FINISAR CORP.        FTLF1318P3BTL    Thu Feb  7 18:34:20 2019
leaf01            swp52                     down       1G         off     SFP       CISCO-AGILENT        QFBR-5766LP      Thu Feb  7 18:34:20 2019
leaf02            swp1                      up         1G         on      RJ45      n/a                  n/a              Thu Feb  7 18:34:20 2019
leaf02            swp2                      up         10G        off     SFP       Mellanox             MC2609130-003    Thu Feb  7 18:34:20 2019
leaf02            swp47                     up         10G        off     QSFP+     CISCO                AFBR-7IER05Z-CS1 Thu Feb  7 18:34:20 2019
leaf02            swp48                     up         10G        off     QSFP+     Mellanox             MC2609130-003    Thu Feb  7 18:34:20 2019
leaf02            swp49                     up         10G        off     SFP       FIBERSTORE           SFP-10GLR-31     Thu Feb  7 18:34:20 2019
leaf02            swp50                     up         1G         off     SFP       OEM                  SFP-GLC-T        Thu Feb  7 18:34:20 2019
leaf02            swp51                     up         10G        off     SFP       Mellanox             MC2609130-003    Thu Feb  7 18:34:20 2019
leaf02            swp52                     up         1G         off     SFP       FINISAR CORP.        FCLF8522P2BTL    Thu Feb  7 18:34:20 2019
leaf03            swp1                      up         10G        off     SFP       Mellanox             MC2609130-003    Thu Feb  7 18:34:20 2019
leaf03            swp2                      up         10G        off     SFP       Mellanox             MC3309130-001    Thu Feb  7 18:34:20 2019
leaf03            swp47                     up         10G        off     SFP       CISCO-AVAGO          AFBR-7IER05Z-CS1 Thu Feb  7 18:34:20 2019
leaf03            swp48                     up         10G        off     SFP       Mellanox             MC3309130-001    Thu Feb  7 18:34:20 2019
leaf03            swp49                     down       1G         off     SFP       FINISAR CORP.        FCLF8520P2BTL    Thu Feb  7 18:34:20 2019
leaf03            swp50                     up         1G         off     SFP       FINISAR CORP.        FCLF8522P2BTL    Thu Feb  7 18:34:20 2019
leaf03            swp51                     up         10G        off     QSFP+     Mellanox             MC2609130-003    Thu Feb  7 18:34:20 2019
...
oob-mgmt-server   swp1                      up         1G         off     RJ45      n/a                  n/a              Thu Feb  7 18:34:20 2019
oob-mgmt-server   swp2                      up         1G         off     RJ45      n/a                  n/a              Thu Feb  7 18:34:20 2019
 
cumulus@switch:~$ netq show events interfaces-physical between 6d and 16d
Matching cables records:
Hostname          Interface                 State      Speed      AutoNeg Module    Vendor               Part No          Last Changed
----------------- ------------------------- ---------- ---------- ------- --------- -------------------- ---------------- -------------------------
leaf01            swp1                      up         1G         off     SFP       AVAGO                AFBR-5715PZ-JU1  Thu Feb  7 18:34:20 2019
leaf01            swp2                      up         10G        off     SFP       OEM                  SFP-10GB-LR      Thu Feb  7 18:34:20 2019
leaf01            swp47                     up         10G        off     SFP       JDSU                 PLRXPLSCS4322N   Thu Feb  7 18:34:20 2019
leaf01            swp48                     up         40G        off     QSFP+     Mellanox             MC2210130-002    Thu Feb  7 18:34:20 2019
leaf01            swp49                     down       10G        off     empty     n/a                  n/a              Thu Feb  7 18:34:20 2019
leaf01            swp50                     up         1G         off     SFP       FINISAR CORP.        FCLF8522P2BTL    Thu Feb  7 18:34:20 2019
leaf01            swp51                     up         1G         off     SFP       FINISAR CORP.        FTLF1318P3BTL    Thu Feb  7 18:34:20 2019
leaf01            swp52                     down       1G         off     SFP       CISCO-AGILENT        QFBR-5766LP      Thu Feb  7 18:34:20 2019
...
 
cumulus@switch:~$ netq show events type interfaces-physical between 0s and 5h 
No matching cables records found</code></pre></div>
<h2 id="validate-physical-layer-configuration">Validate Physical Layer Configuration</h2>

<p>Beyond knowing what physical components are deployed, it is valuable to
know that they are configured and operating correctly. NetQ enables you
to confirm that peer connections are present, discover any misconfigured
ports, peers, or unsupported modules, and monitor for link flaps.</p>

<p>NetQ checks peer connections using LLDP. For DACs and AOCs, NetQ
determines the peers using their serial numbers in the port EEPROMs,
even if the link is not UP.</p>

<h3 id="confirm-peer-connections">Confirm Peer Connections</h3>

<p>You can validate peer connections for all devices in your network or for
a specific device or port. This example shows the peer hosts and their
status for leaf03 switch.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq leaf03 show interfaces physical peer
Matching cables records:
Hostname          Interface                 Peer Hostname     Peer Interface            State      Message
----------------- ------------------------- ----------------- ------------------------- ---------- -----------------------------------
leaf03            swp1                      oob-mgmt-switch   swp7                      up                                
leaf03            swp2                                                                  down       Peer port unknown                             
leaf03            swp47                     leaf04            swp47                     up                                
leaf03            swp48                     leaf04            swp48                     up              
leaf03            swp49                     leaf04            swp49                     up                                
leaf03            swp50                     leaf04            swp50                     up                                
leaf03            swp51                     exit01            swp51                     up                                
leaf03            swp52                                                                 down       Port cage empty                                </code></pre></div>
<p>This example shows the peer data for a specific interface port.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq leaf01 show interfaces physical swp47 peer
Matching cables records:
Hostname          Interface                 Peer Hostname     Peer Interface            State      Message
----------------- ------------------------- ----------------- ------------------------- ---------- -----------------------------------
leaf01            swp47                     leaf02            swp47                     up   </code></pre></div>
<h3 id="discover-misconfigurations">Discover Misconfigurations</h3>

<p>You can verify that the following configurations are the same on both
sides of a peer interface:</p>

<ul>
<li>Admin state</li>
<li>Operational state</li>
<li>Link speed</li>
<li>Auto-negotiation setting</li>
</ul>

<p>The <code>netq check interfaces</code> command is used to determine if any of the
interfaces have any continuity errors. This command only checks the
physical interfaces; it does not check bridges, bonds or other software
constructs. You can check all interfaces at once, or for a given device,
or check the connection between a given device and its peer. It enables
you to compare the current status of the interfaces, as well as their
status at an earlier point in time. The command syntax is:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">netq check interfaces [unverified] [&lt;physical-hostname&gt; &lt;physical-port&gt;|&lt;physical-hostname&gt;] [around &lt;text-time&gt;] [json]
netq check interfaces &lt;physical-hostname&gt; &lt;physical-port&gt; and &lt;peer-physical-hostname&gt; &lt;peer-physical-port&gt; [around &lt;text-time&gt;] [json]</code></pre></div>
<p>If NetQ cannot determine a peer for a given device, the port is marked
as <em>unverified</em>.</p>

<p>If you find a misconfiguration, use the
<code>netq show interfaces physical</code> command for clues about the cause.</p>

<p><strong>Example: Find Mismatched Operational States</strong></p>

<p>In this example, we check all of the interfaces for misconfigurations
and we find that one interface port has an error. We look for clues
about the cause and see that the Operational states do not match on the
connection between leaf 03 and leaf04: leaf03 is up, but leaf04 is down.
If the misconfiguration was due to a mismatch in the administrative
state, the message would have been <em>Admin state mismatch (up, down)</em> or
<em>Admin state mismatch (down, up)</em>.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq check interfaces 
Checked Nodes: 18, Failed Nodes: 8
Checked Ports: 741, Failed Ports: 1, Unverified Ports: 414
 
cumulus@switch:~$ netq show interfaces physical peer
Matching cables records:
Hostname          Interface                 Peer Hostname     Peer Interface            Message
----------------- ------------------------- ----------------- ------------------------- -----------------------------------
...
leaf03            swp1                      oob-mgmt-switch   swp7                                                      
leaf03            swp2                                                                  Peer port unknown                             
leaf03            swp47                     leaf04            swp47                                                     
leaf03            swp48                     leaf04            swp48                     State mismatch (up, down)     
leaf03            swp49                     leaf04            swp49                                                     
leaf03            swp50                     leaf04            swp50                                                     
leaf03            swp52                                                                 Port cage empty                                    
...   </code></pre></div>
<p><strong>Example: Find Mismatched Peers</strong></p>

<p>This example uses the <em>and</em> keyword to check the connections between two
peers. An error is seen, so we check the physical peer information and
discover that the incorrect peer has been specified. After fixing it, we
run the check again, and see that there are no longer any interface
errors.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq check interfaces leaf01 swp50 and leaf02 swp50
Checked Nodes: 1, Failed Nodes: 1
Checked Ports: 1, Failed Ports: 1, Unverified Ports: 0
cumulus@switch:~$ netq show interfaces physical peer

Matching cables records:
Hostname          Interface                 Peer Hostname     Peer Interface            Message
----------------- ------------------------- ----------------- ------------------------- -----------------------------------
leaf01            swp50                     leaf04            swp49                     Incorrect peer specified. Real peer
                                                                                        is leaf04 swp50      

cumulus@switch:~$ netq check interfaces leaf01 swp50 and leaf02 swp50
Checked Nodes: 1, Failed Nodes: 0
Checked Ports: 1, Failed Ports: 0, Unverified Ports: 0</code></pre></div>
<p><strong>Example: Find Mismatched Link Speeds</strong></p>

<p>This example checks for for configuration mismatches and finds a link
speed mismatch on server03. The link speed on swp49 is <em>40G</em> and the
peer port swp50 is <em>unspecified</em>.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq check interfaces
Checked Nodes: 10, Failed Nodes: 1
Checked Ports: 125, Failed Ports: 2, Unverified Ports: 35
Hostname          Interface                 Peer Hostname     Peer Interface            Message
----------------- ------------------------- ----------------- ------------------------- -----------------------------------
server03          swp49                     server03          swp50                     Speed mismatch (40G, Unknown)      
server03          swp50                     server03          swp49                     Speed mismatch (Unknown, 40G)  </code></pre></div>
<p><strong>Example: Find Mismatched Auto-negotiation Settings</strong></p>

<p>This example checks for configuration mismatches and finds
auto-negotation setting mismatches between the servers and leafs.
Auto-negotiation is <em>off</em> on the leafs, but <em>on</em> on the servers.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq check interfaces
Checked Nodes: 15, Failed Nodes: 8
Checked Ports: 118, Failed Ports: 8, Unverified Ports: 94
Hostname          Interface                 Peer Hostname     Peer Interface            Message
----------------- ------------------------- ----------------- ------------------------- -----------------------------------
leaf01            swp1                      server01          eth1                      Autoneg mismatch (off, on)         
leaf02            swp2                      server02          eth2                      Autoneg mismatch (off, on)         
leaf03            swp1                      server03          eth1                      Autoneg mismatch (off, on)         
leaf04            swp2                      server04          eth2                      Autoneg mismatch (off, on)         
server01          eth1                      leaf01            swp1                      Autoneg mismatch (on, off)         
server02          eth2                      leaf02            swp2                      Autoneg mismatch (on, off)         
server03          eth1                      leaf03            swp1                      Autoneg mismatch (on, off)         
server04          eth2                      leaf04            swp2                      Autoneg mismatch (on, off)         </code></pre></div>
<h3 id="identify-flapping-links">Identify Flapping Links</h3>

<p>You can also determine whether a link is flapping using the
<code>netq check interfaces</code> command. If a link is flapping, NetQ indicates
this in a message:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq check interfaces 
Checked Nodes: 18, Failed Nodes: 8
Checked Ports: 741, Failed Ports: 1, Unverified Ports: 414

Matching cables records:
Hostname          Interface                 Peer Hostname     Peer Interface            Message
----------------- ------------------------- ----------------- ------------------------- -----------------------------------
leaf02            -                         -                 -                         Link flapped 11 times in last 5
                                                                                        mins                    </code></pre></div>
<p> </p>
</article>

      

    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#monitor-physical-layer-components">Monitor Physical Layer Components</a>
<ul>
<li><a href="#contents">Contents</a></li>
<li><a href="#monitor-physical-layer-inventory">Monitor Physical Layer Inventory</a>
<ul>
<li><a href="#view-detailed-cable-information-for-all-devices">View Detailed Cable Information for All Devices</a></li>
<li><a href="#view-detailed-module-information-for-a-given-device">View Detailed Module Information for a Given Device</a></li>
<li><a href="#view-ports-without-cables-connected-for-a-given-device">View Ports without Cables Connected for a Given Device</a></li>
<li><a href="#view-ports-with-cables-connected-for-a-given-device">View Ports with Cables Connected for a Given Device</a></li>
<li><a href="#view-components-from-a-given-vendor">View Components from a Given Vendor</a></li>
<li><a href="#view-all-devices-using-a-given-component">View All Devices Using a Given Component</a></li>
<li><a href="#view-changes-to-physical-components">View Changes to Physical Components</a></li>
</ul></li>
<li><a href="#validate-physical-layer-configuration">Validate Physical Layer Configuration</a>
<ul>
<li><a href="#confirm-peer-connections">Confirm Peer Connections</a></li>
<li><a href="#discover-misconfigurations">Discover Misconfigurations</a></li>
<li><a href="#identify-flapping-links">Identify Flapping Links</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
