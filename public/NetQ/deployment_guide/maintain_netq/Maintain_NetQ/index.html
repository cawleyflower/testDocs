<!DOCTYPE html><html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maintain Net Q | Cumulus Networks Documentation</title>

<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">
<link rel="stylesheet" href="/normalize.min.css">

<link rel="stylesheet" href="/book.min.50a619ce4c0e99594908d162684f42218608aa6fde2bd83cca5025d59ba535e3.css">

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<h2 class="book-brand">
  <a href="http://example.org/">Cumulus Networks Documentation</a>
</h2>



    


  
  
    
  
 
  <ul>
    
    <li><a href="/Cumulus-Linux/installation-management/">
    Installation Management</a> 
  <ul>
    

    
    <li>
      <a href="/Cumulus-Linux/installation-management/Adding_and_Updating_Packages/">Adding and Updating Packages</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Installing_a_New_Cumulus_Linux_Image/">Installing a New Cumulus Linux Image</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Managing_Cumulus_Linux_Disk_Images/">Managing Cumulus Linux Disk Images</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Upgrading_Cumulus_Linux/">Upgrading Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Using_Snapshots/">Using Snapshots</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/installation-management/Zero_Touch_Provisioning_-_ZTP/">Zero Touch Provisioning Z T P</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/Cumulus-Linux/whats-new/">What&#39;s New</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/Quick_Start_Guide/">Quick Start Guide</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Network_Command_Line_Utility_-_NCLU/">Network Command Line Utility N C L U</a>
    </li>
    
    <li>
      <a href="/Cumulus-Linux/system-config/Setting_Date_and_Time/">Setting Date and Time</a>
    </li>
    
  </ul>
 
  <ul>
    
    <li><a href="/NetQ/UI_User_Guide/">
    U I User Guide</a> 
  <ul>
    
    <li><a href="/NetQ/UI_User_Guide/monitor_the_network/">
    Monitor the Network</a> 
  <ul>
    

    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_the_network/monitor_alarm_events/Monitor_Alarm_Events/">Monitor Alarm Events</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_the_network/monitor_informational_events/Monitor_Informational_Events/">Monitor Informational Events</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_the_network/monitor_network_health/Monitor_Network_Health/">Monitor Network Health</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_the_network/monitor_network_inventory/Monitor_Network_Inventory/">Monitor Network Inventory</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_the_network/monitor_network_protocols/Monitor_Network_Layer_Protocols/">Monitor Network Layer Protocols</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/NetQ/UI_User_Guide/monitor_switches/Monitor_Switches/">Monitor Switches</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/netq_ui_overview/NetQ_User_Interface_Overview/">Net Q User Interface Overview</a>
    </li>
    
    <li>
      <a href="/NetQ/UI_User_Guide/ui_preface/UI_Preface/">U I Preface</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/NetQ/cli_user_guide/">
    Cli User Guide</a> 
  <ul>
    

    
    <li>
      <a href="/NetQ/cli_user_guide/CLI_Preface/CLI_Preface/">C L I Preface</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/automate_common_tasks/Automate_Common_and_Repetitive_Tasks/">Automate Common and Repetitive Tasks</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/command_line_overview/NetQ_Command_Line_Overview/">Net Q Command Line Overview</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_containter_environments/Monitor_Container_Environments/">Monitor Container Environments</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_data_link_layer/Monitor_Data_Link_Layer_Devices_and_Protocols/">Monitor Data Link Layer Devices and Protocols</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_linux_hosts/Monitor_Linux_Hosts/">Monitor Linux Hosts</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_network_health/Monitor_Overall_Network_Health/">Monitor Overall Network Health</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_network_layer/Monitor_Network_Protocols_and_Services/">Monitor Network Protocols and Services</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_physical_layer/Monitor_Physical_Layer_Components/">Monitor Physical Layer Components</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_switch_hardware/Monitor_Switch_Hardware_and_Software/">Monitor Switch Hardware and Software</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/monitor_virtual_overlays/Monitor_Virtual_Network_Overlays/">Monitor Virtual Network Overlays</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/Resolve_Issues/">Resolve Issues</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/Resolve_MLAG_Issues/">Resolve M L a G Issues</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/investiage_netq_issues/Investigate_NetQ_Issues/">Investigate Net Q Issues</a>
    </li>
    
    <li>
      <a href="/NetQ/cli_user_guide/resolve_issues/methods_for_diagnosing_issues/Methods_for_Diagnosing_Network_Issues/">Methods for Diagnosing Network Issues</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/NetQ/deployment_guide/">
    Deployment Guide</a> 
  <ul>
    

    
    <li>
      <a href="/NetQ/deployment_guide/config_optional_netq/Configuring_Optional_NetQ_Capabilities/">Configuring Optional Net Q Capabilities</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/deployment_preface/Deployment_Preface/">Deployment Preface</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/install_netq/Install_NetQ/">Install Net Q</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/maintain_netq/Maintain_NetQ/" class="active">Maintain Net Q</a>
    </li>
    
    <li>
      <a href="/NetQ/deployment_guide/netq_primer/Cumulus_NetQ_Primer/">Cumulus Net Q Primer</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/NetQ/Release_Notes/Cumulus_NetQ_2.0_Release_Notes/">Cumulus Net Q 2.0 Release Notes</a>
    </li>
    
    <li>
      <a href="/NetQ/getting_started/Getting_Started_with_the_Cumulus_NetQ_Appliance/">Getting Started With the Cumulus Net Q Appliance</a>
    </li>
    
    <li>
      <a href="/NetQ/software_installation_guide/Cumulus_NetQ_Appliance_Software_Installation_Guide/">Cumulus Net Q Appliance Software Installation Guide</a>
    </li>
    
  </ul>








</nav>

    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" />
  </label>
  <strong>Maintain Net Q</strong>
</header>

      
<article class="markdown">

<h1 id="maintain-netq">Maintain NetQ</h1>

<p>While regular maintenance of NetQ is not required, there are some tasks
that you may want to perform in the course of everyday operations. As
the network changes, you might have the need to add or remove monitored
nodes, notification integrations, and NetQ Agents for example. You might
also need to restore NetQ to a prior version or upgrade to a new
version. </p>

<h2 id="contents">Contents</h2>

<p><img src="images/icons/grey_arrow_down.png" alt="" />{.expand-control-image}This topic
describes how to&hellip;</p>

<ul>
<li><a href="#MaintainNetQ-ManageEventNotificationIntegrations">Manage Event Notification
Integrations</a>

<ul>
<li><a href="#MaintainNetQ-RemoveanEventNotificationChannel">Remove an Event Notification
Channel</a></li>
<li><a href="#MaintainNetQ-DeleteanEventNotificationFilter">Delete an Event Notification
Filter</a></li>
</ul></li>
<li><a href="#MaintainNetQ-ManagetheNetQAgents">Manage the NetQ Agents</a>

<ul>
<li><a href="#MaintainNetQ-DisableNetQAgentonaNode">Disable NetQ Agent on a
Node</a></li>
<li><a href="#MaintainNetQ-RemoveNetQAgentfromaNode">Remove NetQ Agent from a
Node</a></li>
<li><a href="#MaintainNetQ-AgentLogConfigureLoggingforaNetQAgent">Configure Logging for a NetQ
Agent</a></li>
</ul></li>
<li><a href="#MaintainNetQ-BackupUpgradeNetQ">Upgrade NetQ</a></li>
</ul>

<h2 id="manage-event-notification-integrations">Manage Event Notification Integrations</h2>

<p>You might need to modify event notification configurations at some point
in the lifecycle of your deployment. Adding new integrations and filters
are described in Configuring Optional NetQ Capabilities. Removing them
is described here.</p>

<h3 id="remove-an-event-notification-channel">Remove an Event Notification Channel</h3>

<p>You can delete an event notification integration using
the <code>netq config del notification</code> command. You can verify it has been
removed using the related <code>show</code> command.</p>

<p>For example, to remove a Slack integration and verify it is no longer in
the configuration: </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq del notification channel slk-netq-events
cumulus@switch:~$ netq show notification channel</code></pre></div>
<h3 id="delete-an-event-notification-filter">Delete an Event Notification Filter</h3>

<p>To delete a filter, use the following command, then verify it has been
removed:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq del notification filter drop-if
cumulus@switch:~$ netq show notification filter</code></pre></div>
<h2 id="manage-the-netq-agents">Manage the NetQ Agents</h2>

<p>At various points in time, you might want to change which network nodes
are being monitored by NetQ or look more closely at a network node for
troubleshooting purposes. Adding the NetQ Agent to a switch or host is
described in <a href="Install_NetQ">Install NetQ</a>. Disabling an Agent is
described here and managing NetQ Agent logging is also presented in this
section.</p>

<h3 id="disable-netq-agent-on-a-node">Disable NetQ Agent on a Node</h3>

<p>You can temporarily disable NetQ Agent on a node. Disabling the agent
maintains the activity history in the NetQ database.</p>

<p>To disable NetQ Agent on a node, run the following command from the
node:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq config stop agent</code></pre></div>
<h3 id="remove-netq-agent-from-a-node">Remove NetQ Agent from a Node</h3>

<p>You can decommission a NetQ Agent on a given node. You might need to do
this when you:</p>

<ul>
<li>RMA the switch or host being monitored </li>
<li>Change the hostname of the switch or host being monitored</li>
<li>Move the switch or host being monitored from one data center to
another</li>
</ul>

<p> </p>

<p>Decommissioning the node removes the agent server settings from the
local configuration file.</p>

<p>To decommission a node from the NetQ database, run the following command
<em>from that node</em>:</p>

<p> </p>
<div class="highlight"><pre class="chroma"><code class="language-plain" data-lang="plain">cumulus@switch:~$ netq config del agent server</code></pre></div>
<h3 id="configure-logging-for-a-netq-agent">Configure Logging for a NetQ Agent</h3>

<p>The logging level used for a NetQ Agent determines what types of events
are logged about the NetQ Agent on the switch or host. </p>

<p>First, you need to decide what level of logging you want to
configure. You can configure the logging level to be the same for every
NetQ Agent, or selectively increase or decrease the logging level for a
NetQ Agent on a problematic node.</p>

<table>
<thead>
<tr>
<th>Logging Level</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>debug</td>
<td>Sends notifications for all debugging-related, informational, warning, and error messages.</td>
</tr>

<tr>
<td>info</td>
<td>Sends notifications for informational, warning, and error messages (default).</td>
</tr>

<tr>
<td>warning</td>
<td>Sends notifications for warning and error messages.</td>
</tr>

<tr>
<td>error</td>
<td>Sends notifications for errors messages.</td>
</tr>
</tbody>
</table>

<p>You can view the NetQ Agent log directly. Messages have the following
structure:</p>

<p><code>&lt;timestamp&gt; &lt;node&gt; &lt;service&gt;[PID]: &lt;level&gt;: &lt;message&gt;</code></p>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>timestamp</td>
<td>Date and time event occurred in UTC format</td>
</tr>

<tr>
<td>node</td>
<td>Hostname of network node where event occurred</td>
</tr>

<tr>
<td>service [PID]</td>
<td>Service and Process IDentifier that generated the event</td>
</tr>

<tr>
<td>level</td>
<td>Logging level in which the given event is classified; <em>debug</em>, <em>error</em>, <em>info</em>, or <em>warning</em></td>
</tr>

<tr>
<td>message</td>
<td>Text description of event, including the node where the event occurred</td>
</tr>
</tbody>
</table>

<p>For example:</p>

<p><img src="attachments/8365409/8365408.png" alt="" />{width=&ldquo;800&rdquo;}</p>

<p>This example shows a portion of a NetQ Agent log with debug level
logging. </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">...
2019-02-16T18:45:53.951124+00:00 spine-1 netq-agent[8600]: INFO: OPTA Discovery exhibit url hydra-09.cumulusnetworks.com port 4786
2019-02-16T18:45:53.952035+00:00 spine-1 netq-agent[8600]: INFO: OPTA Discovery Agent ID spine-1
2019-02-16T18:45:53.960152+00:00 spine-1 netq-agent[8600]: INFO: Received Discovery Response 0
2019-02-16T18:46:54.054160+00:00 spine-1 netq-agent[8600]: INFO: OPTA Discovery exhibit url hydra-09.cumulusnetworks.com port 4786
2019-02-16T18:46:54.054509+00:00 spine-1 netq-agent[8600]: INFO: OPTA Discovery Agent ID spine-1
2019-02-16T18:46:54.057273+00:00 spine-1 netq-agent[8600]: INFO: Received Discovery Response 0
2019-02-16T18:47:54.157985+00:00 spine-1 netq-agent[8600]: INFO: OPTA Discovery exhibit url hydra-09.cumulusnetworks.com port 4786
2019-02-16T18:47:54.158857+00:00 spine-1 netq-agent[8600]: INFO: OPTA Discovery Agent ID spine-1
2019-02-16T18:47:54.171170+00:00 spine-1 netq-agent[8600]: INFO: Received Discovery Response 0
2019-02-16T18:48:54.260903+00:00 spine-1 netq-agent[8600]: INFO: OPTA Discovery exhibit url hydra-09.cumulusnetworks.com port 4786
...</code></pre></div>
<p><strong>Example: Configure debug-level logging</strong></p>

<ol>
<li><p>Set the logging level to <em>debug.</em></p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq config add agent loglevel debug</code></pre></div></li>

<li><p>Restart the NetQ Agent.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq config restart agent</code></pre></div></li>

<li><p>Optionally, verify connection to the NetQ platform by viewing the
<code>netq-agent.log</code> messages. </p>

<p> </p></li>
</ol>

<p>Example: Configure warning-level logging</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq config add agent loglevel warning 
cumulus@switch:~$ netq config restart agent </code></pre></div>
<p><strong>Example: Disable Agent Logging</strong></p>

<p>If you have set the logging level to debug for troubleshooting, it is
recommended that you either change the logging level to a less heavy
mode or completely disable agent logging altogether when you are
finished troubleshooting.</p>

<p>To change the logging level, run the following command and restart the
agent service:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq config add agent loglevel &lt;LOG_LEVEL&gt; 
cumulus@switch:~$ netq config restart agent</code></pre></div>
<p>To disable all logging:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq config del agent loglevel 
cumulus@switch:~$ netq config restart agent</code></pre></div>
<h2 id="upgrade-netq">Upgrade NetQ</h2>

<p>Before upgrading NetQ, consider the following:</p>

<ul>
<li>The minimum supported Cumulus Linux version for NetQ 2.0.0 is 3.7.0.</li>
<li>You must upgrade your NetQ Agents as well as the NetQ Platform.</li>
<li>You can upgrade to NetQ 2.0.0 without upgrading Cumulus Linux.</li>
</ul>

<p>If you are upgrading from a prior version of NetQ, please contact
support for assistance.</p>

<p>Cumulus Networks recommends only upgrading NetQ during a network
maintenance window.</p>

<p>Events generated during the upgrade process will not be available in the
database. Once the upgrade process is complete, the agents re-sync with
the current state of the Host or Cumulus Linux switch with the NetQ
Platform.</p>

<h2 id="attachments">Attachments:</h2>

<p><img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365409/8365410.png">image2018-8-7
16:21:25.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365409/8365408.png">image2018-10-2
17:48:9.png</a> (image/png)</p>
</article>

      

    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#maintain-netq">Maintain NetQ</a>
<ul>
<li><a href="#contents">Contents</a></li>
<li><a href="#manage-event-notification-integrations">Manage Event Notification Integrations</a>
<ul>
<li><a href="#remove-an-event-notification-channel">Remove an Event Notification Channel</a></li>
<li><a href="#delete-an-event-notification-filter">Delete an Event Notification Filter</a></li>
</ul></li>
<li><a href="#manage-the-netq-agents">Manage the NetQ Agents</a>
<ul>
<li><a href="#disable-netq-agent-on-a-node">Disable NetQ Agent on a Node</a></li>
<li><a href="#remove-netq-agent-from-a-node">Remove NetQ Agent from a Node</a></li>
<li><a href="#configure-logging-for-a-netq-agent">Configure Logging for a NetQ Agent</a></li>
</ul></li>
<li><a href="#upgrade-netq">Upgrade NetQ</a></li>
<li><a href="#attachments">Attachments:</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
