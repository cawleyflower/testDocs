<!DOCTYPE html><html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Net Q Command Line Overview | Cumulus Networks Documentation</title>

<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">
<link rel="stylesheet" href="/normalize.min.css">

<link rel="stylesheet" href="/book.min.50a619ce4c0e99594908d162684f42218608aa6fde2bd83cca5025d59ba535e3.css">

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<h2 class="book-brand">
  <a href="http://example.org/">Cumulus Networks Documentation</a>
</h2>



    


  
  
    
    
  
 
  <ul>
    
    <li><a href="/docs/Cumulus-Linux/">
    Cumulus Linux</a> 
  <ul>
    

    
    <li>
      <a href="/docs/Cumulus-Linux/whats-new/">What&#39;s New</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/Quick_Start_Guide/">Quick Start Guide</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Adding_and_Updating_Packages/">Adding and Updating Packages</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Installing_a_New_Cumulus_Linux_Image/">Installing a New Cumulus Linux Image</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Managing_Cumulus_Linux_Disk_Images/">Managing Cumulus Linux Disk Images</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Upgrading_Cumulus_Linux/">Upgrading Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Using_Snapshots/">Using Snapshots</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Zero_Touch_Provisioning_-_ZTP/">Zero Touch Provisioning Z T P</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/system-config/Network_Command_Line_Utility_-_NCLU/">Network Command Line Utility N C L U</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/system-config/Setting_Date_and_Time/">Setting Date and Time</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/docs/NetQ/">
    Net Q</a> 
  <ul>
    
    <li><a href="/docs/NetQ/deployment_guide/">
    Deployment Guide</a> 
  <ul>
    

    
    <li>
      <a href="/docs/NetQ/deployment_guide/config_optional_netq/Configuring_Optional_NetQ_Capabilities/">Configuring Optional Net Q Capabilities</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/deployment_preface/Deployment_Preface/">Deployment Preface</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/install_netq/Install_NetQ/">Install Net Q</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/maintain_netq/Maintain_NetQ/">Maintain Net Q</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/netq_primer/Cumulus_NetQ_Primer/">Cumulus Net Q Primer</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/docs/NetQ/Cumulus_NetQ_CLI_User_Guide/">Cumulus Net Q C L I User Guide</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/Release_Notes/Cumulus_NetQ_2.0_Release_Notes/">Cumulus Net Q 2.0 Release Notes</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/Cumulus_NetQ_UI_User_Guide/">Cumulus Net Q U I User Guide</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_switches/Monitor_Switches/">Monitor Switches</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/Monitor_the_Network/">Monitor the Network</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/monitor_alarm_events/Monitor_Alarm_Events/">Monitor Alarm Events</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/monitor_informational_events/Monitor_Informational_Events/">Monitor Informational Events</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/monitor_network_health/Monitor_Network_Health/">Monitor Network Health</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/monitor_network_inventory/Monitor_Network_Inventory/">Monitor Network Inventory</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/monitor_network_protocols/Monitor_Network_Layer_Protocols/">Monitor Network Layer Protocols</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/netq_ui_overview/NetQ_User_Interface_Overview/">Net Q User Interface Overview</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/ui_preface/UI_Preface/">U I Preface</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/CLI_Preface/CLI_Preface/">C L I Preface</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/automate_common_tasks/Automate_Common_and_Repetitive_Tasks/">Automate Common and Repetitive Tasks</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/command_line_overview/NetQ_Command_Line_Overview/" class="active">Net Q Command Line Overview</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_containter_environments/Monitor_Container_Environments/">Monitor Container Environments</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_data_link_layer/Monitor_Data_Link_Layer_Devices_and_Protocols/">Monitor Data Link Layer Devices and Protocols</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_linux_hosts/Monitor_Linux_Hosts/">Monitor Linux Hosts</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_network_health/Monitor_Overall_Network_Health/">Monitor Overall Network Health</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_network_layer/Monitor_Network_Protocols_and_Services/">Monitor Network Protocols and Services</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_physical_layer/Monitor_Physical_Layer_Components/">Monitor Physical Layer Components</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_switch_hardware/Monitor_Switch_Hardware_and_Software/">Monitor Switch Hardware and Software</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_virtual_overlays/Monitor_Virtual_Network_Overlays/">Monitor Virtual Network Overlays</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/resolve_issues/Resolve_Issues/">Resolve Issues</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/resolve_issues/Resolve_MLAG_Issues/">Resolve M L a G Issues</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/resolve_issues/investiage_netq_issues/Investigate_NetQ_Issues/">Investigate Net Q Issues</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/resolve_issues/methods_for_diagnosing_issues/Methods_for_Diagnosing_Network_Issues/">Methods for Diagnosing Network Issues</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/getting_started/Getting_Started_with_the_Cumulus_NetQ_Appliance/">Getting Started With the Cumulus Net Q Appliance</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/software_installation_guide/Cumulus_NetQ_Appliance_Software_Installation_Guide/">Cumulus Net Q Appliance Software Installation Guide</a>
    </li>
    
  </ul>

    </li>
    

    
  </ul>








</nav>

    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" />
  </label>
  <strong>Net Q Command Line Overview</strong>
</header>

      
<article class="markdown">

<h1 id="netq-command-line-overview">NetQ Command Line Overview</h1>

<p>The NetQ CLI provides access to all of the network state and event
information collected by the NetQ Agents. It behaves the same way most
CLIs behave, with groups of commands used to display related
information, the ability to use TAB completion when entering commands,
and to get help for given commands and options. The commands are grouped
into four categories: check and show, agent and notifier, trace, and
resolve.</p>

<p>The NetQ command line interface only runs on switches and server hosts
implemented with Intel x86 or ARM-based architectures. If you are unsure
what architecture your switch or server employs, check the Cumulus
Hardware Compatibility List and verify the value in the Platforms tab
&gt; CPU column.</p>

<h2 id="contents">Contents</h2>

<p><img src="images/icons/grey_arrow_down.png" alt="" />{.expand-control-image}This topic
describes&hellip;</p>

<ul>
<li><a href="#NetQCommandLineOverview-CLIAccess">CLI Access</a>

<ul>
<li><a href="#NetQCommandLineOverview-ComStructCommandLineStructure">Command Line
Structure</a></li>
<li><a href="#NetQCommandLineOverview-ComSyntaxCommandSyntax">Command
Syntax</a></li>
<li><a href="#NetQCommandLineOverview-ComOutCommandOutput">Command Output</a></li>
<li><a href="#NetQCommandLineOverview-ComPromptCommandPrompts">Command
Prompts</a></li>
<li><a href="#NetQCommandLineOverview-ComCompCommandCompletion">Command
Completion</a></li>
<li><a href="#NetQCommandLineOverview-ComHelpCommandHelp">Command Help</a></li>
<li><a href="#NetQCommandLineOverview-ComHistCommandHistory">Command
History</a></li>
</ul></li>
<li><a href="#NetQCommandLineOverview-CommandCategories">Command Categories</a>

<ul>
<li><a href="#NetQCommandLineOverview-ChkShCmdsCheckandShowCommands">Check and Show
Commands</a></li>
<li><a href="#NetQCommandLineOverview-AgentNotifCmdsAgentandEventNotificationCommands">Agent and Event Notification
Commands</a></li>
<li><a href="#NetQCommandLineOverview-TraceCmdTraceCommand">Trace Command</a></li>
<li><a href="#NetQCommandLineOverview-ResolveCmdResolveCommand">Resolve
Command</a></li>
</ul></li>
<li><a href="#NetQCommandLineOverview-CommandChanges">Command Changes</a>

<ul>
<li><a href="#NetQCommandLineOverview-NewCommands">New Commands</a></li>
<li><a href="#NetQCommandLineOverview-ModifiedCommands">Modified Commands</a></li>
<li><a href="#NetQCommandLineOverview-DeprecatedCommands">Deprecated
Commands</a></li>
</ul></li>
</ul>

<h2 id="cli-access">CLI Access</h2>

<p>When NetQ is installed, the CLI is also installed and enabled (refer to
the <a href="Install_NetQ">Install NetQ</a> topic). Simply log in to any network
node to access the command line. </p>

<p>To access the CLI from a switch or server:</p>

<ol>
<li><p>Log in to the device. This example uses the default username of
cumulus and a hostname of switch.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">&lt;computer&gt;:~&lt;username&gt;$ ssh cumulus@switch</code></pre></div></li>

<li><p>Enter your password to reach the command prompt. The default
password is CumulusLinux! For example:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">Enter passphrase for key &#39;/Users/&lt;username&gt;/.ssh/id_rsa&#39;: &lt;enter CumulusLinux! here&gt;
Welcome to Ubuntu 16.04.3 LTS (GNU/Linux 4.4.0-112-generic x86_64)
 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage
Last login: Tue Feb 11 09:28:12 2019 from 10.0.0.14
cumulus@switch:~$ </code></pre></div></li>

<li><p>Run commands. For example:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">&lt;username&gt;@&lt;hostname&gt;:~$ netq show agents
&lt;username&gt;@&lt;hostname&gt;:~$ netq check bgp</code></pre></div></li>
</ol>

<p>Command Line Basics</p>

<p>This section describes the core structure and behavior of the NetQ CLI.
It includes the following:</p>

<ul>
<li>Command Line Structure</li>
<li>Command Syntax</li>
<li><a href="#NetQCommandLineOverview-ComOut">Command Output</a></li>
<li><a href="#NetQCommandLineOverview-ComPrompt">Command Prompts</a> </li>
<li>Command Completion</li>
<li>Command Help </li>
<li><a href="#NetQCommandLineOverview-ComHist">Command History</a></li>
</ul>

<h3 id="command-line-structure">Command Line Structure</h3>

<p>The Cumulus NetQ command line has a flat structure as opposed to a modal
structure. This means that all commands can be run from the primary
prompt instead of only in a specific mode. For example, some command
lines require the administrator to switch between a configuration mode
and an operation mode. Configuration commands can only be run in the
configuration mode and operational commands can only be run in operation
mode. This structure requires the administrator to switch between modes
to run commands which can be tedious and time consuming. Cumulus NetQ
command line enables the administrator to run all of its commands at the
same level.</p>

<h3 id="command-syntax">Command Syntax</h3>

<p>NetQ CLI commands all begin with netq. Their basic syntax is as follows:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">netq [&lt;hostname&gt;] (check|show) &lt;object&gt; &lt;options&gt;
netq trace &lt;options&gt;
netq resolve
netq config &lt;action&gt; [&lt;options&gt;] [vrf &lt;vrf&gt;]</code></pre></div>
<table>
<thead>
<tr>
<th>Symbols</th>
<th>Meaning</th>
</tr>
</thead>

<tbody>
<tr>
<td>Parentheses ( )</td>
<td>Enter one of the objects or keywords</td>
</tr>

<tr>
<td>Square brackets [ ]</td>
<td>Optional parameter; enter keyword or keyword-value pair as needed</td>
</tr>

<tr>
<td>Angle brackets &lt; &gt;</td>
<td>Variable value for a keyword or option; required, enter according to your deployment nomenclature</td>
</tr>

<tr>
<td>Pipe |</td>
<td>Separates keyword options, also separates value options; enter one keyword and zero or one value</td>
</tr>
</tbody>
</table>

<p>For example, in the <code>netq check</code> command:</p>

<ul>
<li>[] is an optional parameter with a variable value named hostname</li>
<li>&lt;object&gt; represents a number of possible key words, such as
<em>agents, bgp, evpn,</em> and so forth</li>
<li>&lt;options&gt; represents a number of possible conditions for the
given object, such as <em>around, vrf,</em> or <em>json</em></li>
</ul>

<p>Thus some valid commands are:</p>

<ul>
<li><code>netq check agents json</code></li>
<li><code>netq show bgp</code></li>
<li><code>netq config restart agent</code></li>
</ul>

<h3 id="command-output">Command Output</h3>

<p>The command output presents results in color for many commands. Results
with errors are shown in red, and warnings are shown in yellow. Results
without errors or warnings are shown in either black or green. VTEPs are
shown in blue. A node in the <em>pretty</em> output is shown in <strong>bold</strong>, and a
router interface is wrapped in angle brackets (&lt; &gt;). To view the
output with only black text, run the <code>netq config del color</code> command.
You can view output with colors again by running
<code>netq config add color</code>.</p>

<p>All check and show commands are run with a default timeframe of now to
one hour ago, unless you specify an approximate time using the
<code>around</code> keyword. For example, running netq check bgp shows the status
of BGP over the last hour. Running netq show bgp around 3h shows the
status of BGP three hours ago.</p>

<h3 id="command-prompts">Command Prompts</h3>

<p>NetQ code examples use the following prompts:</p>

<ul>
<li><code>cumulus@switch:~$   </code>Indicates the user <em>cumulus</em> is logged in to a
switch to run the example command</li>
<li><code>cumulus@host:~$     </code>Indicates the user *cumulus* is logged in to a
host to run the example command</li>
</ul>

<p>The switches must be running the Cumulus Linux operating system (OS),
NetQ Platform software, and the NetQ Agent. The hosts must be running
CentOS, RHEL, or Ubuntu OS and NetQ Agent. Refer to the <a href="Install_NetQ">Install
NetQ</a> topic for details.</p>

<h3 id="command-completion"><strong>Command Completion</strong></h3>

<p>As you enter commands, you can get help with the valid keywords or
options using the Tab key. For example, using Tab completion with netq
check displays the possible objects for the command, and returns you to
the command prompt to complete the command.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq check &lt;&lt;press Tab&gt;&gt;
    agents      :  Netq agent
    bgp         :  BGP info
    clag        :  Cumulus Multi-chassis LAG
    evpn        :  EVPN
    interfaces  :  network interface port
    license     :  License information
    lnv         :  Lightweight Network Virtualization info
    mtu         :  Link MTU
    ntp         :  NTP
    ospf        :  OSPF info
    sensors     :  Temperature/Fan/PSU sensors
    vlan        :  VLAN
    vxlan       :  VXLAN data path
cumulus@switch:~$ netq check </code></pre></div>
<h3 id="command-help">Command Help</h3>

<p>As you enter commands, you can get help with command syntax by
entering help at various points within a command entry. For example, to
find out what options are available for a BGP check, enter help after
entering a portion of the netq check command. In this example, you can
see that there are two possible commands related to BGP checks and the
display shows the options available for each.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq check bgp help
Commands:
   netq check bgp [vrf &lt;vrf&gt;] [around &lt;text-time&gt;] [json]
cumulus@switch:~$</code></pre></div>
<p>To see an exhaustive list of commands, run:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq help list verbose</code></pre></div>
<h3 id="command-history">Command History</h3>

<p>The CLI stores commands issued within a session, which enables you to
review and rerun commands that have already been run.  At the command
prompt, press the <strong>Up Arrow</strong> and <strong>Down Arrow</strong> keys to move back and
forth through the list of commands previously entered. When you have
found a given command, you can run the command by pressing <strong>Enter</strong>,
just as you would if you had entered it manually. Optionally you can
modify the command before you run it.</p>

<h2 id="command-categories">Command Categories</h2>

<p>While the CLI has a flat structure, the commands can be conceptually
grouped into four functional categories: </p>

<ul>
<li>Check and Show Commands</li>
<li>Agent and Notifier Commands</li>
<li>Trace Command</li>
<li>Resolve Command</li>
</ul>

<h3 id="check-and-show-commands">Check and Show Commands</h3>

<p>The check and show commands enable the network administrator to view the
current and historical state of the network by manually monitoring for
errors and misconfigurations in the network. Check commands run
validation checks against various components and configured protocols
and services to determine the network is operating as expected. Show
commands present details about the current or historical configuration
and status of the various component, protocol or service.</p>

<p>Validation checks can be performed for the following:</p>

<ul>
<li>agents: NetQ Agents operation on all switches and hosts</li>
<li>bgp:  BGP (Border Gateway Protocol) operation across the network
fabric</li>
<li>clag:  Cumulus Multi-chassis LAG (link aggregation) operation</li>
<li>evpn:  EVPN (Ethernet Virtual Private Network) operation</li>
<li>interfaces:  network interface port operation</li>
<li>license:  License status</li>
<li>lnv:  Lightweight Network Virtualization operation</li>
<li>mtu:  Link MTU (maximun transmission unit) consistency across fabric</li>
<li>ntp:  NTP (Network Time Protocol) operation</li>
<li>ospf:  OSPF (Open Shortest Path First) operation</li>
<li>sensors:  Temperature/Fan/PSU sensor operation</li>
<li>vlan:  VLAN (Virtual Local Area Network) operation</li>
<li>vxlan:  VXLAN (Virtual Extensible LAN) data path operation</li>
</ul>

<p>The configuration and status can be shown for the following:</p>

<ul>
<li>agents: NetQ Agents status on switches and hosts</li>
<li>bgp:  BGP status across the network fabric</li>
<li>clag:  CLAG status</li>
<li>docker: Docker Swarm, container and network status</li>
<li>events: Display changes over time</li>
<li>evpn:  EVPN status</li>
<li>interfaces:  network interface port status</li>
<li>inventory: hardware component information</li>
<li>ip: IPv4 status</li>
<li>ipv6: IPv6 status</li>
<li>kubernetes: Kubernetes cluster, daemon, pod, node, service and
replication status</li>
<li>lldp: LLDP status</li>
<li>lnv:  Lightweight Network Virtualization status</li>
<li>macs: MAC table or address information</li>
<li>notification: Slack or PagerDuty notification configurations </li>
<li>ntp:  NTP status</li>
<li>ospf:  OSPF status</li>
<li>sensors:  Temperature/Fan/PSU sensor status</li>
<li>services: System services status</li>
<li>vlan:  VLAN status</li>
<li>vxlan:  VXLAN data path status</li>
</ul>

<p>The commands take the form of
<code>netq [&lt;hostname&gt;] (check|show) &lt;object&gt; &lt;options&gt;</code>, where the object is
one of the components, protocols, or services listed here and the
options vary according to the object. The commands can be restricted
from showing the information for <em>all</em> devices to showing information
for a selected device using the <em>hostname</em> keyword.</p>

<p>This example shows the standard and restricted output for the
<code>netq show agents</code> command. </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show agents
Matching agents records:
Hostname          Status           NTP Sync Version                              Sys Uptime                Agent Uptime              Reinitialize Time          Last Changed
----------------- ---------------- -------- ------------------------------------ ------------------------- ------------------------- -------------------------- -------------------------
leaf01            Fresh            yes      2.0.0-cl3u11~1549993210.e902a94      2h:32m:33s                2h:26m:19s                2h:26m:19s                 Tue Feb 12 18:13:28 2019
leaf02            Fresh            yes      2.0.0-cl3u11~1549993210.e902a94      2h:32m:33s                2h:26m:14s                2h:26m:14s                 Tue Feb 12 18:13:33 2019
leaf11            Fresh            yes      2.0.0-ub16.04u11~1549993314.e902a94  2h:32m:28s                2h:25m:49s                2h:25m:49s                 Tue Feb 12 18:17:32 2019
leaf12            Fresh            yes      2.0.0-rh7u11~1549992132.c42c08f      2h:32m:0s                 2h:25m:44s                2h:25m:44s                 Tue Feb 12 18:17:36 2019
leaf21            Fresh            yes      2.0.0-ub16.04u11~1549993314.e902a94  2h:32m:28s                2h:25m:39s                2h:25m:39s                 Tue Feb 12 18:17:42 2019
leaf22            Fresh            yes      2.0.0-rh7u11~1549992132.c42c08f      2h:32m:0s                 2h:25m:35s                2h:25m:35s                 Tue Feb 12 18:17:46 2019
spine01           Fresh            yes      2.0.0-cl3u11~1549993210.e902a94      2h:32m:33s                2h:27m:11s                2h:27m:11s                 Tue Feb 12 18:13:06 2019
spine02           Fresh            yes      2.0.0-cl3u11~1549993210.e902a94      2h:32m:33s                2h:27m:6s                 2h:27m:6s                  Tue Feb 12 18:13:11 2019
...
  
cumulus@switch:~$ netq show agents json
{
    &#34;agents&#34;:[
        {
            &#34;status&#34;:&#34;Fresh&#34;,
            &#34;lastChanged&#34;:1549995208.3039999008,
            &#34;reinitializeTime&#34;:1549995146.0,
            &#34;hostname&#34;:&#34;leaf01&#34;,
            &#34;version&#34;:&#34;2.0.0-cl3u11~1549993210.e902a94&#34;,
            &#34;sysUptime&#34;:1549994772.0,
            &#34;ntpSync&#34;:&#34;yes&#34;,
            &#34;agentUptime&#34;:1549995146.0
        },
        {
            &#34;status&#34;:&#34;Fresh&#34;,
            &#34;lastChanged&#34;:1549995213.3399999142,
            &#34;reinitializeTime&#34;:1549995151.0,
            &#34;hostname&#34;:&#34;leaf02&#34;,
            &#34;version&#34;:&#34;2.0.0-cl3u11~1549993210.e902a94&#34;,
            &#34;sysUptime&#34;:1549994772.0,
            &#34;ntpSync&#34;:&#34;yes&#34;,
            &#34;agentUptime&#34;:1549995151.0
        },
        {
            &#34;status&#34;:&#34;Fresh&#34;,
            &#34;lastChanged&#34;:1549995434.3559999466,
            &#34;reinitializeTime&#34;:1549995157.0,
            &#34;hostname&#34;:&#34;leaf11&#34;,
            &#34;version&#34;:&#34;2.0.0-ub16.04u11~1549993314.e902a94&#34;,
            &#34;sysUptime&#34;:1549994772.0,
            &#34;ntpSync&#34;:&#34;yes&#34;,
            &#34;agentUptime&#34;:1549995157.0
        },
        {
            &#34;status&#34;:&#34;Fresh&#34;,
            &#34;lastChanged&#34;:1549995439.3770000935,
            &#34;reinitializeTime&#34;:1549995164.0,
            &#34;hostname&#34;:&#34;leaf12&#34;,
            &#34;version&#34;:&#34;2.0.0-rh7u11~1549992132.c42c08f&#34;,
            &#34;sysUptime&#34;:1549994809.0,
            &#34;ntpSync&#34;:&#34;yes&#34;,
            &#34;agentUptime&#34;:1549995164.0
        },
        {
            &#34;status&#34;:&#34;Fresh&#34;,
            &#34;lastChanged&#34;:1549995452.6830000877,
            &#34;reinitializeTime&#34;:1549995176.0,
            &#34;hostname&#34;:&#34;leaf21&#34;,
            &#34;version&#34;:&#34;2.0.0-ub16.04u11~1549993314.e902a94&#34;,
            &#34;sysUptime&#34;:1549994777.0,
            &#34;ntpSync&#34;:&#34;yes&#34;,
            &#34;agentUptime&#34;:1549995176.0
        },
        {
            &#34;status&#34;:&#34;Fresh&#34;,
            &#34;lastChanged&#34;:1549995456.4500000477,
            &#34;reinitializeTime&#34;:1549995181.0,
            &#34;hostname&#34;:&#34;leaf22&#34;,
            &#34;version&#34;:&#34;2.0.0-rh7u11~1549992132.c42c08f&#34;,
            &#34;sysUptime&#34;:1549994805.0,
            &#34;ntpSync&#34;:&#34;yes&#34;,
            &#34;agentUptime&#34;:1549995181.0
        },
        {
            &#34;status&#34;:&#34;Fresh&#34;,
            &#34;lastChanged&#34;:1549995186.3090000153,
            &#34;reinitializeTime&#34;:1549995094.0,
            &#34;hostname&#34;:&#34;spine01&#34;,
            &#34;version&#34;:&#34;2.0.0-cl3u11~1549993210.e902a94&#34;,
            &#34;sysUptime&#34;:1549994772.0,
            &#34;ntpSync&#34;:&#34;yes&#34;,
            &#34;agentUptime&#34;:1549995094.0
        },
        {
            &#34;status&#34;:&#34;Fresh&#34;,
            &#34;lastChanged&#34;:1549995191.4530000687,
            &#34;reinitializeTime&#34;:1549995099.0,
            &#34;hostname&#34;:&#34;spine02&#34;,
            &#34;version&#34;:&#34;2.0.0-cl3u11~1549993210.e902a94&#34;,
            &#34;sysUptime&#34;:1549994772.0,
            &#34;ntpSync&#34;:&#34;yes&#34;,
            &#34;agentUptime&#34;:1549995099.0
        },
...
  
cumulus@switch:~$ netq leaf01 show agents
Matching agents records:
Hostname          Status           NTP Sync Version                              Sys Uptime                Agent Uptime              Reinitialize Time          Last Changed
----------------- ---------------- -------- ------------------------------------ ------------------------- ------------------------- -------------------------- -------------------------
leaf01            Fresh            yes      2.0.0-cl3u11~1549993210.e902a94      4h:27m:42s                4h:21m:28s                4h:21m:28s                 Tue Feb 12 18:13:28 2019</code></pre></div>
<h3 id="agent-and-event-notification-commands">Agent and Event Notification Commands</h3>

<p>The agent and notification commands enable the network administrator to
configure individual NetQ Agents and the notification application
integrations. Refer to the Cumulus NetQ Primer and Configuring Optional
NetQ Capabilities topics for details about these NetQ components.</p>

<p>The agent configuration commands enable you to add and remove agents
from switches and hosts, start and stop agent operations, add and remove
Docker and Kubernetes container monitoring, add or remove sensors, debug
the agent, and add or remove FRR (FRRouting). Commands apply to one
agent at a time, and are run from the switch or host where the NetQ
Agent resides.</p>

<p>The agent configuration commands include: </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">netq config add agent docker-monitor [poll-period &lt;text-duration-period&gt;]
netq config add agent frr-monitor [&lt;text-frr-docker-name&gt;]
netq config add agent kubernetes-monitor [poll-period &lt;text-duration-period&gt;]
netq config add agent loglevel [debug|error|info|warning]
netq config add agent sensors
netq config add agent server &lt;text-opta-ip&gt; [port &lt;text-opta-port&gt;] [vrf &lt;text-vrf-name&gt;]
 
netq config del agent docker-monitor
netq config del agent frr-monitor
netq config del agent kubernetes-monitor
netq config del agent loglevel
netq config del agent sensors
netq config del agent server
 
netq config (start|stop|status|restart) agent
netq config show agent [kubernetes-monitor|docker-monitor|loglevel|stats|sensors|frr-monitor] [json]</code></pre></div>
<p>The notification configuration commands enable you to add, remove and
show notification application integrations. The commands include:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">netq add notification channel slack &lt;text-channel-name&gt; webhook &lt;text-webhook-url&gt; [severity info|severity warning|severity error|severity debug|severity info] [tag &lt;text-slack-tag&gt;]

netq add notification channel pagerduty &lt;text-channel-name&gt; api-access-key &lt;text-api-access-key&gt; api-channel-key &lt;text-api-channel-key&gt; [severity info|severity warning|severity error|severity debug|severity info]
netq add notification channel pagerduty &lt;text-channel-name&gt; api-channel-key &lt;text-api-channel-key&gt; api-access-key &lt;text-api-access-key&gt; [severity info|severity warning|severity error|severity debug|severity info]

netq add notification filter &lt;text-filter-name&gt; [severity info|severity warning|severity error|severity debug|severity info] [rule &lt;text-rule-name-anchor&gt;] [channel &lt;text-channel-name-anchor&gt;]

netq add notification rule &lt;text-rule-name&gt; key &lt;text-rule-key&gt; value &lt;text-rule-value&gt;
netq del notification channel &lt;text-channel-name-anchor&gt;
netq del notification filter &lt;text-filter-name-anchor&gt;
netq del notification rule &lt;text-rule-name-anchor&gt;
netq show notification [channel|filter|rule] [json]</code></pre></div>
<p>Notice that the <code>netq add notification channel pagerduty</code> command is
presented twice here because the <code>api-access-key</code> and
the <code>api-channel-key</code> are not order dependent. Either can be entered
first. The rest of the syntax is the same.</p>

<h3 id="trace-command">Trace Command</h3>

<p>The trace command enables the network administrator to view the
available paths between two nodes on the network currently and at a time
in the past. You can base the trace on MAC or IP addresses, perform the
trace in only one direction or both, and view the output in one of three
formats (json, pretty, and detail). JSON output provides the output in a
JSON file format for ease of importing to other applications or
software. Pretty output lines up the paths in a pseudo-graphical manner
to help visualize multiple paths. Detail output is useful for traces
with higher hop counts where the pretty output wraps lines, making it
harder to interpret the results. The detail output displays a table with
a row for each path. The trace command also has a detailed usage example
for reference. </p>

<p>The trace command syntax is:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">netq trace &lt;mac&gt; [vlan &lt;1-4096&gt;] from (&lt;src-hostname&gt;|&lt;ip-src&gt;) [vrf &lt;vrf&gt;] [around &lt;text-time&gt;] [json|detail|pretty] [debug]
netq trace &lt;ip&gt; from (&lt;src-hostname&gt;|&lt;ip-src&gt;) [vrf &lt;vrf&gt;] [around &lt;text-time&gt;] [json|detail|pretty] [debug] </code></pre></div>
<p>Example: Running a trace based on the destination IP address,
in pretty output with a small number of resulting paths:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq trace 192.168.0.11 from Leaf04 pretty
Number of Paths: 2
Number of Paths with Errors: 0
Number of Paths with Warnings: 0
Path MTU: 9202

 Leaf04 uplink-2 -- downlink-5 Spine02 downlink-1 -- uplink-2 Leaf01 &lt;uplink-2&gt;
        uplink-1 -- downlink-5 Spine01 downlink-1 -- uplink-1 Leaf01 &lt;uplink-2&gt;</code></pre></div>
<p>Example: Running a trace based on the destination MAC address, in pretty
output with a larger number of resulting paths:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq trace A0:00:00:00:00:11 vlan 1001 from Server03 detail
Number of Paths: 6
Number of Paths with Errors: 0
Number of Paths with Warnings: 0
Path MTU: 9152

 Server03 bond1.1001 -- swp7 &lt;vlan1001&gt; Leaf02 vni: 34 swp5 -- swp4 Spine03 swp7 -- swp5 vni: 34 Leaf04 swp6 -- swp1.1001 Server03 &lt;swp1.1001&gt;
                                                       swp4 -- swp4 Spine02 swp7 -- swp4 vni: 34 Leaf04 swp6 -- swp1.1001 Server03 &lt;swp1.1001&gt;
                                                       swp3 -- swp4 Spine01 swp7 -- swp3 vni: 34 Leaf04 swp6 -- swp1.1001 Server03 &lt;swp1.1001&gt;
          bond1.1001 -- swp7 &lt;vlan1001&gt; Leaf01 vni: 34 swp5 -- swp3 Spine03 swp7 -- swp5 vni: 34 Leaf04 swp6 -- swp1.1001 Server03 &lt;swp1.1001&gt;
                                                       swp4 -- swp3 Spine02 swp7 -- swp4 vni: 34 Leaf04 swp6 -- swp1.1001 Server03 &lt;swp1.1001&gt;
                                                       swp3 -- swp3 Spine01 swp7 -- swp3 vni: 34 Leaf04 swp6 -- swp1.1001 Server03 &lt;swp1.1001&gt;</code></pre></div>
<p><strong>Example</strong>: Running a trace based on the destination IP address,
in detail output with a small number of resulting paths:</p>
<div class="highlight"><pre class="chroma"><code class="language-plain" data-lang="plain">cumulus@switch:~$ netq trace 10.0.0.130 from 10.0.0.197 detail
Number of Paths: 2
Number of Paths with Errors: 0
Number of Paths with Warnings: 0
Path MTU: 9152
Id  Hop Hostname        InPort          InVlan InTunnel              InRtrIf         InVRF           OutRtrIf        OutVRF          OutTunnel             OutPort         OutVlan
--- --- --------------- --------------- ------ --------------------- --------------- --------------- --------------- --------------- --------------------- --------------- -------
1   1   hostd-12                                                                                                                                           torbond1.1002   1002
    2   torc-12         swp8            1002                                                         vlan1002        vrf1                                  peerlink-1      1002
    3   torc-11         swp6            1002                         vlan1002        vrf1                                                                  vlan1002        1002
--- --- --------------- --------------- ------ --------------------- --------------- --------------- --------------- --------------- --------------------- --------------- -------
2   1   hostd-12                                                                                                                                           torbond1.1002   1002
    2   torc-11         swp8            1002                                                                                                               vlan1002        1002
--- --- --------------- --------------- ------ --------------------- --------------- --------------- --------------- --------------- --------------------- --------------- -------</code></pre></div>
<h3 id="resolve-command">Resolve Command</h3>

<p>The resolve command enables the network administrator to view Cumulus
Linux command results with more contextual information and colored
highlights. By piping the commands through netq resolve, the output
shows hostnames and interfaces in green, for example.</p>

<p>To show routes installed by the kernel, you would run
the <code>ip route show proto kernel</code> command:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ ip route show proto kernel
3.0.2.128/26 dev VlanA-1.103  scope link  src 3.0.2.131 
3.0.2.128/26 dev VlanA-1-103-v0  scope link  src 3.0.2.129 
3.0.2.192/26 dev VlanA-1.104  scope link  src 3.0.2.195 
3.0.2.192/26 dev VlanA-1-104-v0  scope link  src 3.0.2.193 
3.0.3.0/26 dev VlanA-1.105  scope link  src 3.0.3.3 
3.0.3.0/26 dev VlanA-1-105-v0  scope link  src 3.0.3.1 
3.0.3.64/26 dev VlanA-1.106  scope link  src 3.0.3.67 
3.0.3.64/26 dev VlanA-1-106-v0  scope link  src 3.0.3.65 
169.254.0.8/30 dev peerlink-1.4094  scope link  src 169.254.0.10 
192.168.0.0/24 dev eth0  scope link  src 192.168.0.15</code></pre></div>
<p>You can enhance the output to display the node names and interfaces by
piping the output through <code>netq resolve</code> so the output looks like this:</p>

<pre><code>cumulus@leaf01:~$ ip route show proto kernel | netq resolve
10.0.0.0/22 (multiple:) dev eth0  scope link  src 10.0.0.165 (cel-smallxp-13:eth0) 
3.0.2.128/26 ( server02 : torbond1.103 ) dev VlanA-1.103  scope link  src 3.0.2.131 ( leaf02 : VlanA-1.103 )  
3.0.2.128/26 ( server02 : torbond1.103 ) dev VlanA-1-103-v0  scope link  src 3.0.2.129 ( leaf02 : VlanA-1-103-v0 )  
3.0.2.192/26 ( leaf02 : VlanA-1-104-v0 ) dev VlanA-1.104  scope link  src 3.0.2.195 ( leaf02 : VlanA-1.104 )  
3.0.2.192/26 ( leaf02 : VlanA-1-104-v0 ) dev VlanA-1-104-v0  scope link  src 3.0.2.193 ( leaf02 : VlanA-1-104-v0 )  
3.0.3.0/26 ( server01 : torbond1.105 ) dev VlanA-1.105  scope link  src 3.0.3.3 ( leaf02 : VlanA-1.105 )  
3.0.3.0/26 ( server01 : torbond1.105 ) dev VlanA-1-105-v0  scope link  src 3.0.3.1 ( leaf02 : VlanA-1-105-v0 )  
3.0.3.64/26 ( server02 : torbond1.106 ) dev VlanA-1.106  scope link  src 3.0.3.67 ( leaf02 : VlanA-1.106 )  
3.0.3.64/26 ( server02 : torbond1.106 ) dev VlanA-1-106-v0  scope link  src 3.0.3.65 ( leaf01 : VlanA-1-106-v0 )  
169.254.0.8/30 ( leaf02 : peerlink-1.4094 ) dev peerlink-1.4094  scope link  src 169.254.0.10 ( leaf02 : peerlink-1.4094 )  
192.168.0.0/24 ( server02 : eth0 ) dev eth0  scope link  src 192.168.0.15 ( leaf01 : eth0 )
</code></pre>

<h2 id="command-changes">Command Changes</h2>

<p>A number of commands have changed in this release to accommodate the
addition of new keywords and options or to simplify their syntax.
Additionally, new commands have been added and others have been removed.
A summary of those changes is provided here.</p>

<h3 id="new-commands">New Commands</h3>

<p>The following table summarizes the new commands available with this
release.</p>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Summary</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><code>netq config (add|del) agent server </code></p></td>
<td><p>Adds or removes the NetQ Agent daemon to the network device where this command is run.</p></td>
</tr>
<tr class="even">
<td><p><code>netq config (add|del) cli server</code></p></td>
<td>Adds or removes the CLI daemon to the network device where this command is run.</td>
</tr>
<tr class="odd">
<td><code>netq config show (agent|all|cli) [json]</code></td>
<td>Displays configuration settings for the NetQ Agent, CLI, or both.</td>
</tr>
<tr class="even">
<td><p><code>netq (add|del|show) notification</code></p></td>
<td><p>Configuring integrations to third-party event notification tools, such as Pager Duty and Slack. This configuration was previously accomplished using the <code>netq config ts (add|del|show) notifier</code> commands.</p></td>
</tr>
<tr class="odd">
<td><code>netq show events</code></td>
<td>Displays events that have occurred network-wide during a given time range for a specific device, severity level, and/or network protocol or service. Previously these events were obtained through the <code>netq show changes</code> command.</td>
</tr>
</tbody>
</table>

<h3 id="modified-commands">Modified Commands</h3>

<p>The following table summarizes the commands that have been changed with
this release.</p>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>What Changed</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><code>netq &lt;hostname&gt; show * changes [between &lt;text-time&gt; and &lt;text-endtime&gt;] [around &lt;text-time&gt;] [json]</code></p></td>
<td>The changes and between options have been removed. Use <code>netq show events</code> to obtain this data.</td>
</tr>
<tr class="even">
<td><p><code>netq trace &lt;ip&gt; from (&lt;src-hostname&gt;|&lt;ip-src&gt;) [vrf &lt;vrf&gt;] [around &lt;text-time&gt;] [bidir] [json|detail|pretty] [debug]</code><br />
<code>netq trace &lt;mac&gt; [vlan &lt;1-4096&gt;] from (&lt;src-hostname&gt;|&lt;ip-src&gt;) [vrf &lt;vrf&gt;] [around &lt;text-time&gt;] [bidir] [json|detail|pretty] [debug]</code></p></td>
<td>The bidirectional option (bidir) has been deprecated. Run the command in each direction when path validation is desired for both directions.</td>
</tr>
</tbody>
</table>

<h3 id="deprecated-commands">Deprecated Commands</h3>

<p>The following table summarizes the commands that have been removed and a
recommended alternative, if appropriate.</p>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Command</th>
<th>Alternative Command</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p><code>netq config ts (add|del|show) (notifier|server)</code></p></td>
<td><p><code>netq (add|del|show) notification</code> and <code>netq config (add|del|show) (agent server|cli server)</code></p></td>
</tr>
<tr class="even">
<td><code>netq config ts (start|stop|status|restart) notifier</code></td>
<td><code>netq config (start|stop|status|restart) agent</code></td>
</tr>
<tr class="odd">
<td><code>netq config ts decommission</code></td>
<td><code>netq config del agent server</code></td>
</tr>
<tr class="even">
<td><code>netq example</code></td>
<td><code>netq help</code></td>
</tr>
<tr class="odd">
<td><code>netq-shell</code></td>
<td>The netq-shell has been removed since all NetQ commands can be run from any node where a NetQ Agent is installed.</td>
</tr>
</tbody>
</table>
</article>

      

    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#netq-command-line-overview">NetQ Command Line Overview</a>
<ul>
<li><a href="#contents">Contents</a></li>
<li><a href="#cli-access">CLI Access</a>
<ul>
<li><a href="#command-line-structure">Command Line Structure</a></li>
<li><a href="#command-syntax">Command Syntax</a></li>
<li><a href="#command-output">Command Output</a></li>
<li><a href="#command-prompts">Command Prompts</a></li>
<li><a href="#command-completion"><strong>Command Completion</strong></a></li>
<li><a href="#command-help">Command Help</a></li>
<li><a href="#command-history">Command History</a></li>
</ul></li>
<li><a href="#command-categories">Command Categories</a>
<ul>
<li><a href="#check-and-show-commands">Check and Show Commands</a></li>
<li><a href="#agent-and-event-notification-commands">Agent and Event Notification Commands</a></li>
<li><a href="#trace-command">Trace Command</a></li>
<li><a href="#resolve-command">Resolve Command</a></li>
</ul></li>
<li><a href="#command-changes">Command Changes</a>
<ul>
<li><a href="#new-commands">New Commands</a></li>
<li><a href="#modified-commands">Modified Commands</a></li>
<li><a href="#deprecated-commands">Deprecated Commands</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
