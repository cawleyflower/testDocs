<!DOCTYPE html><html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monitor Virtual Network Overlays | Cumulus Networks Documentation</title>

<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">
<link rel="stylesheet" href="/normalize.min.css">

<link rel="stylesheet" href="/book.min.50a619ce4c0e99594908d162684f42218608aa6fde2bd83cca5025d59ba535e3.css">

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<h2 class="book-brand">
  <a href="http://example.org/">Cumulus Networks Documentation</a>
</h2>



    


  
  
    
    
  
 
  <ul>
    
    <li><a href="/docs/Cumulus-Linux/">
    Cumulus Linux</a> 
  <ul>
    

    
    <li>
      <a href="/docs/Cumulus-Linux/whats-new/">What&#39;s New</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/Quick_Start_Guide/">Quick Start Guide</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Adding_and_Updating_Packages/">Adding and Updating Packages</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Installing_a_New_Cumulus_Linux_Image/">Installing a New Cumulus Linux Image</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Managing_Cumulus_Linux_Disk_Images/">Managing Cumulus Linux Disk Images</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Upgrading_Cumulus_Linux/">Upgrading Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Using_Snapshots/">Using Snapshots</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Zero_Touch_Provisioning_-_ZTP/">Zero Touch Provisioning Z T P</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/system-config/Network_Command_Line_Utility_-_NCLU/">Network Command Line Utility N C L U</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/system-config/Setting_Date_and_Time/">Setting Date and Time</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/docs/NetQ/">
    Net Q</a> 
  <ul>
    
    <li><a href="/docs/NetQ/deployment_guide/">
    Deployment Guide</a> 
  <ul>
    

    
    <li>
      <a href="/docs/NetQ/deployment_guide/config_optional_netq/Configuring_Optional_NetQ_Capabilities/">Configuring Optional Net Q Capabilities</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/deployment_preface/Deployment_Preface/">Deployment Preface</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/install_netq/Install_NetQ/">Install Net Q</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/maintain_netq/Maintain_NetQ/">Maintain Net Q</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/netq_primer/Cumulus_NetQ_Primer/">Cumulus Net Q Primer</a>
    </li>
    
  </ul>

    </li>
    

    
    <li>
      <a href="/docs/NetQ/Cumulus_NetQ_CLI_User_Guide/">Cumulus Net Q C L I User Guide</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/Release_Notes/Cumulus_NetQ_2.0_Release_Notes/">Cumulus Net Q 2.0 Release Notes</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/Cumulus_NetQ_UI_User_Guide/">Cumulus Net Q U I User Guide</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_switches/Monitor_Switches/">Monitor Switches</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/Monitor_the_Network/">Monitor the Network</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/monitor_alarm_events/Monitor_Alarm_Events/">Monitor Alarm Events</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/monitor_informational_events/Monitor_Informational_Events/">Monitor Informational Events</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/monitor_network_health/Monitor_Network_Health/">Monitor Network Health</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/monitor_network_inventory/Monitor_Network_Inventory/">Monitor Network Inventory</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/monitor_the_network/monitor_network_protocols/Monitor_Network_Layer_Protocols/">Monitor Network Layer Protocols</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/netq_ui_overview/NetQ_User_Interface_Overview/">Net Q User Interface Overview</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/UI_User_Guide/ui_preface/UI_Preface/">U I Preface</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/CLI_Preface/CLI_Preface/">C L I Preface</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/automate_common_tasks/Automate_Common_and_Repetitive_Tasks/">Automate Common and Repetitive Tasks</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/command_line_overview/NetQ_Command_Line_Overview/">Net Q Command Line Overview</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_containter_environments/Monitor_Container_Environments/">Monitor Container Environments</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_data_link_layer/Monitor_Data_Link_Layer_Devices_and_Protocols/">Monitor Data Link Layer Devices and Protocols</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_linux_hosts/Monitor_Linux_Hosts/">Monitor Linux Hosts</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_network_health/Monitor_Overall_Network_Health/">Monitor Overall Network Health</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_network_layer/Monitor_Network_Protocols_and_Services/">Monitor Network Protocols and Services</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_physical_layer/Monitor_Physical_Layer_Components/">Monitor Physical Layer Components</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_switch_hardware/Monitor_Switch_Hardware_and_Software/">Monitor Switch Hardware and Software</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/monitor_virtual_overlays/Monitor_Virtual_Network_Overlays/" class="active">Monitor Virtual Network Overlays</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/resolve_issues/Resolve_Issues/">Resolve Issues</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/resolve_issues/Resolve_MLAG_Issues/">Resolve M L a G Issues</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/resolve_issues/investiage_netq_issues/Investigate_NetQ_Issues/">Investigate Net Q Issues</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/cli_user_guide/resolve_issues/methods_for_diagnosing_issues/Methods_for_Diagnosing_Network_Issues/">Methods for Diagnosing Network Issues</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/getting_started/Getting_Started_with_the_Cumulus_NetQ_Appliance/">Getting Started With the Cumulus Net Q Appliance</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/software_installation_guide/Cumulus_NetQ_Appliance_Software_Installation_Guide/">Cumulus Net Q Appliance Software Installation Guide</a>
    </li>
    
  </ul>

    </li>
    

    
  </ul>








</nav>

    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" />
  </label>
  <strong>Monitor Virtual Network Overlays</strong>
</header>

      
<article class="markdown">

<h1 id="monitor-virtual-network-overlays">Monitor Virtual Network Overlays</h1>

<p>With NetQ, a network administrator can monitor virtual network
components in the data center, including VXLAN, EVPN, and LNV software
constructs. NetQ provides the ability to: </p>

<ul>
<li>Manage virtual constructs: view the performance and status of
VXLANs, EVPN, and LNV</li>
<li>Validate overlay communication paths</li>
</ul>

<p>It helps answer questions such as:</p>

<ul>
<li><p>Is my overlay configured and operating correctly?</p></li>

<li><p>Is my control plane configured correctly?</p></li>

<li><p>Can device A reach device B?</p></li>
</ul>

<h2 id="contents">Contents</h2>

<p><img src="images/icons/grey_arrow_down.png" alt="" />{.expand-control-image}This topic
describes how to&hellip;</p>

<ul>
<li><a href="#MonitorVirtualNetworkOverlays-MonitorVirtualExtensibleLANs">Monitor Virtual Extensible
LANs</a>

<ul>
<li><a href="#MonitorVirtualNetworkOverlays-ViewAllVXLANsinYourNetwork">View All VXLANs in Your
Network</a></li>
<li><a href="#MonitorVirtualNetworkOverlays-ViewtheInterfacesAssociatedwithVXLANs">View the Interfaces Associated with
VXLANs</a></li>
</ul></li>
<li><a href="#MonitorVirtualNetworkOverlays-MonitorEVPN">Monitor EVPN</a>

<ul>
<li><a href="#MonitorVirtualNetworkOverlays-ViewtheStatusofEVPN">View the Status of
EVPN</a></li>
<li><a href="#MonitorVirtualNetworkOverlays-ViewtheStatusofEVPNforaGivenVNI">View the Status of EVPN for a Given
VNI</a></li>
<li><a href="#MonitorVirtualNetworkOverlays-ViewEVPNEvents">View EVPN
Events</a></li>
</ul></li>
<li><a href="#MonitorVirtualNetworkOverlays-MonitorLNV">Monitor LNV</a>

<ul>
<li><a href="#MonitorVirtualNetworkOverlays-ViewLNVStatus">View LNV Status</a></li>
<li><a href="#MonitorVirtualNetworkOverlays-ViewLNVStatusinthePast">View LNV Status in the
Past</a></li>
</ul></li>
</ul>

<h2 id="monitor-virtual-extensible-lans">Monitor Virtual Extensible LANs</h2>

<p>Virtual Extensible LANs (VXLANs) provide a way to create a virtual
network on top of layer 2 and layer 3 technologies. It is intended for
organizations, such as data centers, that require larger scale without
additional infrastructure and more flexibility than is available with
existing infrastructure equipment. With NetQ, you can monitor the
current and historical configuration and status of your VXLANs using the
following command:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">netq show interfaces type vxlan [state &lt;remote-interface-state&gt;] [around &lt;text-time&gt;] [json]
netq &lt;hostname&gt; show interfaces type vxlan [state &lt;remote-interface-state&gt;] [around &lt;text-time&gt;] [count] [json]netq [&lt;hostname&gt;] show vxlan [vni &lt;text-vni&gt;] [around &lt;text-time&gt;] [json]
netq [&lt;hostname&gt;] show events [level info|level error|level warning|level critical|level debug] type vxlan [between &lt;text-time&gt; and &lt;text-endtime&gt;] [json]</code></pre></div>
<p>When entering a time value, you must include a numeric value *and* the
unit of measure:</p>

<ul>
<li>d: day(s)</li>
<li>h: hour(s)</li>
<li>m: minute(s)</li>
<li>s: second(s)</li>
<li>now</li>
</ul>

<p>For time ranges, the <code>&lt;text-time&gt;</code> is the most recent time and
the <code>&lt;text-endtime&gt;</code> is the oldest time. The values do not have to have
the same unit of measure.</p>

<h3 id="view-all-vxlans-in-your-network">View All VXLANs in Your Network</h3>

<p>You can view a list of configured VXLANs for all devices, including the
VNI (VXLAN network identifier), protocol, address of associated VTEPs
(VXLAN tunnel endpoint), replication list, and the last time it was
changed. You can also view VXLAN information for a given device by
adding a hostname to the <code>show</code> command.  You can filter the results by
VNI.</p>

<p>This example shows all configured VXLANs across the network. In this
network, there are three VNIs (13, 24, and 104001) associated with three
VLANs (13, 24, 4001), EVPN is the virtual protocol deployed, and the
configuration was last changed around 23 hours ago.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show vxlan
Matching vxlan records:
Hostname          VNI        Protoc VTEP IP          VLAN   Replication List                    Last Changed
                             ol
----------------- ---------- ------ ---------------- ------ ----------------------------------- -------------------------
exit01            104001     EVPN   10.0.0.41        4001                                       Fri Feb  8 01:35:49 2019
exit02            104001     EVPN   10.0.0.42        4001                                       Fri Feb  8 01:35:49 2019
leaf01            13         EVPN   10.0.0.112       13     10.0.0.134(leaf04, leaf03)          Fri Feb  8 01:35:49 2019
leaf01            24         EVPN   10.0.0.112       24     10.0.0.134(leaf04, leaf03)          Fri Feb  8 01:35:49 2019
leaf01            104001     EVPN   10.0.0.112       4001                                       Fri Feb  8 01:35:49 2019
leaf02            13         EVPN   10.0.0.112       13     10.0.0.134(leaf04, leaf03)          Fri Feb  8 01:35:49 2019
leaf02            24         EVPN   10.0.0.112       24     10.0.0.134(leaf04, leaf03)          Fri Feb  8 01:35:49 2019
leaf02            104001     EVPN   10.0.0.112       4001                                       Fri Feb  8 01:35:49 2019
leaf03            13         EVPN   10.0.0.134       13     10.0.0.112(leaf02, leaf01)          Fri Feb  8 01:35:49 2019
leaf03            24         EVPN   10.0.0.134       24     10.0.0.112(leaf02, leaf01)          Fri Feb  8 01:35:49 2019
leaf03            104001     EVPN   10.0.0.134       4001                                       Fri Feb  8 01:35:49 2019
leaf04            13         EVPN   10.0.0.134       13     10.0.0.112(leaf02, leaf01)          Fri Feb  8 01:35:49 2019
leaf04            24         EVPN   10.0.0.134       24     10.0.0.112(leaf02, leaf01)          Fri Feb  8 01:35:49 2019
leaf04            104001     EVPN   10.0.0.134       4001                                       Fri Feb  8 01:35:49 2019</code></pre></div>
<p>This example shows the events and configuration changes that have
occurred on the VXLANs in your network in the last 24 hours. In this
case, the EVPN configuration was added to each of the devices in the
last 24 hours.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show events type vxlan between now and 24h
Matching vxlan records:
Hostname          VNI        Protoc VTEP IP          VLAN   Replication List                    DB State   Last Changed
                             ol
----------------- ---------- ------ ---------------- ------ ----------------------------------- ---------- -------------------------
exit02            104001     EVPN   10.0.0.42        4001                                       Add        Fri Feb  8 01:35:49 2019
exit02            104001     EVPN   10.0.0.42        4001                                       Add        Fri Feb  8 01:35:49 2019
exit02            104001     EVPN   10.0.0.42        4001                                       Add        Fri Feb  8 01:35:49 2019
exit02            104001     EVPN   10.0.0.42        4001                                       Add        Fri Feb  8 01:35:49 2019
exit02            104001     EVPN   10.0.0.42        4001                                       Add        Fri Feb  8 01:35:49 2019
exit02            104001     EVPN   10.0.0.42        4001                                       Add        Fri Feb  8 01:35:49 2019
exit02            104001     EVPN   10.0.0.42        4001                                       Add        Fri Feb  8 01:35:49 2019
exit01            104001     EVPN   10.0.0.41        4001                                       Add        Fri Feb  8 01:35:49 2019
exit01            104001     EVPN   10.0.0.41        4001                                       Add        Fri Feb  8 01:35:49 2019
exit01            104001     EVPN   10.0.0.41        4001                                       Add        Fri Feb  8 01:35:49 2019
exit01            104001     EVPN   10.0.0.41        4001                                       Add        Fri Feb  8 01:35:49 2019
exit01            104001     EVPN   10.0.0.41        4001                                       Add        Fri Feb  8 01:35:49 2019
exit01            104001     EVPN   10.0.0.41        4001                                       Add        Fri Feb  8 01:35:49 2019
exit01            104001     EVPN   10.0.0.41        4001                                       Add        Fri Feb  8 01:35:49 2019
exit01            104001     EVPN   10.0.0.41        4001                                       Add        Fri Feb  8 01:35:49 2019
leaf04            104001     EVPN   10.0.0.134       4001                                       Add        Fri Feb  8 01:35:49 2019
leaf04            104001     EVPN   10.0.0.134       4001                                       Add        Fri Feb  8 01:35:49 2019
leaf04            104001     EVPN   10.0.0.134       4001                                       Add        Fri Feb  8 01:35:49 2019
leaf04            104001     EVPN   10.0.0.134       4001                                       Add        Fri Feb  8 01:35:49 2019
leaf04            104001     EVPN   10.0.0.134       4001                                       Add        Fri Feb  8 01:35:49 2019
leaf04            104001     EVPN   10.0.0.134       4001                                       Add        Fri Feb  8 01:35:49 2019
leaf04            104001     EVPN   10.0.0.134       4001                                       Add        Fri Feb  8 01:35:49 2019
leaf04            13         EVPN   10.0.0.134       13     10.0.0.112()                        Add        Fri Feb  8 01:35:49 2019
leaf04            13         EVPN   10.0.0.134       13     10.0.0.112()                        Add        Fri Feb  8 01:35:49 2019
leaf04            13         EVPN   10.0.0.134       13     10.0.0.112()                        Add        Fri Feb  8 01:35:49 2019
leaf04            13         EVPN   10.0.0.134       13     10.0.0.112()                        Add        Fri Feb  8 01:35:49 2019
leaf04            13         EVPN   10.0.0.134       13     10.0.0.112()                        Add        Fri Feb  8 01:35:49 2019
leaf04            13         EVPN   10.0.0.134       13     10.0.0.112()                        Add        Fri Feb  8 01:35:49 2019
leaf04            13         EVPN   10.0.0.134       13     10.0.0.112()                        Add        Fri Feb  8 01:35:49 2019
...</code></pre></div>
<p>Consequently, if you looked for the VXLAN configuration and status for
last week, you would find either another configuration or no
configuration. This example shows that no VXLAN configuration was
present.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show vxlan around 7d

No matching vxlan records found</code></pre></div>
<p>You can filter the list of VXLANs to view only those associated with a
particular VNI. This example shows the configured VXLANs for <em>VNI 24</em>.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show vxlan vni 24
Matching vxlan records:
Hostname          VNI        Protoc VTEP IP          VLAN   Replication List                    Last Changed
                             ol
----------------- ---------- ------ ---------------- ------ ----------------------------------- -------------------------
leaf01            24         EVPN   10.0.0.112       24     10.0.0.134(leaf04, leaf03)          Fri Feb  8 01:35:49 2019
leaf02            24         EVPN   10.0.0.112       24     10.0.0.134(leaf04, leaf03)          Fri Feb  8 01:35:49 2019
leaf03            24         EVPN   10.0.0.134       24     10.0.0.112(leaf02, leaf01)          Fri Feb  8 01:35:49 2019
leaf04            24         EVPN   10.0.0.134       24     10.0.0.112(leaf02, leaf01)          Fri Feb  8 01:35:49 2019</code></pre></div>
<h3 id="view-the-interfaces-associated-with-vxlans">View the Interfaces Associated with VXLANs</h3>

<p>You can view detailed information about the VXLAN interfaces using the
<code>netq show interface</code> command. You can also view this information for a
given device by adding a hostname to the <code>show</code> command. This example
shows the detailed VXLAN interface information for the leaf02 switch.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq leaf02 show interfaces type vxlan 
Matching link records:
Hostname          Interface                 Type             State      VRF             Details                             Last Changed
----------------- ------------------------- ---------------- ---------- --------------- ----------------------------------- -------------------------
leaf02            vni13                     vxlan            up         default         VNI: 13, PVID: 13, Master: bridge,  Fri Feb  8 01:35:49 2019
                                                                                        VTEP: 10.0.0.112, MTU: 9000
leaf02            vni24                     vxlan            up         default         VNI: 24, PVID: 24, Master: bridge,  Fri Feb  8 01:35:49 2019
                                                                                        VTEP: 10.0.0.112, MTU: 9000
leaf02            vxlan4001                 vxlan            up         default         VNI: 104001, PVID: 4001,            Fri Feb  8 01:35:49 2019
                                                                                        Master: bridge, VTEP: 10.0.0.112,
                                                                                        MTU: 1500</code></pre></div>
<h2 id="monitor-evpn">Monitor EVPN</h2>

<p>EVPN (Ethernet Virtual Private Network) enables network administrators
in the data center to deploy a virtual layer 2 bridge overlay on top of
layer 3 IP networks creating access, or tunnel, between two locations.
This connects devices in different layer 2 domains or sites running
VXLANs and their associated underlays. With NetQ, you can monitor the
configuration and status of the EVPN setup using the <code>netq show evpn</code>
command. You can filter the EVPN information by a VNI (VXLAN network
identifier), and view the current information or for a time in the
past.  The command also enables visibility into changes that have
occurred in the configuration during a specific timeframe. The syntax
for the command is:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">netq [&lt;hostname&gt;] show evpn [vni &lt;text-vni&gt;] [around &lt;text-time&gt;] [json]
netq [&lt;hostname&gt;] show events [level info|level error|level warning|level critical|level debug] type vxlan [between &lt;text-time&gt; and &lt;text-endtime&gt;] [json]</code></pre></div>
<p>When entering a time value, you must include a numeric value *and* the
unit of measure:</p>

<ul>
<li>d: day(s)</li>
<li>h: hour(s)</li>
<li>m: minute(s)</li>
<li>s: second(s)</li>
<li>now</li>
</ul>

<p>For time ranges, the <code>&lt;text-time&gt;</code> is the most recent time and
the <code>&lt;text-endtime&gt;</code> is the oldest time. The values do not have to have
the same unit of measure.</p>

<p>For more information about and configuration of EVPN in your data
center, refer to the <a href="https://docs.cumulusnetworks.com/display/DOCS/Ethernet+Virtual+Private+Network+-+EVPN">Cumulus Linux
EVPN</a>
topic.</p>

<h3 id="view-the-status-of-evpn">View the Status of EVPN</h3>

<p>You can view the configuration and status of your EVPN overlay across
your network or for a particular device. This example shows the
configuration and status for all devices, including the associated VNI,
VTEP address, the import and export route (showing the BGP ASN and VNI
path), and the last time a change was made for each device running EVPN.
Use the <em>hostname</em> variable to view the configuration and status for a
single device.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show evpn
Matching evpn records:
Hostname          VNI        VTEP IP          In Kernel Export RT        Import RT        Last Changed
----------------- ---------- ---------------- --------- ---------------- ---------------- -------------------------
leaf01            33         27.0.0.22        yes       197:33           197:33           Fri Feb  8 01:48:27 2019
leaf01            34         27.0.0.22        yes       197:34           197:34           Fri Feb  8 01:48:27 2019
leaf01            35         27.0.0.22        yes       197:35           197:35           Fri Feb  8 01:48:27 2019
leaf01            36         27.0.0.22        yes       197:36           197:36           Fri Feb  8 01:48:27 2019
leaf01            37         27.0.0.22        yes       197:37           197:37           Fri Feb  8 01:48:27 2019
leaf01            38         27.0.0.22        yes       197:38           197:38           Fri Feb  8 01:48:27 2019
leaf01            39         27.0.0.22        yes       197:39           197:39           Fri Feb  8 01:48:27 2019
leaf01            40         27.0.0.22        yes       197:40           197:40           Fri Feb  8 01:48:27 2019
leaf01            41         27.0.0.22        yes       197:41           197:41           Fri Feb  8 01:48:27 2019
leaf01            42         27.0.0.22        yes       197:42           197:42           Fri Feb  8 01:48:27 2019
leaf02            33         27.0.0.23        yes       198:33           198:33           Thu Feb  7 18:31:41 2019
leaf02            34         27.0.0.23        yes       198:34           198:34           Thu Feb  7 18:31:41 2019
leaf02            35         27.0.0.23        yes       198:35           198:35           Thu Feb  7 18:31:41 2019
leaf02            36         27.0.0.23        yes       198:36           198:36           Thu Feb  7 18:31:41 2019
leaf02            37         27.0.0.23        yes       198:37           198:37           Thu Feb  7 18:31:41 2019
leaf02            38         27.0.0.23        yes       198:38           198:38           Thu Feb  7 18:31:41 2019
leaf02            39         27.0.0.23        yes       198:39           198:39           Thu Feb  7 18:31:41 2019
leaf02            40         27.0.0.23        yes       198:40           198:40           Thu Feb  7 18:31:41 2019
leaf02            41         27.0.0.23        yes       198:41           198:41           Thu Feb  7 18:31:41 2019
leaf02            42         27.0.0.23        yes       198:42           198:42           Thu Feb  7 18:31:41 2019
...</code></pre></div>
<h3 id="view-the-status-of-evpn-for-a-given-vni">View the Status of EVPN for a Given VNI</h3>

<p>You can filter the full device view to focus on a single VNI. This
example only shows the EVPN configuration and status for VNI 42.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show evpn vni 42
Matching evpn records:
Hostname          VNI        VTEP IP          In Kernel Export RT        Import RT        Last Changed
----------------- ---------- ---------------- --------- ---------------- ---------------- -------------------------
leaf01            42         27.0.0.22        yes       197:42           197:42           Thu Feb 14 00:48:24 2019
leaf02            42         27.0.0.23        yes       198:42           198:42           Wed Feb 13 18:14:49 2019
leaf11            42         36.0.0.24        yes       199:42           199:42           Wed Feb 13 18:14:22 2019
leaf12            42         36.0.0.24        yes       200:42           200:42           Wed Feb 13 18:14:27 2019
leaf21            42         36.0.0.26        yes       201:42           201:42           Wed Feb 13 18:14:33 2019
leaf22            42         36.0.0.26        yes       202:42           202:42           Wed Feb 13 18:14:37 2019</code></pre></div>
<h3 id="view-evpn-events">View EVPN Events</h3>

<p>You can view status and configuration change events for the EVPN
protocol service using the <code>netq show events</code> command. This example
shows the events that have occurred in the last 48 hours.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:/$ netq show events type evpn between now and 48h
Matching events records:
Hostname          Message Type Severity Message                             Timestamp
----------------- ------------ -------- ----------------------------------- -------------------------
torc-21           evpn         info     VNI 33 state changed from down to u 1d:8h:16m:29s
                                        p
torc-12           evpn         info     VNI 41 state changed from down to u 1d:8h:16m:35s
                                        p
torc-11           evpn         info     VNI 39 state changed from down to u 1d:8h:16m:41s
                                        p
tor-1             evpn         info     VNI 37 state changed from down to u 1d:8h:16m:47s
                                        p
tor-2             evpn         info     VNI 42 state changed from down to u 1d:8h:16m:51s
                                        p
torc-22           evpn         info     VNI 39 state changed from down to u 1d:8h:17m:40s
                                        p
...</code></pre></div>
<h2 id="monitor-lnv">Monitor LNV</h2>

<p>Lightweight Network Virtualization (LNV) is a technique for
deploying <a href="https://docs.cumulusnetworks.com/display/DRAFT37/Network+Virtualization">VXLANs</a> without
a central controller on bare metal switches. LNV enables data center
network administrators and operators to create a data path between
bridges on top of a layer 3 fabric. With NetQ, you can monitor the
configuration and status of the LNV setup using
the <code>netq show lnv</code> command. You can view the current information or for
a time in the past.  The command also enables visibility into changes
that have occurred in the configuration during a specific timeframe. The
syntax for the command is:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">netq [&lt;hostname&gt;] show lnv [around &lt;text-time&gt;] [json]
netq [&lt;hostname&gt;] show events [level info|level error|level warning|level critical|level debug] type lnv [between &lt;text-time&gt; and &lt;text-endtime&gt;] [json]</code></pre></div>
<h3 id="view-lnv-status">View LNV Status</h3>

<p>You can view the configuration and status of your LNV overlay across
your network or for a particular device. This example shows the
configuration and status of LNV across the network, including the role
each node plays, replication mode, number of peers and VNIs, and the
last time the configuration was changed.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show lnv
Matching LNV session records are:
Hostname          Role       ReplMode State      #Peers #VNIs  Last Changed
----------------- ---------- -------- ---------- ------ ------ -------------------------
spine01           SND        HER      up         3      6      Thu Feb  7 18:31:31 2019
spine02           SND        HER      up         3      6      Thu Feb  7 18:31:31 2019
spine03           SND        HER      up         3      6      Thu Feb  7 18:31:31 2019
leaf01            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019
leaf02            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019
leaf11            RD         HER      up         0      0      Thu Feb  7 18:31:31 2019
leaf12            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019
leaf21            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019
leaf22            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019</code></pre></div>
<h3 id="view-lnv-status-in-the-past">View LNV Status in the Past</h3>

<p>You can view the status in the past using the <code>around</code> keyword. This
example shows the status of LNV about 30 minutes ago.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq show lnv around 30m
Matching LNV session records are:
Hostname          Role       ReplMode State      #Peers #VNIs  Last Changed
----------------- ---------- -------- ---------- ------ ------ -------------------------
spine01           SND        HER      up         3      6      Thu Feb  7 18:31:31 2019
spine02           SND        HER      up         3      6      Thu Feb  7 18:31:31 2019
spine03           SND        HER      up         3      6      Thu Feb  7 18:31:31 2019
leaf01            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019
leaf02            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019
leaf11            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019
leaf12            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019
leaf21            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019
leaf22            RD         HER      up         4      6      Thu Feb  7 18:31:31 2019</code></pre></div>
<p>For more information about and configuration of LNV, refer to the
<a href="https://docs.cumulusnetworks.com/display/DRAFT37/Lightweight+Network+Virtualization+Overview">Cumulus Linux LNV
Overview</a>
topic.</p>
</article>

      

    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#monitor-virtual-network-overlays">Monitor Virtual Network Overlays</a>
<ul>
<li><a href="#contents">Contents</a></li>
<li><a href="#monitor-virtual-extensible-lans">Monitor Virtual Extensible LANs</a>
<ul>
<li><a href="#view-all-vxlans-in-your-network">View All VXLANs in Your Network</a></li>
<li><a href="#view-the-interfaces-associated-with-vxlans">View the Interfaces Associated with VXLANs</a></li>
</ul></li>
<li><a href="#monitor-evpn">Monitor EVPN</a>
<ul>
<li><a href="#view-the-status-of-evpn">View the Status of EVPN</a></li>
<li><a href="#view-the-status-of-evpn-for-a-given-vni">View the Status of EVPN for a Given VNI</a></li>
<li><a href="#view-evpn-events">View EVPN Events</a></li>
</ul></li>
<li><a href="#monitor-lnv">Monitor LNV</a>
<ul>
<li><a href="#view-lnv-status">View LNV Status</a></li>
<li><a href="#view-lnv-status-in-the-past">View LNV Status in the Past</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
