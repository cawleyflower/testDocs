<!DOCTYPE html><html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Install Net Q | Cumulus Networks Documentation</title>

<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">
<link rel="stylesheet" href="/normalize.min.css">

<link rel="stylesheet" href="/book.min.8554ed604dddec424129c0ae95ae196de13a903ee7ad66cc3ac2e4c33a935597.css">

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<h2 class="book-brand">
  <a href="http://example.org/">Cumulus Networks Documentation</a>
</h2>



    


  
  
    
    
  
 
  <ul>
    
    <li><a href="/docs/Cumulus-Linux/">
    Cumulus Linux</a> 
  <ul>
    

    
    <li>
      <a href="/docs/Cumulus-Linux/whats-new/">What&#39;s New</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/Quick_Start_Guide/">Quick Start Guide</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Adding_and_Updating_Packages/">Adding and Updating Packages</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Installing_a_New_Cumulus_Linux_Image/">Installing a New Cumulus Linux Image</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Managing_Cumulus_Linux_Disk_Images/">Managing Cumulus Linux Disk Images</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Upgrading_Cumulus_Linux/">Upgrading Cumulus Linux</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Using_Snapshots/">Using Snapshots</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/installation-management/Zero_Touch_Provisioning_-_ZTP/">Zero Touch Provisioning Z T P</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/system-config/Network_Command_Line_Utility_-_NCLU/">Network Command Line Utility N C L U</a>
    </li>
    
    <li>
      <a href="/docs/Cumulus-Linux/system-config/Setting_Date_and_Time/">Setting Date and Time</a>
    </li>
    
  </ul>

    </li>
    
    <li><a href="/docs/NetQ/">
    Net Q</a> 
  <ul>
    

    
    <li>
      <a href="/docs/NetQ/deployment_guide/Cumulus_NetQ_Deployment_Guide/">Cumulus Net Q Deployment Guide</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/config_optional_netq/Configuring_Optional_NetQ_Capabilities/">Configuring Optional Net Q Capabilities</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/deployment_preface/Deployment_Preface/">Deployment Preface</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/install_netq/Install_NetQ/" class="active">Install Net Q</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/maintain_netq/Maintain_NetQ/">Maintain Net Q</a>
    </li>
    
    <li>
      <a href="/docs/NetQ/deployment_guide/netq_primer/Cumulus_NetQ_Primer/">Cumulus Net Q Primer</a>
    </li>
    
  </ul>

    </li>
    

    
  </ul>








</nav>
    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" />
  </label>
  <strong>Install Net Q</strong>
</header>

      
<article class="markdown">

<h1 id="install-netq">Install NetQ</h1>

<p>If you have purchased a NetQ Appliance, the only installation steps
required are to load the NetQ Agent on any host you want to monitor. If
you already have a Cumulus Linux switch and you want to add NetQ
functionality to it, installation involves verifying your server meets
the hardware and software requirements, loading the software onto the
switch, and then loading the agent on the hosts.</p>

<h2 id="contents">Contents</h2>

<p><img src="images/icons/grey_arrow_down.png" alt="" />{.expand-control-image}This topic
describes&hellip;</p>

<ul>
<li><a href="#InstallNetQ-Prerequisites">Prerequisites</a>

<ul>
<li><a href="#InstallNetQ-hwspecHardwareRequirements">Hardware Requirements</a></li>
<li><a href="#InstallNetQ-OperatingSystemRequirements">Operating System
Requirements</a></li>
<li><a href="#InstallNetQ-NetQApplicationSupport">NetQ Application Support</a></li>
</ul></li>
<li><a href="#InstallNetQ-InstallWorkflow">Install Workflow</a></li>
<li><a href="#InstallNetQ-InstalltheNetQPlatform">Install the NetQ Platform</a></li>
<li><a href="#InstallNetQ-agentInstalltheNetQAgent">Install the NetQ Agent</a>

<ul>
<li><a href="#InstallNetQ-AgentCLInstallNetQAgentonaCumulusLinuxSwitch">Install NetQ Agent on a Cumulus Linux
Switch</a></li>
<li><a href="#InstallNetQ-AgentUbuntuInstallNetQAgentonanUbuntuServer(Optional)">Install NetQ Agent on an Ubuntu Server
(Optional)</a></li>
<li><a href="#InstallNetQ-AgentRHCInstallNetQAgentonaRedHatorCentOSServer(Optional)">Install NetQ Agent on a Red Hat or CentOS Server
(Optional)</a></li>
</ul></li>
<li><a href="#InstallNetQ-SetUptheNetQAgents">Set Up the NetQ Agents</a>

<ul>
<li><a href="#InstallNetQ-BasicConfiguration">Basic Configuration </a></li>
<li><a href="#InstallNetQ-AgentVRFConfiguretheAgenttoUseaVRF(Optional)">Configure the Agent to Use a VRF
(Optional)</a></li>
<li><a href="#InstallNetQ-portConfiguretheAgenttoCommunicateoveraSpecificPort(Optional)">Configure the Agent to Communicate over a Specific Port
(Optional)</a></li>
<li><a href="#InstallNetQ-AgentDockerEnablingDockerforContainerEnvironments">Enabling Docker for Container
Environments</a></li>
</ul></li>
<li><a href="#InstallNetQ-EvntNotifIntIntegratewithEventNotificationTools">Integrate with Event Notification
Tools</a></li>
<li><a href="#InstallNetQ-SetUpSecurity">Set Up Security</a></li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<h3 id="hardware-requirements">Hardware Requirements</h3>

<p>NetQ is supported on the NetQ Appliance and a variety of other hardware.
Refer to the <a href="https://cumulusnetworks.com/products/hardware-compatibility-list/">Cumulus Hardware Compatibility
List</a>
for the hardware supported and descriptions of the available options. In
all cases, the NetQ software requires eight (8) virtual CPUs, 64 GB of
memory, and a 256 GB SSD.</p>

<h3 id="operating-system-requirements">Operating System Requirements</h3>

<p>NetQ 2.0.0 is supported on the following operating systems:</p>

<ul>
<li>Cumulus Linux 3.7.0 and later</li>
<li>Ubuntu 16.04</li>
<li>Red Hat<sup>®</sup> Enterprise Linux (RHEL) 7.1</li>
<li>CentOS 7</li>
</ul>

<h3 id="netq-application-support">NetQ Application Support</h3>

<ul>
<li>NetQ CLI is supported on NetQ 1.0 and later.</li>
<li>NetQ UI is supported on NetQ 2.0.</li>
<li>RESTful API is supported on NetQ 2.0.</li>
</ul>

<h2 id="install-workflow">Install Workflow</h2>

<p>Installation of NetQ involves installing the NetQ Platform, and
installing and configuring the NetQ Agents. Additional steps are needed
to Integrate NetQ with Event Notification Applications. This flow chart
shows the steps to install and setup NetQ to start validating your
network.</p>

<p><img src="attachments/8365372/9012820.png" alt="" />{width=&ldquo;650&rdquo;}</p>

<h2 id="install-the-netq-platform">Install the NetQ Platform</h2>

<p>If you <em>are</em> <em>not</em> using the NetQ Appliance, you must install the NetQ
Platform on your selected hardware. If you have deployed the NetQ
Appliance, you can skip to <a href="#InstallNetQ-agent">Install NetQ Agent</a>.</p>

<p>The NetQ Platform is comprised of the following components:</p>

<ul>
<li><strong>NetQ application</strong>: network monitoring and analytics functionality</li>
<li><strong>NetQ CLI</strong>: command line user interface for monitoring network and
administering NetQ through a terminal session</li>
<li><strong>NetQ UI</strong>: graphical interface for monitoring network and
administering NetQ</li>
<li><strong>NetQ API</strong>: Restful application programming interface for
accessing NetQ data and integrating with third-party tools</li>
<li><strong>Authorization</strong>: secure access functionality</li>
</ul>

<p>The server is available in one of two formats:</p>

<ul>
<li>Virtual: 

<ul>
<li>VMware ESXi™ 6.5 virtual machine (VM)</li>
<li>KVM/QCOW (QEMU Copy on Write) image for use on CentOS, Ubuntu
and RHEL hosts</li>
</ul></li>
<li>Physical:

<ul>
<li>NetQ Appliance</li>
</ul></li>
</ul>

<p>Best Practice</p>

<p>Cumulus Networks recommends you install the NetQ software on a server
that is part of an out-of-band management network to ensure it can
monitor in-band network issues without being affected itself. Ideally,
you should run the software on a separate, powerful server for maximum
usability and performance. Refer to <a href="#InstallNetQ-hwspec">Hardware
Support</a> for specifics.</p>

<p>The NetQ Platform components reside in containers in the VM. These
containers are completely separate from any containers you may have on
the hosts you are monitoring with NetQ. The NetQ containers do not
overwrite the host containers and vice versa.</p>

<p>To install the NetQ Platform image:</p>

<ol>
<li><p>Download the NetQ Platform image. </p>

<ol>
<li>On the <a href="https://cumulusnetworks.com/downloads/">Cumulus
Downloads</a> page,
select *NetQ Lab* from the <strong>Product</strong> list box.</li>
<li>Click <em>2.0</em> from the <strong>Version</strong> list box, and then
select <em>2.0.0</em> from the submenu.</li>
<li>Optionally, select the hypervisor you wish to use from
the <strong>Hypervisor</strong> list box.</li>

<li><p>Optionally, select the provider you wish to use from
the <strong>Provider</strong> list box.</p>

<p><img src="attachments/8365372/9013552.png" alt="" />{height=&ldquo;250&rdquo;}<br />
<strong>Note</strong>: If the 2.0 version option does not appear in the
Version list box, please contact your Cumulus sales
representative.</p></li>

<li><p>Scroll down to review the images that match your selection
criteria, and click <strong>Download</strong> for the image you want.</p>

<p><img src="attachments/8365372/9013553.png" alt="" />{height=&ldquo;250&rdquo;}</p></li>
</ol></li>

<li><p>Open your hypervisor.<br />
The following steps are shown using an OVA file with VMware ESXi.</p></li>

<li><p>Enter the address of the hardware in your browser.</p></li>

<li><p>Log in to VMware using credentials with root access.</p>

<p><img src="attachments/8365372/9012816.png" alt="" />{width=&ldquo;600&rdquo;}</p></li>

<li><p>Click <strong>Create/Register VM</strong> at the top of the right pane.<br />
<img src="attachments/8365372/9012818.png" alt="" /></p></li>

<li><p>Select <strong>Deploy a virtual machine from and OVF or OVA file</strong>, and
click <strong>Next</strong>.</p>

<p><img src="attachments/8365372/9012811.png" alt="" />{width=&ldquo;600&rdquo;}</p></li>

<li><p>Provide a name for the VM, for example <em>Cumulus NetQ</em>.</p></li>

<li><p>Drag and drop the NetQ Platform image file you downloaded in Step 1
above.</p></li>

<li><p>Click <strong>Next</strong>.</p>

<p><img src="attachments/8365372/9012812.png" alt="" />{width=&ldquo;600&rdquo;}</p></li>

<li><p>Select the storage type and data store for the image to use, then
click <strong>Next</strong>. In this example, only one is available.</p>

<p><img src="attachments/8365372/9012813.png" alt="" />{width=&ldquo;600&rdquo;}</p></li>

<li><p>Accept the default deployment options or modify them according to
your network needs. Click <strong>Next</strong> when you are finished.</p>

<p><img src="attachments/8365372/9012814.png" alt="" />{width=&ldquo;600&rdquo;}</p></li>

<li><p>Review the configuration summary. Click <strong>Back</strong> to change any of
the settings, or click <strong>Finish</strong> to continue with the creation of
the VM.</p>

<p><img src="attachments/8365372/9012815.png" alt="" />{width=&ldquo;600&rdquo;}<br />
The progress of the request is shown in the Recent Tasks window at
the bottom of the application. This may take some time, so continue
with your other work until the upload finishes.</p></li>

<li><p>Once completed, view the full details of the VM and hardware.<br />
<img src="attachments/8365372/9012819.png" alt="" />{width=&ldquo;600&rdquo;}</p></li>

<li><p>Verify you can access the NetQ CLI. </p>

<ol>
<li><p>From a terminal window, log in to the switch (<em>switch</em>) using
the default credentials (<em>cumulus/CumulusLinux!</em>).</p>
<div class="highlight"><pre class="chroma"><code class="language-plain" data-lang="plain">&lt;computer&gt;:~&lt;username&gt;$ ssh cumulus@switch
Warning: Permanently added &#39;netq-appliance,10.0.0.167&#39; (ECDSA) to the list of known hosts.
cumulus@netq-appliance&#39;s password: &lt;enter CumulusLinux! here&gt;

Welcome to Cumulus (R) Linux (R)

For support and online technical documentation, visit
http://www.cumulusnetworks.com/support

The registered trademark Linux (R) is used pursuant to a sublicense from LMI,
the exclusive licensee of Linus Torvalds, owner of the mark on a world-wide
basis.

cumulus@switch:~$ </code></pre></div></li>

<li><p>Run some NetQ commands.</p>
<div class="highlight"><pre class="chroma"><code class="language-plain" data-lang="plain">cumulus@switch:~$ netq show lldp
cumulus@switch:~$ netq check ntp</code></pre></div></li>
</ol></li>

<li><p>Continue the NetQ installation by loading the NetQ Agent on each
switch or host you want to monitor. Refer to the next section for
instructions.</p></li>
</ol>

<h2 id="install-the-netq-agent">Install the NetQ Agent</h2>

<p>Whether using the NetQ Appliance or your own hardware, the NetQ Agent
must be installed on each node you want to monitor.  The node can be a:</p>

<ul>
<li>Switch running Cumulus Linux version 3.7.0 or later</li>
<li>Server running Red Hat RHEL 7.1, Ubuntu 16.04 or CentOS 7</li>
<li>Linux virtual machine running any of the above Linux operating
systems</li>
</ul>

<p>To install the NetQ Agent you need to install the OS-specific meta
package, <code>cumulus-netq</code>, on each switch. Optionally, you can install it
on hosts. The meta package contains the NetQ Agent, the NetQ command
line interface (CLI), and the NetQ library. The library contains modules
used by both the NetQ Agent and the CLI.</p>

<p>Instructions for installing the meta package on each node type are
included here:</p>

<ul>
<li><a href="#InstallNetQ-AgentCL">Install NetQ Agent on a Cumulus Linux Switch</a></li>
<li><a href="#InstallNetQ-AgentUbuntu">Install NetQ Agent on an Ubuntu Server</a></li>
<li><a href="#InstallNetQ-AgentRHC">Install NetQ Agent on a Red Hat or CentOS
Server</a></li>
</ul>

<p>If your network uses a proxy server for external connections, you should
first configure a global proxy so apt-get can access the meta package on
the Cumulus Networks repository.</p>

<h3 id="install-netq-agent-on-a-cumulus-linux-switch">Install NetQ Agent on a Cumulus Linux Switch</h3>

<p>A simple two-step process installs the NetQ Agent on a Cumulus switch.</p>

<ol>
<li><p>On a switch, edit <code>/etc/apt/sources.list</code> to add the repository for
Cumulus NetQ. Note that NetQ has a separate repository from Cumulus
Linux.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ sudo nano /etc/apt/sources.list.d
...
deb http://apps3.cumulusnetworks.com/repos/deb CumulusLinux-3 netq-2.0
...</code></pre></div>
<p>The repository
<code>deb http://apps3.cumulusnetworks.com/repos/deb CumulusLinux-3 netq-latest</code>
can be used if you want to always retrieve the latest posted version
of NetQ.</p></li>

<li><p>Update the local <code>apt</code> repository, then install the NetQ meta
package on the switch. </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ sudo apt-get update &amp;&amp; sudo apt-get install cumulus-netq</code></pre></div></li>
</ol>

<p>Repeat these steps for each node, or use an automation tool to install
NetQ Agent on multiple nodes. Refer to <a href="https://docs.cumulusnetworks.com/pages/viewpage.action?pageId=8365385">Deployment
Appendices</a>
for an example Ansible playbook.</p>

<h3 id="install-netq-agent-on-an-ubuntu-server-optional">Install NetQ Agent on an Ubuntu Server (Optional)</h3>

<p>Before you install the NetQ Agent on an Ubuntu server, make sure the
following packages are installed and running these minimum versions:</p>

<ul>
<li>iproute 1:4.3.0-1ubuntu3.16.04.1 all</li>
<li>iproute2 4.3.0-1ubuntu3 amd64</li>

<li><p>lldpd 0.7.19-1 amd64</p></li>

<li><p>ntp 1:4.2.8p4+dfsg-3ubuntu5.6 amd64</p></li>

<li><p>docker-ce 17.06.1~ce-0~ubuntu amd64</p>

<p>This package is required only if you plan to monitor Docker
instances on the host; otherwise do not install it.</p>

<p>Make sure you are running lldp<strong>d</strong>, not lldp<strong>ad</strong>. Ubuntu does not
include <code>lldpd</code> by default, which is required for the installation.
To install this package, run the following commands:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@ubuntu:~# apt-get update
root@ubuntu:~# apt-get install lldpd
root@ubuntu:~# systemctl enable lldpd.service
root@ubuntu:~# systemctl start lldpd.service</code></pre></div></li>
</ul>

<p>To install the NetQ Agent on an Ubuntu server:</p>

<ol>
<li><p>Reference and update the local <code>apt</code> repository.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@ubuntu:~# wget -O- https://apps3.cumulusnetworks.com/setup/cumulus-apps-deb.pubkey | apt-key add -</code></pre></div></li>

<li><p>Create the
file <code>/etc/apt/sources.list.d/cumulus-host-ubuntu-xenial.list</code> and
add the following lines:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@ubuntu:~# vi /etc/apt/sources.list.d/cumulus-apps-deb-xenial.list
...
deb [arch=amd64] https://apps3.cumulusnetworks.com/repos/deb xenial netq-latest
deb [arch=amd64] https://apps3.cumulusnetworks.com/repos/deb xenial roh-3
...</code></pre></div>
<p>The use of <code>netq-latest</code> in this example means that a get to the
repository always retrieves the last version of NetQ, even in the
case where a major version update has been made. If you want to keep
the repository on a specific version — such as <code>netq-1.4</code> — use that
instead.</p></li>

<li><p>Install NTP on the server.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@ubuntu:~# apt install ntp
root@ubuntu:~# systemctl enable ntp
root@ubuntu:~# systemctl start ntp</code></pre></div></li>

<li><p>Install the meta package on the server.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@ubuntu:~# apt-get update ; apt-get install cumulus-netq</code></pre></div></li>

<li><p>Restart the NetQ daemon.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@ubuntu:~# systemctl enable netqd ; systemctl restart netqd</code></pre></div></li>
</ol>

<h3 id="install-netq-agent-on-a-red-hat-or-centos-server-optional">Install NetQ Agent on a Red Hat or CentOS Server (Optional)</h3>

<p>Before you install the NetQ Agent on a Red Hat or CentOS server, make
sure the following packages are installed and running these minimum
versions:</p>

<ul>
<li>iproute-3.10.0-54.el7_2.1.x86_64</li>

<li><p>lldpd-0.9.7-5.el7.x86_64</p>

<p>Make sure you are running lldp<strong>d</strong>, not lldp<strong>ad</strong>.</p>

<p>CentOS does not include <code>lldpd</code> by default, nor does it include
<code>wget</code>, which is required for the installation. To install this
package, run the following commands:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@centos:~# yum -y install epel-release
root@centos:~# yum -y install lldpd
root@centos:~# systemctl enable lldpd.service
root@centos:~# systemctl start lldpd.service
root@centos:~# yum install wget</code></pre></div></li>

<li><p>ntp-4.2.6p5-25.el7.centos.2.x86_64</p></li>

<li><p>ntpdate-4.2.6p5-25.el7.centos.2.x86_64</p></li>
</ul>

<p>To install the NetQ Agent on a Red Hat or CentOS server:</p>

<ol>
<li><p>Reference and update the local <code>yum</code> repository.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@rhel7:~# rpm --import https://apps3.cumulusnetworks.com/setup/cumulus-apps-rpm.pubkey
root@rhel7:~# wget -O- https://apps3.cumulusnetworks.com/setup/cumulus-apps-rpm-el7.repo &gt; /etc/yum.repos.d/cumulus-host-el.repo</code></pre></div></li>

<li><p>Edit <code>/etc/yum.repos.d/cumulus-host-el.repo</code> to set
the <code>enabled=1</code> flag for the two NetQ repositories.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@rhel7:~# vi /etc/yum.repos.d/cumulus-host-el.repo
... 
[cumulus-arch-netq-2.0]
name=Cumulus netq packages
baseurl=https://apps3.cumulusnetworks.com/repos/rpm/el/7/netq-2.0/$basearch 
gpgcheck=1
enabled=1
[cumulus-noarch-netq-2.0]
name=Cumulus netq architecture-independent packages
baseurl=https://apps3.cumulusnetworks.com/repos/rpm/el/7/netq-2.0/noarch
gpgcheck=1
enabled=1
...</code></pre></div></li>

<li><p>Install NTP on the server.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@rhel7:~# yum install ntp
root@rhel7:~# systemctl enable ntpd
root@rhel7:~# systemctl start ntpd</code></pre></div></li>

<li><p>Install the Bash completion and NetQ meta packages on the server.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@rhel7:~# yum -y install bash-completion
root@rhel7:~# yum install cumulus-netq</code></pre></div></li>

<li><p>Restart the NetQ daemon.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@rhel7:~# systemctl enable netqd ; systemctl restart netqd</code></pre></div></li>
</ol>

<h2 id="set-up-the-netq-agents">Set Up the NetQ Agents</h2>

<p>Once the NetQ Agents have been installed on the network nodes you want
to monitor, the NetQ Agents must be configured to obtain useful and
relevant data. The code examples shown in this section illustrate how to
configure the NetQ Agent on a Cumulus switch acting as a host, but it
is exactly the same for the other type of nodes. Depending on your
deployment, follow the relevant additional instructions after the basic
configuration steps:</p>

<ul>
<li><a href="https://docs.cumulusnetworks.com/display/NETQ140DRAFT/Cumulus+NetQ+1.4+Installation+Guide#CumulusNetQ1.4InstallationGuide-BasicConfig">Basic
Configuration</a></li>
<li><a href="#InstallNetQ-AgentVRF">Configuring the Agent to Use a VRF</a></li>
<li><a href="#InstallNetQ-port">Configuring the Agent to Communicate over a Specific
Port</a></li>
<li><a href="#InstallNetQ-AgentDocker">Enabling Docker for Container
Environments</a></li>
</ul>

<h3 id="basic-configuration">Basic Configuration </h3>

<p>This is the minimum configuration required to properly monitor your
nodes.</p>

<ol>
<li><p>Verify
that <a href="https://docs.cumulusnetworks.com/display/DOCS/Setting+Date+and+Time">NTP</a> is
running on the host node. Nodes must be in time synchronization with
the NetQ Platform to enable useful statistical analysis.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo systemctl status ntp
[sudo] password for cumulus:
● ntp.service - LSB: Start NTP daemon
   Loaded: loaded (/etc/init.d/ntp; bad; vendor preset: enabled)
   Active: active (running) since Fri 2018-06-01 13:49:11 EDT; 2 weeks 6 days ago
     Docs: man:systemd-sysv-generator(8)
   CGroup: /system.slice/ntp.service
           └─2873 /usr/sbin/ntpd -p /var/run/ntpd.pid -g -c /var/lib/ntp/ntp.conf.dhcp -u 109:114</code></pre></div></li>

<li><p>Restart <code>rsyslog</code> so log files are sent to the correct destination.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ sudo systemctl status ntp</code></pre></div></li>

<li><p>Link the host node to the NetQ Platform you configured above.<br />
In this code example, the IP address for the NetQ
Platform is *198.168.1.254.  *Note: Run ifconfig eth0 on the NetQ
Platform if you forgot to write down the address.</p>

<p> </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq config add agent server 198.168.1.254</code></pre></div>
<p>This command updates the configuration in
the <code>/etc/netq/netq.yml</code> file and enables the NetQ CLI.</p></li>

<li><p>Restart NetQ Agent.</p>

<p> </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq config restart agent</code></pre></div>
<p> </p>

<p>If you see the following error, it means you haven&rsquo;t added the NetQ
Platform or the server wasn&rsquo;t configured:</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">Error: Please specify IP address of DB server</code></pre></div></li>

<li><p>Verify NetQ Agent can reach the NetQ Platform.</p>

<p> </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq config show server</code></pre></div></li>
</ol>

<h3 id="configure-the-agent-to-use-a-vrf-optional">Configure the Agent to Use a VRF (Optional)</h3>

<p>While optional, Cumulus strongly recommends that you configure NetQ
Agents to communicate with the NetQ Platform only via
a <a href="https://docs.cumulusnetworks.com/display/DOCS/Virtual+Routing+and+Forwarding+-+VRF">VRF</a>,
including a <a href="https://docs.cumulusnetworks.com/display/DOCS/Management+VRF">management
VRF</a>. To
do so, you need to specify the VRF name when configuring the NetQ Agent.
For example, if the management VRF is configured and you want the agent
to communicate with the NetQ Platform over it, configure the agent like
this: </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ netq config add agent server 198.168.1.254 vrf mgmt
cumulus@leaf01:~$ netq config add cli server 198.168.253 vrf mgmt</code></pre></div>
<p>You then restart the agent as described in the previous section: </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@leaf01:~$ netq config restart agent
cumulus@leaf01:~$ netq config restart cli</code></pre></div>
<h3 id="configure-the-agent-to-communicate-over-a-specific-port-optional">Configure the Agent to Communicate over a Specific Port (Optional)</h3>

<p>By default, NetQ uses port 6379 for communication between the NetQ
Platform and NetQ Agents. If you want the NetQ Agent to communicate with
the NetQ Platform via a different port, you need to specify the port
number when configuring the NetQ Agent like this: </p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">cumulus@switch:~$ netq config add agent server 198.168.1.254 port 7379</code></pre></div>
<p>If you are using NetQ in high availability mode, you can only configure
it on port 6379 or 26379.</p>

<h3 id="enabling-docker-for-container-environments">Enabling Docker for Container Environments</h3>

<p>Before enabling Docker, you must first install Docker. The code examples
used here were created on an Ubuntu 16.04 host. </p>

<p>To install and enable Docker:</p>

<ol>
<li><p>Add the Docker repository key.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@host:~# curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</code></pre></div></li>

<li><p>Install the Docker repository.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@host:~# echo &#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&#34; | sudo tee /etc/apt/sources.list.d/docker.list</code></pre></div></li>

<li><p>Update the package lists.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@host:~# apt-get update</code></pre></div></li>

<li><p>Install Docker on the Ubuntu host.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@host:~# apt-get install -y docker-ce</code></pre></div></li>

<li><p>Check that the Docker service is running on the Ubuntu 16.04 host.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@host:~# systemctl status docker
● docker.service - Docker Application Container Engine
   Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)
   Active: active (running) since Wed 2017-10-18 02:51:48 UTC; 1min 42s ago
     Docs: https://docs.docker.com
 Main PID: 18661 (dockerd)
   CGroup: /system.slice/docker.service
           ├─18661 /usr/bin/dockerd -H fd://
           └─18666 docker-containerd -l unix:///var/run/docker/libcontainerd/docker-containerd.sock --metrics-interval=0 --start-timeout 2m --state-dir /var/run/docker/libcontainerd/containerd --shim docker-containerd-shim --runtime docker-runc</code></pre></div></li>

<li><p><strong>Optional: </strong>Add the docker group to your user account to be able
to run docker commands without using <code>sudo</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-plain" data-lang="plain">user@host:~$ sudo adduser ${USER} docker</code></pre></div>
<p>Adding groups to different users requires a logout and login to take
effect.</p></li>

<li><p>Enable Docker by adding the following three lines to
the <code>netq.yml</code> file on the container host. This command also sets
how often to pull data from the container to every 15 seconds.</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">root@host:~# vi /etc/netq/netq.yml
      
...
docker:
  enable: true
  poll_period: 15
...</code></pre></div></li>
</ol>

<h2 id="integrate-with-event-notification-tools">Integrate with Event Notification Tools</h2>

<p>If you want to proactively monitor events in your network, you can
integrate NetQ with PagerDuty or Slack. To do so you need to configure
both the notification application itself to receive the messages, and
the NetQ notifier with what messages to send and where to send them.
Refer to <a href="Configuring_Optional_NetQ_Capabilities">Integrate NetQ with Event Notification
Applications</a> to use the CLI for
configuration.</p>

<h2 id="set-up-security">Set Up Security</h2>

<p>When you set up and configured your Cumulus Linux switches, you likely
configured a number of the security features available. Cumulus
recommends the same security measures be followed for the NetQ Platform
in the out-of-band-network. Refer to the  Securing Cumulus Linux white
paper for details.</p>

<p>Your Cumulus Linux switches have a number of ports open (refer to
Default Open Ports in Cumulus Linux article).                           
         </p>

<h2 id="attachments">Attachments:</h2>

<p><img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/8365378.png">NetQ Install
Process Flow.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/8365377.png">image2018-7-16
13:11:57.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/8365376.png">image2018-7-16
17:15:28.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/8365375.png">image2018-7-16
17:47:33.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/8365374.png">image2018-10-3
19:3:41.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/8365373.png">image2018-10-3
19:4:52.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/8365371.png">image2018-10-3
19:6:7.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012636.xml">NetQ 20 Install
Process Flow.xml</a> (text/xml)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012637.png">image2019-1-31
15:49:9.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012811.png">image2019-2-6
11:50:38.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012812.png">image2019-2-6
11:53:5.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012813.png">image2019-2-6
11:54:19.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012814.png">image2019-2-6
11:55:27.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012815.png">image2019-2-6
11:58:45.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012816.png">image2019-2-6
12:6:45.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012817.png">image2019-2-6
12:7:55.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012818.png">image2019-2-6
12:8:30.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012819.png">image2019-2-6
12:26:28.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012894.png">NetQ 20 Install
Process Flow.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9012820.png">NetQ 20 Install
Process Flow.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9013549.png">image2019-2-18
10:10:42.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9013551.png">image2019-2-18
10:17:14.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9013552.png">image2019-2-18
10:18:8.png</a> (image/png)<br />
<img src="images/icons/bullet_blue.gif" alt="" />{width=&ldquo;8&rdquo; height=&ldquo;8&rdquo;} <a href="attachments/8365372/9013553.png">image2019-2-18
10:19:49.png</a> (image/png)</p>
</article>

      
<div class="align-center book-git-footer justify-between">
  
  <div>
    <a href="/commit/6acd7c038710e07f4a059d10b137f7b93cf9f759" title='Last modified February 26, 2019 13:53 EST by Daniel Cawley' target="_blank" rel="noopener">
      <img src="/svg/code-merge.svg" /> Last Modified Feb 26, 2019
    </a>
  </div>
  
  
</div>


    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
<ul>
<li><a href="#install-netq">Install NetQ</a>
<ul>
<li><a href="#contents">Contents</a></li>
<li><a href="#prerequisites">Prerequisites</a>
<ul>
<li><a href="#hardware-requirements">Hardware Requirements</a></li>
<li><a href="#operating-system-requirements">Operating System Requirements</a></li>
<li><a href="#netq-application-support">NetQ Application Support</a></li>
</ul></li>
<li><a href="#install-workflow">Install Workflow</a></li>
<li><a href="#install-the-netq-platform">Install the NetQ Platform</a></li>
<li><a href="#install-the-netq-agent">Install the NetQ Agent</a>
<ul>
<li><a href="#install-netq-agent-on-a-cumulus-linux-switch">Install NetQ Agent on a Cumulus Linux Switch</a></li>
<li><a href="#install-netq-agent-on-an-ubuntu-server-optional">Install NetQ Agent on an Ubuntu Server (Optional)</a></li>
<li><a href="#install-netq-agent-on-a-red-hat-or-centos-server-optional">Install NetQ Agent on a Red Hat or CentOS Server (Optional)</a></li>
</ul></li>
<li><a href="#set-up-the-netq-agents">Set Up the NetQ Agents</a>
<ul>
<li><a href="#basic-configuration">Basic Configuration </a></li>
<li><a href="#configure-the-agent-to-use-a-vrf-optional">Configure the Agent to Use a VRF (Optional)</a></li>
<li><a href="#configure-the-agent-to-communicate-over-a-specific-port-optional">Configure the Agent to Communicate over a Specific Port (Optional)</a></li>
<li><a href="#enabling-docker-for-container-environments">Enabling Docker for Container Environments</a></li>
</ul></li>
<li><a href="#integrate-with-event-notification-tools">Integrate with Event Notification Tools</a></li>
<li><a href="#set-up-security">Set Up Security</a></li>
<li><a href="#attachments">Attachments:</a></li>
</ul></li>
</ul>
</nav>
  </aside>



  </main>

  
  
</body>

</html>
